window._CCSettings={platform:"web-mobile",groupList:["default"],collisionMatrix:[[!0]],rawAssets:{assets:{0:["resources/base/scenes/GameStartup.fire",5],1:["resources/base/scenes/DebugGameStartup.fire",5],2:["resources/base/atlas/login/LoginAtlas",0,1],3:["resources/base/atlas/login/LoginAtlas",0,1],4:["resources/base/prefabs/zone/ZoneSkin.prefab",4],5:["resources/base/atlas/login/LoginAtlas",0,1],6:["resources/base/atlas/login/LoginAtlas",0,1],7:["resources/base/atlas/login/LoginAtlas",0,1],8:["resources/base/atlas/login/LoginAtlas",0,1],9:["resources/base/atlas/loading/loading",0,1],10:["resources/base/atlas/loading/loading",0,1],11:["resources/base/atlas/loading/loading",0,1],12:["resources/base/prefabs/Loading.prefab",4],13:["resources/base/atlas/login/LoginAtlas",0,1],14:["resources/base/atlas/login/LoginAtlas",0,1],15:["resources/base/atlas/login/LoginAtlas",0,1],16:["resources/base/atlas/login/LoginAtlas",0,1],17:["resources/base/prefabs/baseGameAlert/BaseGameAlertSkin.prefab",4],18:["resources/base/atlas/register/register",0,1],19:["resources/base/atlas/register/register.plist",2],20:["resources/base/atlas/register/register",0,1],21:["resources/base/atlas/register/register",0,1],22:["resources/base/prefabs/bulletin/BulletinFontsSkin.prefab",4],23:["resources/base/atlas/login/LoginAtlas",0,1],24:["resources/base/prefabs/zone/ZoneListBookItemSkin.prefab",4],25:["resources/base/atlas/login/LoginAtlas",0,1],26:["resources/base/prefabs/roleLogin/RegisterSkin.prefab",4],27:["resources/base/atlas/login/LoginAtlas",0,1],28:["resources/base/atlas/login/LoginAtlas",0,1],29:["resources/base/atlas/login/LoginAtlas",0,1],30:["resources/base/prefabs/zone/ZoneListItemSkin.prefab",4],31:["resources/base/atlas/login/LoginAtlas",0,1],32:["resources/base/atlas/login/LoginAtlas",0,1],33:["resources/base/atlas/login/LoginAtlas",0,1],34:["resources/base/atlas/login/LoginAtlas",0,1],35:["resources/base/atlas/login/LoginAtlas",0,1],36:["resources/base/atlas/login/LoginAtlas",0,1],37:["resources/base/atlas/login/LoginAtlas",0,1],38:["resources/base/atlas/login/LoginAtlas",0,1],39:["resources/base/atlas/login/LoginAtlas",0,1],40:["resources/base/atlas/login/LoginAtlas",0,1],41:["resources/base/atlas/login/LoginAtlas",0,1],42:["resources/base/atlas/login/LoginAtlas",0,1],43:["resources/base/atlas/login/LoginAtlas",0,1],44:["resources/base/atlas/login/LoginAtlas",0,1],45:["resources/base/atlas/login/LoginAtlas.plist",2],46:["resources/base/atlas/login/LoginAtlas",0,1],47:["resources/base/atlas/login/LoginAtlas",0,1],48:["resources/base/atlas/login/LoginAtlas",0,1],49:["resources/base/atlas/login/LoginAtlas",0,1],50:["resources/base/atlas/login/LoginAtlas",0,1],51:["resources/base/atlas/loading/loading",0,1],52:["resources/base/atlas/loading/loading",0,1],53:["resources/base/atlas/loading/loading.plist",2],54:["resources/base/atlas/loading/loading",0,1],55:["resources/base/atlas/loading/loading",0,1],56:["resources/base/atlas/loginCreateRole/loginCreateRole",0,1],57:["resources/base/atlas/loginCreateRole/loginCreateRole",0,1],58:["resources/base/prefabs/roleLogin/CreateRoleSkin.prefab",4],59:["resources/base/atlas/loginCreateRole/loginCreateRole",0,1],60:["resources/base/atlas/loginCreateRole/loginCreateRole",0,1],61:["resources/base/atlas/loginCreateRole/loginCreateRole",0,1],62:["resources/base/atlas/loginCreateRole/loginCreateRole",0,1],63:["resources/base/atlas/loginCreateRole/loginCreateRole",0,1],64:["resources/base/atlas/loginCreateRole/loginCreateRole",0,1],65:["resources/base/atlas/loginCreateRole/loginCreateRole.plist",2],66:["resources/base/atlas/loginCreateRole/loginCreateRole",0,1],67:["resources/base/prefabs/roleLogin/ServerListSkin.prefab",4],"9brUmCEQ1OQa8MhpRmlVuC":["resources/base/atlas/loading/loading",0,1],"e4EEoWv5xFhJh7bvbzX+Fp":["resources/base/atlas/loading/loading.img",1],ecpn3NG31IHKt6YZa7l96q:["resources/base/atlas/loading/loading.png",3],"2cW6zqfcBIu69LqrSWQInJ":["resources/base/atlas/login/LoginAtlas",0,1],"81byVLe39GhZrJvIQspmZW":["resources/base/atlas/login/LoginAtlas.img",1],"20WwKzkY1J45ch71oVZm0w":["resources/base/atlas/login/LoginAtlas.png",3],"3aJ6rFHipMroy8Y3JcFkxd":["resources/base/atlas/loginCreateRole/loginCreateRole",0,1],"36VmZ1c1JPi7FWixrk5Dxr":["resources/base/atlas/loginCreateRole/loginCreateRole.img",1],"8cQACVKKRBaZFdcbm+6AhV":["resources/base/atlas/loginCreateRole/loginCreateRole.png",3],"67tvyafnRH94xUCkIOvAPX":["resources/base/atlas/register/register",0,1],"21IijsH5ZKy6vWuyLRmG1v":["resources/base/atlas/register/register.img",1],"50c8W9a4VOvaFi43TIqkdA":["resources/base/atlas/register/register.png",3]}},assetTypes:["cc.SpriteFrame","cc.RawAsset","cc.SpriteAtlas","cc.Texture2D","cc.Prefab","cc.SceneAsset"],launchScene:"db://assets/resources/base/scenes/GameStartup.fire",scenes:[{url:"db://assets/resources/base/scenes/GameStartup.fire",uuid:0},{url:"db://assets/resources/base/scenes/DebugGameStartup.fire",uuid:1}],packedAssets:{"0195e51c9":[2,3,4,5,6,7,8],"02ea0a3c8":[9,10,11,12],"04e7df28a":[2,13,14,15,16,5,7,17],"061ffc4d7":[18,19,20,21],"0693fe72c":[2,22,5,6,7,8],"06ae2f0de":[23,24,25],"0725db73b":[18,26,20,21],"0833f8e7c":[27,28,29,30,31,32,33,34,35],"0b20117d3":[36,27,37,2,28,29,38,13,3,39,40,41,42,31,14,15,32,43,33,34,16,44,35,5,45,46,47,6,23,48,25,7,49,50,8],"0bd4c01df":[9,10,51,52,53,54,11,55],"0cba669dc":[56,57,58,59,60,61,48,62,63],"0e1bfcfec":[56,64,65,57,66,59,60,61,62,63],"0f5918500":[37,28,29,67,31,66,34,35,48,49]},orientation:"",uuids:["a4xHsE6cNK8YBVWfb8u6EH","49PFt/26VMK6w7roczrh4N","18N5WAq89J8LKvvyMUfNaQ","31joNK+RNEhbEBOQTAsCuY","9evaPaNaJO/6gFFWmmPKvY","aeB+NQ9LtGzKmZwc6f+twQ","bdM1zeD0RP0q000WlNzEs9","d8WjLFBjdISZYcbBB6XCoE","f1WaH4D/9OJ4mfEgP9fFiY","0eOl3urklHRbTnQy7I+YLD","27AOhPzDxHypYBP8ONe2lt","87IL2i4lNPeJG+rZ6+a9TV","98qjoGP8NDiKOiM2DPhUwz","2fEnoFF5FCxrtSZ7Y38adC","6a9ujOpZxOaLJ7/8EVXJhz","6dvqx8Ug5IJZMTuhZnX72w","a3t45x7zlEFZFjw+W1WXJ1","f54Qe+wshB+q43cLJqJn6w","acsqUDW+9C4YVYbrVwVpDS","b2QYjr4XZJJJ3XM5Yo/5NJ","bdb0b2GsND64DPHpUdn0r6","cdFbcecJZFCpkyxPJLGA2l","a4DshSUsdAHoQFe6YUxEX7","c3c2Yr5URBbaJiDwr0J3mK","c58YXweG9FjbAuqejka023","d7ddTeabxNIKrODrZuDr/F","b6fjniqfJCU6A2P/QDvu9f","11lIVazPROsLgN4c4cY8ja","1cDVlfNrdCuatFfxy3f50E","289cpER5NEa6RUVcGrgK7o","31WZSInhxLqbg0BdMMyQub","580htdS5RK2Kjlv2PcqIBv","80CLUSk6lNIoTVZDuNGZ5j","87kXqa7sdHCZeDiOeNLpy1","8dRcDJsv1Dwr/8/WTtJ/0f","abr9KyEh1NC69gH9J+KP1w","00HD97ZjdCkZZ4jkUvctK9","14WyuebCVDj6N68OXo/V4Y","2agVRdecVBjo25e/wxtZ55","38Hg25gYpDO7Rl4zapiMB3","3cIMGhSu9OOKSjBcpPC/oL","3cwr7/lgVGzJypsj2I9N4f","54qD94gqBJvoB/ngVw2GpO","81W/2W0vdB2KtNVb+XYUzF","a9JOA7Nn9KS51iFJRWjfDK","aeWCKgJoJNQoTh6yAq6Djd","b0imZ83YJB6oxlj+pKXS09","b2kq0K+P5H55UN5jq3yczt","d3jHG4HMZCw4OzXHQgv5Yy","e0CmYxCUtNnaMD0PHH1fsg","e5ZSMtfM9BPYXwNKnOMJGc","391vsGpAlJAJUX1jIcfa4H","56TsnafJlFhqYyFEau6J6J","71UmGWcXRM5Zyxkqnqfq6E","73RJYCXMRL4rlxqlrhqzTq","a8Z5uy3eRJ8IGBG/xlxXjr","09mdocgXhOgIqMt2utNuI/","4dxrwIbUlJSLmIp8fSp9Ez","93pmWadm9I7LORGbNtBWQn","a0Ws6ZlAVFPbpCe0l0y1zz","b200zGdU1F75dh+BP6zjBl","c6hkdkj2RGdYFHzOq3nTIo","dfvA6Q4/JEdIuROhVg5Y/g","fdUFkJDKBAIb1RXJx5o31p","0fqKiOL+xJMpJ0EnQI4C3s","48xwFUhohMNYdYjY29zwtX","604HaRfUNFFLiFGdvvU2UO","4cbWxTqn1J1Lj+bwdsa4xf"],md5AssetsMap:{"01/0195e51c9.json":"e3b41","02/02ea0a3c8.json":"a94c9","04/04e7df28a.json":"8b85f","06/061ffc4d7.json":"8839e","06/0693fe72c.json":"6f175","06/06ae2f0de.json":"911f0","07/0725db73b.json":"44a9a","08/0833f8e7c.json":"7639b","0b/0b20117d3.json":"cb740","0b/0bd4c01df.json":"59b35","0c/0cba669dc.json":"4b1f0","0e/0e1bfcfec.json":"542e0","0f/0f5918500.json":"9b227","2c/2c5bacea-7dc0-48bb-af4b-aab4964089c9.json":"4df33","3a/3a27aac5-1e2a-4cae-8cbc-63725c164c5d.json":"d0d84","49/493c5b7f-dba5-4c2b-ac3b-ae8733ae1e0d.json":"d7b5a","67/67b6fc9a-7e74-47f7-8c54-0a420ebc03d7.json":"b3254","9b/9bad4982-110d-4e41-af0c-869466955b82.json":"449c7","a4/a4c47b04-e9c3-4af1-8055-59f6fcbba107.json":"689a4","assets/resources/base/atlas/loading/loading.img":"02881","assets/resources/base/atlas/loading/loading.png":"c11b8","assets/resources/base/atlas/login/LoginAtlas.img":"4cfa6","assets/resources/base/atlas/login/LoginAtlas.png":"b87b1","assets/resources/base/atlas/loginCreateRole/loginCreateRole.img":"83a0c","assets/resources/base/atlas/loginCreateRole/loginCreateRole.png":"e021a","assets/resources/base/atlas/register/register.img":"32927","assets/resources/base/atlas/register/register.png":"c63a6"}},require=function r(o,a,l){function h(t,e){if(!a[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var s=a[t]={exports:{}};o[t][0].call(s.exports,function(e){return h(o[t][1][e]||e)},s,s.exports,r,o,a,l)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)h(l[e]);return h}({AnalyticsSDK:[function(e,t,i){"use strict";cc._RF.push(t,"e7044EidQVL+ZS1WJ28gqKN","AnalyticsSDK");var n=game.AnalyticsSDK=function(){};n._sdkNet=b8e.NetMgr.createMgr("AnalyticsSDK"),n._sdkServerUrlBase="http://log.reyun.com",n._appId="9f557b0af913ee914b797ad9c4cc0d78",n.init=function(){b8e.Timer.add(this,this.sendHearbeat,3e5)},n.onCreateFirstRoleInZone=function(){this._needCollect()&&(b8e.log("AnalyticsSDK.onCreateFirstRoleInZone()"),this._sendRequest("/receive/rest/register",{appid:this._appId,who:this._getUid(),context:{deviceid:this._getDeviceId(),serverid:this._getServerId(),channelid:this._getChannelName()}}))},n.onLoggedInToZone=function(){this._needCollect()&&(b8e.log("AnalyticsSDK.onLoggedInToZone()"),this._sendRequest("/receive/rest/loggedin",{appid:this._appId,who:this._getUid(),context:{deviceid:this._getDeviceId(),serverid:this._getServerId(),channelid:this._getChannelName()}}))},n.onFinishRecharge=function(e,t,i,n){this._needCollect()&&(b8e.log("AnalyticsSDK.onFinishRecharge(), orderId: "+e+", moneyAmount: "+t+", diamondAmount: "+i+", itemId: "+n),e||(e="1"),this._sendRequest("/receive/rest/payment",{appid:this._appId,who:this._getUid(),context:{deviceid:this._getDeviceId(),serverid:this._getServerId(),channelid:this._getChannelName(),transactionid:e,paymenttype:"default",currencytype:"rmb",currencyamount:t,virtualcoinamount:i,iapname:n,iapamount:"1"}}))},n.onFinishMainQuest=function(e){this._needCollect()&&(b8e.log("AnalyticsSDK.onFinishMainQuest()"),this._sendRequest("/receive/rest/quest",{appid:this._appId,who:this._getUid(),context:{deviceid:this._getDeviceId(),serverid:this._getServerId(),channelid:this._getChannelName(),questtype:"主线任务",questid:e,queststatus:"c"}}))},n.onStartInstance=function(e,t){this._needCollect()&&(b8e.log("AnalyticsSDK.onStartInstance()"),this._sendRequest("/receive/rest/quest",{appid:this._appId,who:this._getUid(),context:{deviceid:this._getDeviceId(),serverid:this._getServerId(),channelid:this._getChannelName(),questtype:e,questid:t,queststatus:"a"}}))},n.onEndInstance=function(e,t,i){this._needCollect()&&(b8e.log("AnalyticsSDK.onEndInstance()"),this._sendRequest("/receive/rest/quest",{appid:this._appId,who:this._getUid(),context:{deviceid:this._getDeviceId(),serverid:this._getServerId(),channelid:this._getChannelName(),questtype:e,questid:t,queststatus:i?"c":"f"}}))},n.sendHearbeat=function(){this._needCollect()&&(b8e.log("AnalyticsSDK.sendHearbeat()"),this._sendRequest("/receive/rest/heartbeat",{appid:this._appId,who:this._getUid(),context:{deviceid:this._getDeviceId(),serverid:this._getServerId(),channelid:this._getChannelName()}}))},n._needCollect=function(){return!1},n._getUid=function(){return game.LoginConfig.uid},n._getRoleId=function(){return game.MainRoleMgr?game.mainRole.mainRoleData.playerId:0},n._getServerId=function(){return game.LoginConfig.serverId},n._getChannelName=function(){return game.LoginConfig.channelName},n._getDeviceId=function(){return"unknown"},n._sendRequest=function(e,t){var i=this._sdkServerUrlBase+e;this._sdkNet.requestData(i,t,function(e,t){null!=e?b8e.error("Failed to send analytics request to "+i+", err: "+e):0!=t.status&&b8e.error("Got failed response for analytics request to "+i+", err: "+JSON.stringify(t.result))},null,null,!0,{isJson:!0})},cc._RF.pop()},{}],AppInfo:[function(e,t,i){"use strict";cc._RF.push(t,"bb300/PjldJVoc7hBAaWhn+","AppInfo");var c=b8e.HashMap.get();game.AppInfo=b8e.Class.extends({moduleName:"",skinName:"",scriptName:"",banShuSkinName:"",banshuScriptName:"",posType:0,pX:0,pY:0,appName:"",layer:null,loadingTitle:"",insPrefab:null}),game.AppInfo.create=function(e,t,i,n,s){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,l=(8<arguments.length&&void 0!==arguments[8]&&arguments[8],9<arguments.length&&void 0!==arguments[9]?arguments[9]:null),h=c.get(e);return h?b8e.log("警告:",e+"重复定义,请检查是否有同名APP(可能包路径不同)"):((h=new game.AppInfo).moduleName=e,h.skinName=t,h.scriptName=i,h.banShuSkinName=n,h.banshuScriptName=s,h.posType=r,h.pX=o,h.pY=a,h.loadingTitle="正在加载，请您稍候...",h.appName="",h.layer=l,c.set(h.moduleName,h)),e},game.AppInfo.getAppInfo=function(e){return c.get(e)},cc._RF.pop()},{}],AppPosType:[function(e,t,i){"use strict";cc._RF.push(t,"7a1fbrg9mdGBKUhn3Dyeqqc","AppPosType"),game.AppPosType=b8e.Enum({MIDDLE_CENTRAL:0,TOP_LEFT:1,TOP_CENTRAL:2,TOP_RIGHT:3,MIDDLE_RIGHT:4,BOTTOM_RIGHT:5,BOTTOM_CENTRAL:6,BOTTOM_LEFT:7,MIDDLE_LEFT:8,TOP_DOWN_FIXED:9}),cc._RF.pop()},{}],AppTweenType:[function(e,t,i){"use strict";cc._RF.push(t,"d218bhf/9ZFpYWAakzJvGaJ","AppTweenType"),game.AppTweenType=b8e.Enum({TWEEN_TYPE_FADED:0,TWEEN_TYPE_ZOOM:100}),cc._RF.pop()},{}],BaseGameAlertBtnType:[function(e,t,i){"use strict";cc._RF.push(t,"eff6bA2X91LHa9za8feKdqo","BaseGameAlertBtnType"),game.BaseGameAlertBtnType=b8e.Enum({CONFIRM:0,CANCEL:1,CLOSE:2}),cc._RF.pop()},{}],BaseGameAlertGUI:[function(e,t,i){"use strict";cc._RF.push(t,"52f70i0C+9A35PAKA4vmTQG","BaseGameAlertGUI"),game.BaseGameAlertGUI=b8e.BaseDisplay.extends({_gameAlertMap:null,_gameAlertInfoMap:null,ctor:function(){this._super(),this._gameAlertMap=b8e.HashMap.get(),this._gameAlertInfoMap=b8e.HashMap.get()},show:function(){},hide:function(){},showAlert:function(e,t,i){if(i){var n=i.string;if(game.baseGameAlert.isNeedShowGameAlert(n))t.call(e,i,game.BaseGameAlertBtnType.CONFIRM);else{var s=b8e.layer.getTopLayer();this._gameAlert=new game.BaseGameAlert(e,t,i),this._gameAlertMap.set(n,this._gameAlert),s.addChild(this._gameAlert),this._gameAlert.setLocalZOrder(999999999)}}},hideAlert:function(e){this._gameAlertMap.has(e)&&(this._gameAlertMap.get(e).removeFromParent(),this._gameAlert.del(e))}}),cc._RF.pop()},{}],BaseGameAlertInfo:[function(e,t,i){"use strict";cc._RF.push(t,"c97aa5hErdHfbNvaBuXbdDI","BaseGameAlertInfo"),game.BaseGameAlertInfo=b8e.Object.extends({alertType:0,string:"",isShow:!0,obj:null,isShowTips:!0,confirmString:"确认",cancelString:"取消",desc:"",descFunc:null,isSelectTips:!0,ctor:function(){this._super()},clearInfo:function(){this.alertType=0,this.string="",this.isShow=!0,this.obj=null,this.isShowTips=!0,this.confirmString="确认",this.cancelString="取消",this.desc="",this.descFunc=null,this.isSelectTips=!0}}),cc._RF.pop()},{}],BaseGameAlertMgr:[function(e,t,i){"use strict";cc._RF.push(t,"8f888zXrI1GHoqB2LHaowlK","BaseGameAlertMgr"),game.BaseGameAlertMgr=b8e.Object.extends({name:"BaseGameAlertMgr",_gamAlertGUI:null,_gameAlertInfoMap:null,ctor:function(){if(1==game.BaseGameAlertMgr._singleton)throw new Error("BaseGameAlertMgr 只能通过单例方法获取");this._super(),this._gameAlertInfoMap=b8e.HashMap.get()},gameAlertGUI:{get:function(){return this._gamAlertGUI||(this._gamAlertGUI=new game.BaseGameAlertGUI),this._gamAlertGUI}},showAlert:function(e,t,i){this.gameAlertGUI.showAlert(e,t,i)},hideGameAlertUI:function(e){this.isNeedShowGameAlert(e)||this.gameAlertGUI.hideAlert(e)},setGameAlertInfoMap:function(e){this._gameAlertInfoMap.set(e.string,e)},isNeedShowGameAlert:function(e){return!!this._gameAlertInfoMap.get(e)}}),game.BaseGameAlertMgr._instance=null,game.BaseGameAlertMgr._singleton=!0,game.BaseGameAlertMgr.inst=function(){return game.BaseGameAlertMgr._instance||(game.BaseGameAlertMgr._singleton=!1,game.BaseGameAlertMgr._instance=new game.BaseGameAlertMgr,game.BaseGameAlertMgr._singleton=!0),game.BaseGameAlertMgr._instance},cc._RF.pop()},{}],BaseGameAlertType:[function(e,t,i){"use strict";cc._RF.push(t,"eddebaHoCFDzbaC8n/kQG4n","BaseGameAlertType"),game.BaseGameAlertType=b8e.Enum({None:0,OneBtn:1,TwoBtn:2}),cc._RF.pop()},{}],BaseGameAlert:[function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s;cc._RF.push(t,"0ebacuIPBtA0K85vZ2oEEb3","BaseGameAlert"),game.BaseGameAlert=b8e.SkinWidget.extends((n(s={_type:null,_callback:null,_string:null,_thisArg:null,_obj:null,_modalBgNode:null,_screenOriginPos:null,_graphicsModalImg:null,_modalBgColor:null,_tipsIsSelect:!0,gameAlertData:null,_gameAlertInfo:null,ctor:function(e,t,i){this._super("base/prefabs/baseGameAlert/BaseGameAlertSkin"),this._gameAlertInfo=i,this._callback=t,this._thisArg=e,this._gameAlertInfo&&(this._string=this._gameAlertInfo.string,this._type=this._gameAlertInfo.type,this._obj=this._gameAlertInfo.obj)},onShow:function(){b8e.evt.onC(this.skin.one_btn.node,this.onClickOneBtn,this),b8e.evt.onC(this.skin.two_btn_one.node,this.onClickTwoBtnOneBtn,this),b8e.evt.onC(this.skin.two_btn_two.node,this.onClickTwoBtnTwoBtn,this),b8e.evt.onC(this.skin.close.node,this.onClickCloseBtn,this),b8e.evt.onC(this.skin.tips_btn.node,this.onClickTipsBtn,this),b8e.evt.onC(this.skin.lab_desc.node,this.onClickDesc,this),b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this.onResize),this.onShowWnd(),this.onResize(),this._addModalBg(),this.registerEvent()},onHide:function(){this.skin.lab_confirm1.string="确认",this.skin.lab_cancel.string="取消",this.skin.lab_string.string="",this.skin.lab_confirm2.string="确认",null!=this._graphicsModalImg&&this._graphicsModalImg.clear(),this._modalBgNode&&this._modalBgNode.removeFromParent(),b8e.evt.offC(this.skin.one_btn.node,this.onClickOneBtn,this),b8e.evt.offC(this.skin.two_btn_one.node,this.onClickTwoBtnOneBtn,this),b8e.evt.offC(this.skin.two_btn_two.node,this.onClickTwoBtnTwoBtn,this),b8e.evt.offC(this.skin.close.node,this.onClickCloseBtn,this),b8e.evt.offC(this.skin.tips_btn.node,this.onClickTipsBtn,this),b8e.evt.offC(this.skin.lab_desc.node,this.onClickDesc,this),b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onResize),this._modalBgNode&&(this._modalBgNode.removeFromParent(),b8e.evt.offC(this._modalBgNode,this.onModalBgNode,this))},onResize:function(){this.setPosition(.5*(b8e.stageWidth-this.width),.5*(b8e.stageHeight-this.height))},onShowWnd:function(){if(this._gameAlertInfo){switch(this._gameAlertInfo.alertType){case game.BaseGameAlertType.OneBtn:this.skin.one_node.active=!0,this.skin.two_node.active=!1,this.skin.lab_confirm2.string=this._gameAlertInfo.confirmString;break;case game.BaseGameAlertType.TwoBtn:this.skin.one_node.active=!1,this.skin.two_node.active=!0,this.skin.lab_confirm1.string=this._gameAlertInfo.confirmString,this.skin.lab_cancel.string=this._gameAlertInfo.cancelString}this._gameAlertInfo.isShowTips?(this._tipsIsSelect=this._gameAlertInfo.isSelectTips,this.skin.img_tips_select.node.active=this._tipsIsSelect,this.skin.tips_node.node.active=!0):this.skin.tips_node.node.active=!1,this.skin.lab_string.string=this._string,""!=this._gameAlertInfo.desc?(this.skin.lab_desc.string=this._gameAlertInfo.desc,this.skin.lab_desc.node.y=this.skin.lab_string.node.y-this.skin.lab_string.node.height-8):this.skin.lab_desc.string=""}},onClickOneBtn:function(){this._gameAlertInfo.isShowTips&&this._tipsIsSelect&&game.baseGameAlert.setGameAlertInfoMap(this._gameAlertInfo),this.removeFromParent(),this._callback&&this._callback.call(this._thisArg,this._gameAlertInfo,game.BaseGameAlertBtnType.CONFIRM)},onClickTwoBtnOneBtn:function(){this._gameAlertInfo.isShowTips&&this._tipsIsSelect&&game.baseGameAlert.setGameAlertInfoMap(this._gameAlertInfo),this.removeFromParent(),this._callback&&this._callback.call(this._thisArg,this._gameAlertInfo,game.BaseGameAlertBtnType.CONFIRM)},onClickTwoBtnTwoBtn:function(){this.removeFromParent(),this._callback&&this._callback.call(this._thisArg,this._gameAlertInfo,game.BaseGameAlertBtnType.CANCEL)},onClickTipsBtn:function(){this._tipsIsSelect?(this._tipsIsSelect=!1,this.skin.img_tips_select.node.active=!1):(this._tipsIsSelect=!0,this.skin.img_tips_select.node.active=!0)},onClickCloseBtn:function(){this.removeFromParent(),this._callback&&this._callback.call(this._thisArg,this._gameAlertInfo,game.BaseGameAlertBtnType.CLOSE)}},"onResize",function(){this.skin&&(this.x=(b8e.stageWidth-this.skin.node.width)/2,this.y=(b8e.stageHeight-this.skin.node.height)/2)}),n(s,"onClickDesc",function(){this.removeFromParent(),this._gameAlertInfo&&this._gameAlertInfo.descFunc&&this._gameAlertInfo.descFunc.call(this._thisArg)}),n(s,"_addModalBg",function(){null==this._modalBgNode&&(this._modalBgNode=new cc.Node("modal-background")),this.addChild(this._modalBgNode),null==this._screenOriginPos&&(this._screenOriginPos=this.convertToNodeSpaceAR(cc.Vec2.ZERO)),this._modalBgNode.setAnchorPoint(0,0),this._modalBgNode.setPosition(this._screenOriginPos),this.setBgNodeSize(this._modalBgNode)}),n(s,"setBgNodeSize",function(e){e.setContentSize(b8e.stageWidth,b8e.stageHeight),this._graphicsModalImg||(this._graphicsModalImg=b8e.Graphics.get(),this._graphicsModalImg.addToParent(e)),this._graphicsModalImg.clear();var t=this.x,i=this.y;this._modalBgNode.x=-t,this._modalBgNode.y=-i,this._modalBgNode.width=b8e.stageWidth+t,this._modalBgNode.height=b8e.stageHeight+i;var n=this._graphicsModalImg.getGraphics();this._modalBgColor||(this._modalBgColor=new cc.Color(0,0,0,150)),n.fillColor=this._modalBgColor,n.rect(-t,-i,b8e.stageWidth+t,b8e.stageHeight+i),n.fill(),e.setLocalZOrder(-999999999)}),n(s,"registerEvent",function(){this._modalBgNode&&(this._modalBgNode.touchEffectDisabled=!1,b8e.evt.onC(this._modalBgNode,this.onModalBgNode,this))}),n(s,"onModalBgNode",function(){}),s)),cc._RF.pop()},{}],BaseLoginCmd:[function(e,t,i){"use strict";cc._RF.push(t,"b9581nLtz1AYrT/MicAyv1e","BaseLoginCmd"),game.BaseLoginCmd=b8e.Object.extends({start:function(){b8e.addNH(game.pbmid.Login.CreateRoleResponse,this._onReceiveCreateRoleResponse,this),b8e.addNH(game.pbmid.Login.RoleLoginResponse,this._onReceiveRoleLoginResponse,this),b8e.addNH(game.pbmid.Login.ServerDebugInfoNotify,this.onServerDebugInfoNotify,this)},_onReceiveCreateRoleResponse:function(e){var t=game.pbmsg,i=e.readProtobuf(t.CreateRoleResponse);if(0==i.code)game.RoleLoginSender.roleLogin(),game.AnalyticsSDK.onCreateFirstRoleInZone();else{game.CreateRole.creatRoleIsLock=!1;var n="";switch(i.code){case 101:n="未知错误";break;case 114:n="已暂停新账号注册";break;case 103:n="参数错误";break;case 201:n="已创建过一个角色，不能再重复创建";break;case 202:n="角色名称已被占用";break;case 203:n="角色名称中包含敏感词汇";break;case 204:n="角色名称中包含无效字符";break;case 205:n="名字只能是2-7个字";break;case 400:n="服务器错误"}b8e.Toast.launch(n)}},_onReceiveRoleLoginResponse:function(e){var t=game.pbmsg,i=e.readProtobuf(t.RoleLoginResponse);if(0!=i.code){var n="";switch(i.code){case 101:n="未知错误";break;case 113:n="账号被封禁";break;case 400:n="服务器错误"}var s=new game.BaseGameAlertInfo;return s.alertType=game.BaseGameAlertType.OneBtn,s.string=n,s.isShowTips=!1,void game.baseGameAlert.showAlert(this,this.onClickBtn,s)}game.LoginConfig.heroData=i.roleData,game.LoginConfig.hasHeroData||game.sdk.createRoleLog(),game.sdk.loginRoleLog(),game.baseProcess.main.completeHangUpProcess(game.BaseProcessTypes.CREATE_CHAR),game.AnalyticsSDK.onLoggedInToZone()},onClickBtn:function(e,t){if(e)switch(t){case game.BaseGameAlertBtnType.CONFIRM:case game.BaseGameAlertBtnType.CLOSE:game.sdk.logout()}},onServerDebugInfoNotify:function(e){}}),cc._RF.pop()},{}],BaseProcessRun:[function(e,t,i){"use strict";cc._RF.push(t,"ccf86pQ6BVNL4Vb2YA/hpcu","BaseProcessRun"),game.BaseProcessRun=b8e.Object.extends({main:null,_isPreloaded:!1,initProcess:function(){this.main=new b8e.ProcessStateMachine,this.main.pushProcess(new game.LoadBaseConfig),this.main.pushProcess(new game.Register),this.main.pushProcess(new game.ServerList),this.main.pushProcess(new game.ServerConnect),this.main.pushProcess(new game.CreateChar),this.main.pushProcess(new game.LoadModule)},runProcess:function(){this.main.free(),this.main.addPreProcess(game.BaseProcessTypes.REGISTER,0,1),this.main.addPreProcess(game.BaseProcessTypes.LOAD_BASE_CONFIG,0,.05),this.main.addPreProcess(game.BaseProcessTypes.SERVER_LIST,.05,.1),this.main.addPreProcess(game.BaseProcessTypes.SERVER_CONNECT,.1,.15),this.main.addPreProcess(game.BaseProcessTypes.CREATE_CHAR,.15,.2),this.main.addPreProcess(game.BaseProcessTypes.LOAD_MODULE,.2,.7),this.main.run()},runConnectProcess:function(){this.main.free(),this.main.addPreProcess(game.BaseProcessTypes.SERVER_CONNECT,.1,.15),this.main.addPreProcess(game.BaseProcessTypes.CREATE_CHAR,.15,.2),this.main.addPreProcess(game.BaseProcessTypes.LOAD_MODULE,.2,.7),this.main.run()},preload:function(){this._isPreloaded||(this._isPreloaded=!0)}}),cc._RF.pop()},{}],BaseProcessTypes:[function(e,t,i){"use strict";cc._RF.push(t,"d980dRQEDpP6KfBw+IPkKXl","BaseProcessTypes"),game.BaseProcessTypes=b8e.Enum({NONE:0,REGISTER:1,LOAD_BASE_CONFIG:2,SERVER_LIST:3,SERVER_CONNECT:4,CREATE_CHAR:5,LOAD_MODULE:6}),cc._RF.pop()},{}],BulletinFontsPanel:[function(e,t,i){"use strict";cc._RF.push(t,"7b163oFi/FCipyeEXBSKGTi","BulletinFontsPanel"),game.BulletinFontsPanel=b8e.SkinWidget.extends({ctor:function(e){this._super(e.skinName)},onShow:function(){game.ViewModuleMgr.inst().addModule(this),this.updataArticle(),game.IS_QZONE?this.skin.lab_qq.string="官方客服QQ：800185583    3507591922":this.skin.lab_qq.string="",b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this.onResize),this.onResize()},onHide:function(){b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onResize)},closeBtn:function(){game.ViewModuleMgr.inst().removeModule(this),this.removeFromParent()},closeReturnBtn:function(){game.ViewModuleMgr.inst().removeModule(this),this.removeFromParent()},getModelTouchClose:function(){return!1},onResize:function(){this.setPosition(.5*(b8e.stageWidth-this.width),.5*(b8e.stageHeight-this.height))},updataArticle:function(){var t=[],e=game.LoginConfig.announcementContents;if(e){e.forEach(function(e){t.push(e.content)},this);var i=t.join("<br/>- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -<br/>");this.skin.lab_content.string=i}}}),cc._RF.pop()},{}],ClientGlobalCfg:[function(e,t,i){"use strict";cc._RF.push(t,"06c0bI8tilPVIuVTTotqL4E","ClientGlobalCfg"),t.exports=b8e.Object.extends({name:"ClientGlobalCfg",data:null,setup:function(e){this.data=b8e.HashMap.get();for(var t,i=0;i<e.length;i++)t=e[i],this.data.set(t.name,t)},getValue:function(e){var t=this.data.get(e);return t?t.value:null}}),cc._RF.pop()},{}],CreateChar:[function(e,t,i){"use strict";cc._RF.push(t,"2529a2okAlBk7W1/sSmXAE1","CreateChar"),game.CreateChar=b8e.BaseProcess.extends({_createRole:null,skinUrl:null,ctor:function(){this._super()},getState:function(){return game.BaseProcessTypes.CREATE_CHAR},processHandler:function(e){game.ReconnectLoading&&game.ReconnectLoading.inst().setProgress(e),game.LoadingPage.inst().setProgress(e)},startProcess:function(){this._super(),b8e.log("process:"+game.BaseProcessTypes.CREATE_CHAR+"开始..."),game.LoginConfig.hasHeroData?(game.LoginConfig.isReconnect?game.ReconnectLoading&&(game.ReconnectLoading.inst().show(),game.ReconnectLoading.inst().setTipText("请稍候，正在进入游戏...")):(b8e.log("已经有英雄"),game.LoadingPage.inst().show(),game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在初始化英雄...")),game.RoleLoginSender.roleLogin(),game.baseProcess.preload()):(b8e.log("没有英雄，进入创建英雄界面"),game.LoadingPage.inst().show(),game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在加载创角界面..."),this.skinUrl="base/prefabs/roleLogin/CreateRoleSkin",b8e.res.loadRes(this.skinUrl,b8e.Prefab,this.onResComplete,this)),this.setProcessPercent(1,3e3)},onResComplete:function(e,t){this._createRole||(this._createRole=new game.CreateRole,b8e.layer.getGuiLayer().addChild(this._createRole),game.baseProcess.preload())},completeProcess:function(){this.skinUrl&&(b8e.res.unloadRes(this.skinUrl,this.onResComplete,this),this.skinUrl=null),this._createRole&&(this._createRole.removeFromParent(),this._createRole.release(),this._createRole=null),this._super()}}),cc._RF.pop()},{}],CreateRole:[function(e,t,i){"use strict";cc._RF.push(t,"43bfcLHPE9JZK3CWq3SrtNb","CreateRole"),game.CreateRole=b8e.SkinWidget.extends({_selectedRoleProtoId:0,_isLocked:!1,nanxingArr:null,nanmingArr:null,nvxingArr:null,nvmingArr:null,_timerObj:null,_time:15,_bgImg:null,_roleModelImg:null,_roleWingImg:null,ctor:function(){this._super("base/prefabs/roleLogin/CreateRoleSkin"),this.nanxingArr=[],this.nanmingArr=[],this.nvxingArr=[],this.nvmingArr=[]},selectedRoleProtoId:{get:function(){return this._selectedRoleProtoId},set:function(e){this._selectedRoleProtoId!=e&&(this._selectedRoleProtoId=e)},visible:!1},onShow:function(){if(this._bgImg||(this._bgImg=b8e.Sprite.get(),this._bgImg.addToParent(this.skin.bgImg),this._bgImg.setAnchor(.5,.5)),this._bgImg.loadTexture("images/image/loading/createRole.jpg",null,null,{useManifest:!1}),game.IS_HUO_SHU){var e=game.HuoShuSDK.getAppId();this.skin.btn_fanhui.node.active="2038"==e||"2066"==e}else this.skin.btn_fanhui.node.active=!1;this.skin.lab_time.node.active=!b8e.isWeChatGame,game.LoadingPage.inst().hide(),this.setNameArr(),this.selectedRoleProtoId=0<.5-Math.random()?1001:1002,this._onSelectedRoleProtoIdUpdate(),this.skin.roleNameInput.string=this._randomRoleName(),this.startTime(),b8e.evt.onC(this.skin.roleNameRandomBtn,this._onClickRoleNameRandomBtn,this),b8e.evt.onC(this.skin.startBtn.node,this._onClickStartBtn,this),b8e.evt.onC(this.skin.imgNan.node,this._onSelectNan,this),b8e.evt.onC(this.skin.imgNan_1.node,this._onSelectNan,this),b8e.evt.onC(this.skin.imgNv.node,this._onSelectNv,this),b8e.evt.onC(this.skin.imgNv_1.node,this._onSelectNv,this),b8e.evt.onC(this.skin.btn_fanhui.node,this.switchAccount,this),this.skin.roleNameInput.node.on("editing-did-began",this.stopTime,this),this.skin.roleNameInput.node.on("text-changed",this.stopTime,this),this.skin.roleNameInput.node.on("editing-did-ended",this.onEditingEnded,this),this.onResize(),b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this.onResize)},onHide:function(){b8e.evt.offC(this.skin.roleNameRandomBtn,this._onClickRoleNameRandomBtn,this),b8e.evt.offC(this.skin.startBtn.node,this._onClickStartBtn,this),b8e.evt.offC(this.skin.imgNan.node,this._onSelectNan,this),b8e.evt.offC(this.skin.imgNan_1.node,this._onSelectNan,this),b8e.evt.offC(this.skin.imgNv.node,this._onSelectNv,this),b8e.evt.offC(this.skin.imgNv_1.node,this._onSelectNv,this),b8e.evt.offC(this.skin.btn_fanhui.node,this.switchAccount,this),this.skin.roleNameInput.node.off("editing-did-began",this.stopTime,this),this.skin.roleNameInput.node.off("text-changed",this.stopTime,this),this.skin.roleNameInput.node.off("editing-did-ended",this.onEditingEnded,this),b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onResize)},onResize:function(){this.setPosition(.5*(b8e.stageWidth-this.width),.5*(b8e.stageHeight-this.height)),this.skin.bottom.y=.5*(1136-b8e.stageHeight),this.skin.titleNode.node.y=.5*(b8e.stageHeight+1e3)},switchAccount:function(){if(game.IS_HUO_SHU){var e=game.HuoShuSDK.getAppId();if("2038"==e||"2066"==e){var t=new game.BaseGameAlertInfo;t.alertType=game.BaseGameAlertType.TwoBtn,t.string="是否返回至游戏大厅",t.isShowTips=!1,game.baseGameAlert.showAlert(this,this.onSwitchAccount,t)}}},onSwitchAccount:function(e,t){switch(t){case game.BaseGameAlertBtnType.CONFIRM:game.IS_HUO_SHU&&game.HuoShuSDK.switchAccount()}},setNameArr:function(){var e=game.ccfg.GlobalCfg.getValue("nanxing"),t=game.ccfg.GlobalCfg.getValue("nanming"),i=game.ccfg.GlobalCfg.getValue("nvxing"),n=game.ccfg.GlobalCfg.getValue("nvming");e&&t&&i&&n&&(this.nanxingArr=e.split(","),this.nanmingArr=t.split(","),this.nvxingArr=i.split(","),this.nvmingArr=n.split(","))},_onSelectNan:function(){this.resetTime(),1001!=this.selectedRoleProtoId&&(this.selectedRoleProtoId=1001,this._onSelectedRoleProtoIdUpdate()),this.skin.roleNameInput.string=this._randomRoleName()},_onSelectNv:function(){this.resetTime(),1002!=this.selectedRoleProtoId&&(this.selectedRoleProtoId=1002,this._onSelectedRoleProtoIdUpdate()),this.skin.roleNameInput.string=this._randomRoleName()},_onSelectedRoleProtoIdUpdate:function(){this.skin&&(this._roleModelImg||(this._roleModelImg=b8e.Sprite.get(),this._roleModelImg.setAnchor(.5,.5),this._roleModelImg.addToParent(this.skin.node_model)),1001==this.selectedRoleProtoId?(this.skin.node_model.setPosition(230,636),this._roleModelImg.loadTexture("images/image/loading/man.png",null,null,{useManifest:!1}),this.skin.imgNan.node.active=!0,this.skin.imgNan_1.node.active=!1,this.skin.imgNv.node.active=!1,this.skin.imgNv_1.node.active=!0):(this.skin.node_model.setPosition(230,619),this._roleModelImg.loadTexture("images/image/loading/woman.png",null,null,{useManifest:!1}),this.skin.imgNan.node.active=!1,this.skin.imgNan_1.node.active=!0,this.skin.imgNv.node.active=!0,this.skin.imgNv_1.node.active=!1),this._roleWingImg||(this._roleWingImg=b8e.Sprite.get(),this._roleWingImg.setAnchor(.5,.5),this._roleWingImg.addToParent(this.skin.node_wing),this._roleWingImg.loadTexture("images/image/loading/wing.png",null,null,{useManifest:!1})))},_onClickRoleNameRandomBtn:function(){this.skin&&(this.resetTime(),this.skin.roleNameInput.string=this._randomRoleName())},_onClickStartBtn:function(){if(this.skin&&(this._isLocked=game.CreateRole.creatRoleIsLock,!this._isLocked)){var e=this.skin.roleNameInput.string.trim();if(0!=e.length)if(b8e.SensitiveWords.match(e))b8e.Toast.launch("含有敏感词！");else{game.CreateRole.creatRoleIsLock=!0;var t=this.selectedRoleProtoId;game.RoleLoginSender.CreateRoleRequest(e,t),this.clearTime()}else b8e.Toast.launch("请输入名字！")}},_randomRoleName:function(){var e="",t="";return 1001==this.selectedRoleProtoId?this.nanxingArr&&this.nanmingArr&&0<this.nanxingArr.length&&0<this.nanmingArr.length?(e=this.nanxingArr[this.nanxingArr.length*Math.random()>>0],t=this.nanmingArr[this.nanmingArr.length*Math.random()>>0]):(e="郝",t="先生"):this.nanxingArr&&this.nanmingArr&&0<this.nanxingArr.length&&0<this.nanmingArr.length?(e=this.nvxingArr[this.nvxingArr.length*Math.random()>>0],t=this.nvmingArr[this.nvmingArr.length*Math.random()>>0]):(e="郝",t="女士"),e+t},onEditingEnded:function(){0!=this.skin.roleNameInput.string.trim().length&&this.resetTime()},startTime:function(){b8e.isWeChatGame||(this._timerObj||(this._timerObj=b8e.Timer.add(this,this.updateTime,1e3)),this._timerObj.start())},updateTime:function(){b8e.isWeChatGame||(0<this._time?(this.skin.lab_time.node.active=!0,this.skin.lab_time.string=this._time+"秒后自动进入游戏..."):(this.skin.lab_time.node.active=!1,this.skin.lab_time.string="",this._onClickStartBtn()),this._time--)},clearTime:function(){b8e.isWeChatGame||this._timerObj&&(b8e.Timer.remove(this,this.updateTime),this._timerObj=null)},stopTime:function(){b8e.isWeChatGame||(this._timerObj&&this._timerObj.stop(),this.skin.lab_time.node.active=!1,this.skin.lab_time.string="")},resetTime:function(){b8e.isWeChatGame||(this._time=15,this.skin.lab_time.string=this._time+"秒后自动进入游戏...",this._timerObj&&(this._timerObj.reset(),this._timerObj.start()))},dispose:function(){this.clearTime(),this.nanxingArr&&(this.nanxingArr.length=0,this.nanxingArr=null),this.nanmingArr&&(this.nanmingArr.length=0,this.nanmingArr=null),this.nvxingArr&&(this.nvxingArr.length=0,this.nvxingArr=null),this.nvmingArr&&(this.nvmingArr.length=0,this.nvmingArr=null),this._timerObj&&(b8e.Timer.remove(this,this.updateTime),this._timerObj=null),this._bgImg&&(this._bgImg=null),this._roleModelImg&&(this._roleModelImg=null),this._roleWingImg&&(this._roleWingImg=null),this._super()}}),game.CreateRole.creatRoleIsLock=!1,cc._RF.pop()},{}],G4399SDK:[function(e,t,i){"use strict";cc._RF.push(t,"dab647QG8ZC+4VEbARpHO7R","G4399SDK");var s=game.G4399SDK=function(){};s.init=function(){},s.loadScript=function(e){b8e.res.loadScript(e,function(e,t){b8e.info("SDK加载完成："+e),s.sdkInit()},this,!0)},s.sdkInit=function(){},s.login=function(i,n){var e={pfid:game.LoginConfig.pfid,detail:{gameId:s.getGameId(),userId:s.getUserId(),userName:s.getUserName(),time:s.getSeverTime(),sign:s.getSign()}};game.sdk.sdkNet.requestData(game.LoginConfig.loginUrl,e,function(e,t){e?(b8e.error(e),b8e.Toast.launch("登录IO错误",4294901760,0)):(0==t.code?(game.LoginConfig.uid=t.data.uid,game.LoginConfig.channelId=t.data.channel_id,game.LoginConfig.channelName=t.data.channel_name):b8e.error("SDK login Error:"+t.code+":"+t.msg),i.call(n,t.code))},this,null,!0,{isJson:!0})},s.pay=function(e){parent.postMessage({eventType:"openPay",data:{money:e.payment_amount,mark:e.game_payorder,server:e.game_server,extra:""}},"*")},s.logout=function(){parent.postMessage({eventType:"logout"},"*")},s.shareGame=function(){parent.postMessage({eventType:"shareGame"},"*")},s.getGameId=function(){return b8e.getQueryString("gameId")},s.getUserId=function(){return b8e.getQueryString("userId")},s.getUserName=function(){return encodeURIComponent(b8e.getQueryString("userName"))},s.getSeverTime=function(){return parseInt(b8e.getQueryString("time"))},s.getSign=function(){return b8e.getQueryString("sign")},s.getShare=function(){return b8e.getQueryString("shareId")},cc._RF.pop()},{}],GameMain:[function(e,t,i){"use strict";cc._RF.push(t,"36ec16Q/NtIh7PwzOCNz4mB","GameMain"),e("../black8_game_engine"),b8e.macro.IS_IOS_TISHEN=!0,b8e.macro.IS_IOS_TISHEN&&(b8e.XMLHttpRequest=e("./SXMLHttpRequest")),e("./com/black8/game/gameIndex"),b8e.macro.IS_COCOS_CREATOR=!0,b8e.macro.DIRECTION_COUNT=3,b8e.ResMgr.DEFAULT_FORMAT="img",b8e.SoundMgr.AUTOPLAY=!0,game.OPEN_LOG_REPORT=!0,game.VERSION="2.0.9",game.ENGINE_VERSION="3.0.2",game.BUILD_LOG=!0,game.CONFIG_DEBUG=!1,game.VERSION_NAME="beta",game.IS_BAN_SHU=!1,game.IS_HUO_SHU=!1,game.IS_I_BEAR_GAME=!1,game.IS_4399=!1,game.IS_QZONE=!1,game.IS_SINA=!1,game.IS_SHIELD_IOS_RECHARGE=!1,game.BUILD_LOG&&cc.log("感谢上帝，编译完了"),game.designSize={width:640,height:1136,minHeight:970},cc.Class({extends:cc.Component,_startup:null,_processRun:null,properties:{isDebugStartup:{default:!1,displayName:"是否调试启动"},defaultVersionName:{default:"beta",displayName:"默认版本名称"}},onLoad:function(){b8e.log("onLoad：1"),this._startup||(b8e.log("onLoad：2"),game.isDebugStartup=this.isDebugStartup,this._startup=new b8e.StartupForCC(this),this._startup.engineVersion=game.ENGINE_VERSION,this._startup.init(game.designSize,this.onInited,this))},onInited:function(e){if(e)b8e.error("初始化引擎失败！");else{switch(game.VERSION_NAME||(game.VERSION_NAME=this.defaultVersionName),b8e.macro.IS_IOS_TISHEN&&b8e.res.setRemoteRootDir("http://72-usa6.fire233.com"),b8e.XMLHttpRequest&&(b8e.XMLHttpRequest.localFilter=["bcd","bgp","resources/base/atlas","res/images/image/loading"]),game.VERSION_NAME){case"beta":case"test":game.LoginConfig.apiListUrl="op.black8.com.cn/misc/apilist";break;case"ios_client":game.IS_SHIELD_IOS_RECHARGE=!0,game.LoginConfig.apiListUrl="main-72-usa2.fire233.com/misc/apilist";break;case"72_client":game.LoginConfig.apiListUrl="main-72-hf.fire233.com/misc/apilist";break;case"72wb_client":game.LoginConfig.apiListUrl="main-72-wb.fire233.com/misc/apilist";break;case"72_client_test":game.LoginConfig.apiListUrl="main-72-hf-test.fire233.com/misc/apilist";break;case"72usa_client":game.LoginConfig.apiListUrl="main-72-usa.fire233.com/misc/apilist";break;case"72usa6_recharge_client":game.IS_SHIELD_IOS_RECHARGE=!1,game.LoginConfig.apiListUrl="main-72-usa2.fire233.com/misc/apilist"}game.IS_BAN_SHU=null!=game.platformName?"banshu"==game.platformName:game.IS_BAN_SHU,game.IS_HUO_SHU=null!=game.platformName?"huoshu"==game.platformName:game.IS_HUO_SHU,game.IS_I_BEAR_GAME=null!=game.platformName?"ibeargame"==game.platformName:game.IS_I_BEAR_GAME,game.IS_4399=null!=game.platformName?"4399"==game.platformName:game.IS_4399,game.IS_QZONE=null!=game.platformName?"qzone"==game.platformName:game.IS_QZONE,game.IS_SINA=null!=game.platformName?"sina"==game.platformName:game.IS_SINA,b8e.Texture2D.setResDesignatedFormat("app/images/atlas/common/common","png"),b8e.Texture2D.setResDesignatedFormat("app/images/atlas/uimain/uimain","png"),b8e.Texture2D.setResDesignatedFormat("app/images/atlas/arena/arena","png"),b8e.Texture2D.setResDesignatedFormat("app/images/atlas/bianshen/bianshen","png"),b8e.Texture2D.setResDesignatedFormat("app/images/atlas/equip/equip","png"),b8e.Texture2D.setResDesignatedFormat("app/images/atlas/vip/vip","png"),b8e.Texture2D.setResDesignatedFormat("app/images/atlas/cardRecharge/cardRecharge","png"),b8e.Texture2D.setResDesignatedFormat("app/images/image/grids/grids_1","png"),b8e.Texture2D.setResDesignatedFormat("app/images/atlas/strengthen/strengthen","png"),b8e.Texture2D.setResDesignatedFormat("app/images/atlas/tiangong/tiangong","png"),b8e.Texture2D.setResDesignatedFormat("images/image/nicknameimag","png"),b8e.Texture2D.setResDesignatedFormat("textures/yinying","png"),b8e.Texture2D.setDesignatedFormat("animations",b8e.PixelFormat.RGBA4444),b8e.isWeChatGame?b8e.macro.IS_DEBUG=!0:b8e.macro.IS_DEBUG?this.showProfiler():(b8e.startup.addDummyHot("2589AB"),b8e.evt.addG(this,"clickDummyHot",this.showProfiler)),b8e.log("onSdkInited：1"),game.SDKMgr?(game.sdk=game.SDKMgr.inst(),game.sdk.init(this.onSdkInited,this)):b8e.error("没有找到SDK模块")}},onStarted:function(e){b8e.log("onInited：1"),e?b8e.error("引擎开始失败！"):(game.baseGameAlert=game.BaseGameAlertMgr.inst(),b8e.log("onInited：2"),game.LoadingPage.inst().hide(),game.OPEN_LOG_REPORT&&b8e.LogReport.init(game.LoginConfig.logReportUrl,this.reportDataGetter),b8e.evt.setTouchEventCallback(this.onTouchCallback,this),this._processRun=new game.BaseProcessRun,game.baseProcess=this._processRun,this._processRun.initProcess(),this._processRun.runProcess())},showProfiler:function(){b8e.macro.IS_DEBUG=!0,b8e.res.loadScript("module/profiler.bgp",this.initProfiler,this)},onSdkInited:function(){if(b8e.log("初始化onSdkInited成功"),game.IS_HUO_SHU)if(game.HuoShuSDK){var e=game.HuoShuSDK.getAppId();"2038"==e||"2066"==e?(b8e.settings.orientation=b8e.OrientationType.PORTRAIT_UPSIDE_UP,b8e.macro.EDTEXT_ALAWYS_ON_TOP=!1,b8e.log("闲徕渠道锁死竖屏："+b8e.settings.orientation)):"2107"==e&&(b8e.settings.orientation=b8e.OrientationType.PORTRAIT_UPSIDE_UP)}else b8e.error("火树平台 SDK初始化失败");this._startup.start(this.onStarted,this),b8e.log("onSdkInited：2")},initProfiler:function(e){b8e.EngineProfiler.init(),b8e.profiler.addWatch("heroCount","Hero Count",this.heroCountInfo),b8e.profiler.addWatch("heroDataCount","Hero Data Count",this.heroDataCountInfo),b8e.profiler.addWatch("monsterCount","Monster Count",this.monsterCountInfo),b8e.profiler.addWatch("monsterDataCount","Monster Data Count",this.monsterDataCountInfo),b8e.profiler.addWatch("buffSetCount","Buff Set Count",this.buffSetCountInfo),b8e.profiler.addWatch("buffItemCount","Buff Item Count",this.buffItemCountInfo),b8e.profiler.addWatch("otherCount","Other Count",this.otherCountInfo),b8e.profiler.addTestItem("触发",function(e){game.TriggerMgr.inst().triggerById(parseInt(e),0,!0)},this),b8e.profiler.addTestItem("同屏",function(e){game.sceneRole.createRobot(parseInt(e))},this),b8e.profiler.show()},buffItemCountInfo:function(){return game.BuffItem?game.BuffItem.count+"/"+game.BuffItem.pool.count:0},buffSetCountInfo:function(){return game.BuffSet?game.BuffSet.count+"/"+game.BuffSet.pool.count:0},heroDataCountInfo:function(){return game.HeroData?game.HeroData.count+"/"+game.HeroData.pool.count:0},monsterDataCountInfo:function(){return game.MonsterData?game.MonsterData.count+"/"+game.MonsterData.pool.count:0},heroCountInfo:function(){return b8e.scene&&game.SceneMgr?game.SceneMgr.inst().heroCountInfo():0},monsterCountInfo:function(){return b8e.scene&&game.SceneMgr?game.SceneMgr.inst().monsterCountInfo():0},otherCountInfo:function(){return b8e.scene&&game.SceneMgr?game.SceneMgr.inst().otherCountInfo():0},reportDataGetter:function(e){var t={};if(t.log_type=e.logType,t.used_memory=e.usedMemory,t.total_memory=e.totalMemory,t.stage_width=e.stageWidth+"",t.stage_height=e.stageHeight+"",t.run_time=e.runTime,t.fps=e.fps+"",t.kernel_name=e.kernelName,t.kernel_version=e.kernelVersion,t.kernel_platform=e.kernelPlatform,t.href=e.href,t.error_msg=e.logMsg,t.uid=parseInt(game.LoginConfig.uid),t.open_id=game.LoginConfig.openId+"",t.pf_id=parseInt(game.LoginConfig.pfid),t.server_id=parseInt(game.LoginConfig.serverId),t.role_id=0,t.role_name="",game.MainRoleMgr&&game.mainRole){var i=game.mainRole.mainRoleData;i&&(t.role_id=i.id,t.role_name=i.name)}return t},onTouchCallback:function(e,t,i){if("touchend"==i){if(0==t.touchEffectDisabled)return;(game.GameWidget&&e instanceof game.GameWidget||game.SkinUI&&e instanceof game.SkinUI)&&(t.effectName,t instanceof cc.Node||b8e.BaseDisplay,t.soundName&&(t instanceof cc.Node||b8e.BaseDisplay))}}}),cc._RF.pop()},{"../black8_game_engine":"black8_game_engine","./SXMLHttpRequest":"SXMLHttpRequest","./com/black8/game/gameIndex":"gameIndex"}],HeartBeatMgr:[function(e,t,i){"use strict";cc._RF.push(t,"f2ea6+DsRFHrZRLTm9lKdCp","HeartBeatMgr"),game.HeartBeatMgr=b8e.Object.extends({name:"HeartBeatMgr",_heartBeatTimer:null,_isStopHeartBeat:!1,_checkStopHeartBeatTimer:null,ctor:function(){if(1==game.HeartBeatMgr._singleton)throw new Error("HeartBeatMgr 只能通过单例方法获取");this._super()},startHeartBeat:function(){this._isStopHeartBeat=!1,b8e.log("startHeartBeat--开启心跳"),this._heartBeatTimer||(this._heartBeatTimer=b8e.Timer.add(this,this.onSendHeartBeat,5e3,0,0,null,2)),this._heartBeatTimer.reset(),this._heartBeatTimer.start()},onSendHeartBeat:function(){game.HeartSender.onSendHeart(),this._checkStopHeartBeatTimer||(this._checkStopHeartBeatTimer=b8e.Timer.add(this,this.onCheckHeartBeatState,5e3,0,0,null,2)),this._checkStopHeartBeatTimer.reset(),this._checkStopHeartBeatTimer.start()},onHeartBeatResponse:function(){this._isStopHeartBeat=!1,this._checkStopHeartBeatTimer&&this._checkStopHeartBeatTimer.stop()},onCheckHeartBeatState:function(){this._isStopHeartBeat?this.stopHeartBeat():this._isStopHeartBeat=!0},stopHeartBeat:function(){b8e.log("stopHeartBeat--心跳停止"),this._isStopHeartBeat=!1,this._heartBeatTimer&&(b8e.Timer.remove(this,this.onSendHeartBeat),this._heartBeatTimer=null),this._checkStopHeartBeatTimer&&this._checkStopHeartBeatTimer.running&&(b8e.Timer.remove(this,this.onCheckHeartBeatState),this._checkStopHeartBeatTimer=null),b8e.net.closeConnection()}}),game.HeartBeatMgr._instance=null,game.HeartBeatMgr._singleton=!0,game.HeartBeatMgr.inst=function(){return game.HeartBeatMgr._instance||(game.HeartBeatMgr._singleton=!1,game.HeartBeatMgr._instance=new game.HeartBeatMgr,game.HeartBeatMgr._singleton=!0),game.HeartBeatMgr._instance},cc._RF.pop()},{}],HeartSender:[function(e,t,i){"use strict";cc._RF.push(t,"3e874MNuhFINIKZlW9WMVf9","HeartSender"),(game.HeartSender=function(){}).onSendHeart=function(){b8e.sendN(1)},cc._RF.pop()},{}],HuoShuSDK:[function(e,t,i){"use strict";cc._RF.push(t,"cb987aYOUxF4puIOJqUkK5U","HuoShuSDK");var a=game.HuoShuSDK=function(){};a.xdSdk=null,a.wxSceneData=null,a.nickName=null,a.isGuest=null,a.loginPlatform=null,a.has_micro_client=null,a._onSdkInited=null,a.is_share=null,a.is_apple_pay=null,a.is_focus=null,a.is_desktop=null,a.is_switch_account=null,a.is_qqvip=null,a.qqvip=null,a.is_activity=null,a.is_activeApp=!0,a.exchange_type=null,a.is_coupon_remark=!1,a.init=function(e,t){a._onSdkInited={callback:e,thisArg:t},b8e.isWeChatGame?(a.xdSdk=lib.extend||("undefined"!=typeof xd?xd:null),a.xdSdk?(b8e.params.scene&&"undefined"!==b8e.params.scene&&(a.wxSceneData=JSON.parse(b8e.params.scene)),a.xdSdk.xdInit(),game.LoginConfig.canShare=!0,a._onSdkInited.callback.call(a._onSdkInited.thisArg)):b8e.error("炫动SDK未找到！"),a.onRegisterWXEvent()):a.loadScript(b8e.getProtocol()+"//d.fire2333.com/h5sdkload")},a.onRegisterWXEvent=function(){wx.onShow(function(e){b8e.log("小游戏回到前台："+e),e&&(game.LoginConfig.wxScene=e.scene,b8e.log("小游戏回到前台scene："+game.LoginConfig.wxScene),b8e.evt.dptG(game.ShareEvent.UPDATE_WX_ADD_SHORTCUT_BTN_STATE))})},a.loadScript=function(e){game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在加载fire..."),b8e.res.loadScript(e,function(e,t){b8e.info("SDK加载完成："+e),a.sdkInit()},a,!0)},a.sdkInit=function(){if(game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在初始化fire..."),"undefined"!=typeof xdGame){try{a.xdSdk=new xdGame({game_id:a.getGameId(),app_id:a.getAppId(),game_key:a.getGameKey(),open_id:a.getOpenId()}),a._onSdkInited.callback.call(a._onSdkInited.thisArg)}catch(e){game.LoadingPage.inst().setTipText("初始化fire失败..."),b8e.error("初始化fire Error:"+e.message)}a.isActiveApp()}else game.LoadingPage.inst().setTipText("加载fire失败..."),b8e.error("HuoShu SDK Load Error!")},a.isActiveApp=function(){var e=a.getAppId();b8e.log("闲徕appId："+e),"2038"!=e&&"2066"!=e||(document.addEventListener("XLH5SDKbackground",function(e){b8e.log("闲徕APP进入后台：HuoShuSDK.is_activeApp_"+a.is_activeApp),a.is_activeApp&&(a.is_activeApp=!1,b8e.startup.deactivate(),b8e.log("闲徕APP进入后台"))},!1),document.addEventListener("XLH5SDKforeground",function(e){b8e.log("闲徕APP进入前台：HuoShuSDK.is_activeApp_"+a.is_activeApp),a.is_activeApp||(a.is_activeApp=!0,b8e.startup.activate(),b8e.log("闲徕APP进入前台"))},!1),document.addEventListener("XLH5SDKdiamondchanged",function(e){e&&e.data&&(null!=e.data.balance&&(game.LoginConfig.coinRemain=e.data.balance),b8e.evt.dptG(game.PayEvents.PAY_EVENT_XIAN_LAI_UPDATE_COIN_REMAIN),b8e.log("闲徕钻石数量变化XLH5SDKdiamondchanged："+e.data.balance))},!1))},a.getTicketUserInfo=function(n){game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在认证用户fire...");var e={game_id:a.getGameId(),app_id:a.getAppId(),game_key:a.getGameKey(),timestamp:a.getTimestamp(),nonce:a.getNonce(),ticket:a.getTicket(),signature:a.getLoginSignature(),login_type:a.getLoginType()};game.sdk.sdkNet.requestData(b8e.getProtocol()+"//game.fire2333.com/user/getticketuserinfo",e,function(e,t){if(e)b8e.error(e);else if(0==t.code){b8e.log(t.message);var i=t.data;game.LoginConfig.openId=i.open_id,a.nickName=i.nickname,a.isGuest=i.is_guest,a.loginPlatform=i.login_platform,n.call()}else b8e.error("SDK getticketuserinfo Error:"+t.code+":"+t.message)},a,null,!0)},a.requestLogSignature=function(n,s){var r=game.SysTime.unixTime,e={game_key:a.getGameKey(),open_id:game.LoginConfig.openId,timestamp:r};game.sdk.sdkNet.requestData(game.LoginConfig.signlogUrl,e,function(e,t){if(e)b8e.error(e);else if(0==t.code){var i=t.data;n.call(s,i.signature,r)}else b8e.error("请求签名Error:"+t.code+":"+t.msg)},a,null,!0,{isJson:!0})},a.requestRechargeSignature=function(n,s,e,t,i){var r=game.SysTime.unixTime,o={game_id:a.getGameId()+"",game_key:a.getGameKey()+"",open_id:game.LoginConfig.openId+"",payment_amount:e+"",game_payorder:t+"",timestamp:r+"",role_id:i+""};game.sdk.sdkNet.requestData(game.LoginConfig.signrechargeUrl,o,function(e,t){if(e)b8e.error(e),b8e.Toast.launch("请求签名 IO错误",4294901760);else if(0==t.code){var i=t.data;n.call(s,i.signature,r)}else b8e.Toast.launch("请求签名Error:"+t.code+":"+t.msg,4294901760),b8e.error("请求签名Error:"+t.code+":"+t.msg)},a,null,!0,{isJson:!0})},a.login=function(i,n){if(b8e.isWeChatGame){if(a.xdSdk){var e=a.getGameId();a.xdSdk.xdLoginWithNoAuth(e,function(e){b8e.info("SDK登录完成："+e.openid),game.LoginConfig.openId=e.openid,game.LoginConfig.sessionKey=e.session_key,game.LoginConfig.wxOpenId=e.wx_openid,game.LoginConfig.shareTitle=e.share_title,game.LoginConfig.shareImage=e.share_image,b8e.isWeChatGame&&(b8e.log("HuoShuSDK.xdonShare sending"),game.HuoShuSDK.xdSdk.xdonShare(game.LoginConfig.shareTitle,game.LoginConfig.shareImage,function(e){b8e.log("huoshu SDK xdonShare Received"),0==e.code?(b8e.log("huoshu SDK xdonShare success__isSentReady："+game.LoginConfig.isSentReady),b8e.scene&&game.LoginConfig.isSentReady&&(b8e.log("Huoshu SDK xdonShare --- game.ShareMgr.inst().shareSuccess"),game.ShareMgr.inst().shareSuccess())):b8e.error("SDK xdonShare Error:"+e.code+":"+e.message)}));var t={pfid:game.LoginConfig.pfid,detail:{app_id:a.getAppId(),open_id:game.LoginConfig.openId,login_platform:a.loginPlatform,nickname:a.nickName}};game.sdk.sdkNet.requestData(game.LoginConfig.loginUrl,t,function(e,t){e?b8e.error(e):(0==t.code?(game.LoginConfig.uid=t.data.uid,game.LoginConfig.channelId=t.data.channel_id,game.LoginConfig.channelName=t.data.channel_name):b8e.error("SDK login Error:"+t.code+":"+t.msg),i.call(n,t.code))},a,null,!0,{isJson:!0})})}}else a.getTicketUserInfo(function(){a.getGameSetting(function(){var e={pfid:game.LoginConfig.pfid,detail:{app_id:a.getAppId(),open_id:game.LoginConfig.openId,login_platform:a.loginPlatform,nickname:a.nickName}};game.sdk.sdkNet.requestData(game.LoginConfig.loginUrl,e,function(e,t){e?b8e.error(e):(0==t.code?(game.LoginConfig.uid=t.data.uid,game.LoginConfig.channelId=t.data.channel_id,game.LoginConfig.channelName=t.data.channel_name):b8e.error("SDK login Error:"+t.code+":"+t.msg),i.call(n,t.code))},a,null,!0,{isJson:!0})})})},a.pay=function(n){a.requestRechargeSignature(function(e,t){var i={game_id:a.getGameId(),game_key:a.getGameKey(),open_id:game.LoginConfig.openId,payment_amount:n.payment_amount,game_payorder:n.game_payorder,object_name:n.object_name,desc:n.desc,timestamp:t,nonce:a.getNonce(),game_area:n.game_area,game_server:n.game_server,role_id:n.role_id,role_level:n.role_level,callback_url:game.LoginConfig.rechargeCallbackUrl,signature:e,vip_level:n.vip_level,nickname:n.roleName};b8e.isWeChatGame?a.xdSdk.xdPay(i):a.xdSdk.pay(i,function(e){0==e.code?b8e.log(e.message):(b8e.Toast.launch("充值Error:"+e.code+":"+e.message,4294901760),b8e.error("SDK pay Error:"+e.code+":"+e.message))})},a,n.payment_amount,n.game_payorder,n.role_id)},a.getGameSetting=function(i){b8e.log("正在设置fire..."),game.LoadingPage.inst().setTipText("请稍候，正在进入游戏...");var e={game_id:a.getGameId(),game_key:a.getGameKey(),app_id:a.getAppId(),open_id:game.LoginConfig.openId};a.xdSdk.getGameSetting(e,function(e){if(0==e.code){b8e.log(e.message);var t=e.data;a.has_micro_client=t.has_micro_client,1==a.has_micro_client?(game.LoginConfig.canDownloadMicro=!0,game.LoginConfig.isMicroLogin=!1):2==a.has_micro_client?(game.LoginConfig.canDownloadMicro=!0,game.LoginConfig.isMicroLogin=!0):(game.LoginConfig.canDownloadMicro=!1,game.LoginConfig.isMicroLogin=!1),a.is_share=t.is_share,1==a.is_share?game.LoginConfig.canShare=!0:game.LoginConfig.canShare=!1,a.is_apple_pay=t.is_apple_pay,1==a.is_apple_pay?game.LoginConfig.openApplePay=!0:game.LoginConfig.openApplePay=!1,a.is_focus=t.is_focus,1==a.is_focus?(game.LoginConfig.canFocus=!0,game.LoginConfig.isFocus=!1):2==a.is_focus?(game.LoginConfig.canFocus=!0,game.LoginConfig.isFocus=!0):(game.LoginConfig.canFocus=!1,game.LoginConfig.isFocus=!1),a.is_desktop=t.is_desktop,1==a.is_desktop?game.LoginConfig.canAddShortcut=!0:game.LoginConfig.canAddShortcut=!1,a.is_switch_account=t.is_switch_account,1==a.is_switch_account?game.LoginConfig.isSwitch=!0:game.LoginConfig.isSwitch=!1,1==t.is_realverify?(game.LoginConfig.hasRealVerify=!0,game.LoginConfig.realVerifyComplete=!1):2==t.is_realverify?(game.LoginConfig.hasRealVerify=!0,game.LoginConfig.realVerifyComplete=!0):(game.LoginConfig.hasRealVerify=!1,game.LoginConfig.realVerifyComplete=!1),b8e.log("SDK 实名认证(data.is_realverify)："+t.is_realverify),a.is_qqvip=t.is_qqvip,game.LoginConfig.qqvip=t.qqvip,0==a.is_qqvip?game.LoginConfig.isQQvip=!1:game.LoginConfig.isQQvip=!0,a.is_activity=t.is_activity,game.LoginConfig.activityUrl=t.activity_url,0==a.is_activity?game.LoginConfig.isActivity=!1:game.LoginConfig.isActivity=!0,b8e.log("SDK 京东data.is_activity："+t.is_activity+"__活动链接Url："+t.activity_url),a.exchange_type=t.exchange_type,0==a.exchange_type?game.LoginConfig.isExchangeType=!1:1==a.exchange_type&&(game.LoginConfig.isExchangeType=!0),game.LoginConfig.exchange_num=t.exchange_num,game.LoginConfig.exchange_name=t.exchange_name,a.is_coupon_remark=t.is_coupon_remark,0==a.is_coupon_remark?game.LoginConfig.isCouponRemark=!1:1==a.is_coupon_remark&&(game.LoginConfig.isCouponRemark=!0),i.call()}else b8e.error("SDK getGameSetting Error:"+e.code+":"+e.message)})},a.downloadMicroClient=function(){var e={game_id:a.getGameId(),game_key:a.getGameKey(),app_id:a.getAppId()};a.xdSdk.downloadMicroClient(e,function(e){if(0==e.code){b8e.log("downloadMicroClient",e.message);var t=new game.GameAlertInfo;t.alertType=game.GameAlertType.OneBtn,t.string="请进入微端领取奖励！",t.isShowTips=!1,game.gameAlert.showAlert(a,null,t)}else b8e.error("SDK downloadMicroClient Error:"+e.code+":"+e.message)})},a.share=function(e){if(game.ccfg.GlobalParamCfg){var t=function(e){b8e.info("huoshu SDK share Received:"),0==e.code?(b8e.info("huoshu SDK share success"),game.ShareMgr.inst().shareSuccess()):b8e.error("SDK share Error:"+e.code+":"+e.message)},i={game_id:a.getGameId(),game_key:a.getGameKey(),app_id:a.getAppId(),title:game.ShareMgr.inst().getShareTitle(),pt:a.getPt(),url:"",message:game.ShareMgr.inst().getShareMessage(),imgurl:""};b8e.info("huoshu SDK share sending"),b8e.isWeChatGame?a.xdSdk.xdShare(game.LoginConfig.shareTitle,game.LoginConfig.shareImage,t):a.xdSdk.share(i,t)}else b8e.error("过早执行HuoShuSDK.share！")},a.addShortcut=function(){a.xdSdk.saveToDesktop(function(e){0==e.code?(b8e.info("huoshu SDK addShortcutSuccess success"),game.ShortcutMgr.inst().addShortcutSuccess()):b8e.error("SDK addShortcut Error:"+e.code+":"+e.message)})},a.switchAccount=function(){a.xdSdk.switchAccount(function(e){0==e.code?b8e.info("huoshu SDK addShortcutSuccess success"):b8e.error("SDK addShortcut Error:"+e.code+":"+e.message)})},a.serverChooseLog=function(){a.requestLogSignature(function(e,t){var i={game_id:a.getGameId(),game_key:a.getGameKey(),app_id:a.getAppId(),open_id:game.LoginConfig.openId,timestamp:t,signature:e};b8e.isWeChatGame||a.xdSdk.serverChooseLog(i,function(e){b8e.log(e)})},a)},a.enterGameLog=function(n){a.requestLogSignature(function(e,t){var i={game_id:a.getGameId(),game_key:a.getGameKey(),app_id:a.getAppId(),open_id:game.LoginConfig.openId,timestamp:t,role_id:n.role_id,nickname:n.roleName,level:n.level,vip_level:n.vip_level,area:n.area,server_id:n.server_id,is_new:n.is_new,score:n.score,signature:e};b8e.isWeChatGame?a.xdSdk.xdEnterGameLog(i):a.xdSdk.enterGameLog(i,function(e){b8e.log(e)})},a)},a.stepLog=function(n){a.requestLogSignature(function(e,t){var i={game_id:a.getGameId(),game_key:a.getGameKey(),app_id:a.getAppId(),open_id:game.LoginConfig.openId,timestamp:t,role_id:n.role_id,area:n.area,server_id:n.server_id,progress:n.progress,signature:e};b8e.isWeChatGame||a.xdSdk.stepLog(i,function(e){b8e.log(e)})},a)},a.createRoleLog=function(n){a.requestLogSignature(function(e,t){var i={game_id:a.getGameId(),game_key:a.getGameKey(),app_id:a.getAppId(),open_id:game.LoginConfig.openId,timestamp:t,role_id:n.role_id,nickname:n.roleName,area:n.area,server_id:n.server_id,signature:e};b8e.isWeChatGame?a.xdSdk.xdCreateRoleLog(i):a.xdSdk.createRoleLog(i,function(e){b8e.log(e)})},a)},a.levelUpLog=function(n){a.requestLogSignature(function(e,t){var i={game_id:a.getGameId(),game_key:a.getGameKey(),app_id:a.getAppId(),open_id:game.LoginConfig.openId,timestamp:t,role_id:n.role_id,nickname:n.roleName,area:n.area,server_id:n.server_id,level:n.level,role_level_reborn:n.role_level_reborn,score:n.score,vip_level:n.vip_level,signature:e};b8e.isWeChatGame?a.xdSdk.xdLevelUpLog(i):a.xdSdk.levelUpLog(i,function(e){b8e.log(e)})},a)},a.processLog=function(n){a.requestLogSignature(function(e,t){var i={game_id:a.getGameId(),game_key:a.getGameKey(),app_id:a.getAppId(),open_id:game.LoginConfig.openId,timestamp:t,role_id:n.role_id,nickname:n.roleName,area:n.area,server_id:n.server_id,level:n.level,process:n.process,signature:e};b8e.isWeChatGame||a.xdSdk.processLog(i,function(e){b8e.log(e)})},a)},a.updateFightScoreLog=function(n){a.requestLogSignature(function(e,t){var i={game_id:a.getGameId(),game_key:a.getGameKey(),open_id:game.LoginConfig.openId,timestamp:t,role_id:n.role_id,nickname:n.roleName,area:n.area,server_id:n.server_id,score:n.score,signature:e};b8e.isWeChatGame||a.xdSdk.updateFightScoreLog(i,function(e){b8e.log(e)})},a)},a.sceneLog=function(e){},a.focus=function(t){b8e.isWeChatGame||a.xdSdk.focus(function(e){0==e.code?(b8e.info("huoshu SDK focus success!"),t.call()):b8e.error("SDK focus Error:"+e.code+":"+e.message)})},a.realVerify=function(){b8e.isWeChatGame||a.xdSdk.realVerify(function(e){0==e.code?(game.LoginConfig.realVerifyComplete=!0,b8e.evt.dptG(game.RealVerifyEvent.REAL_VERIFY_COMPLETE)):b8e.error("SDK realVerify Error:"+e.code+":"+e.message)})},a.getCoinRemain=function(){a.xdSdk.getCoinRemain(function(e){0==e.code?(b8e.log("获取平台币余额接口："+e.message+"  __闲徕钻石数量："+e.data),game.LoginConfig.coinRemain=e.data):b8e.error("SDK getCoinRemain Error:"+e.code+":"+e.message)})},a.getGameId=function(){return b8e.isWeChatGame?"100389":b8e.getQueryString("game_id")},a.getPt=function(){return b8e.isWeChatGame?a.wxSceneData&&a.wxSceneData.pt?a.wxSceneData.pt:"1000":""},a.getAppId=function(){return b8e.isWeChatGame?"2063":b8e.getQueryString("app_id")},a.getOpenId=function(){return b8e.getQueryString("open_id")},a.getGameKey=function(){return b8e.isWeChatGame?"88ef1c5d64bb2b6d":b8e.getQueryString("game_key")},a.getTimestamp=function(){return b8e.getQueryString("timestamp")},a.getNonce=function(){return b8e.getQueryString("nonce")},a.getTicket=function(){return b8e.getQueryString("ticket")},a.getLoginSignature=function(){return b8e.getQueryString("signature")},a.getGameUrl=function(){return b8e.getQueryString("game_url")},a.getLoginType=function(){return b8e.getQueryString("login_type")},cc._RF.pop()},{}],IBearGameSDK:[function(e,t,i){"use strict";cc._RF.push(t,"29930L2hsBMEYn6A/BkFReY","IBearGameSDK");var s=game.IBearGameSDK=function(){};s.Name=null,s.sex=null,s.face=null,s.city=null,s.shareOpenId=null,s.shareTime=null,s.enterTime=null,s.init=function(){s.loadScript("http://cdn.ibeargame.com/res-js/bear.js?v=20160718001")},s.loadScript=function(e){b8e.res.loadScript(e,function(e,t){b8e.info("SDK加载完成："+e),s.sdkInit()},this,!0)},s.sdkInit=function(){window.addEventListener("message",function(e){game.IS_I_BEAR_GAME&&game.ShareMgr.inst().isBearGameSharing&&(game.ShareMgr.inst().shareSuccess(),game.ShareMgr.inst().isBearGameSharing=!1,b8e.info(e.data.action),b8e.info(e.data.tp),b8e.info(e.data.link))})},s.UserInfo=function(n){var e={accessToken:s.getAccessToken()};game.sdk.sdkNet.requestData("http://open.ibeargame.com/UserInfo",e,function(e,t){if(e)b8e.error(e),b8e.Toast.launch("小熊SDK IO错误",4294901760,0);else if(0==t.code){var i=t.res;game.LoginConfig.openId=i.openid,s.Name=i.name,s.sex=i.sex,s.face=i.face,s.city=i.city,s.shareOpenId="shareOpenId"in i?i.shareOpenId:null,s.shareTime="shareTime"in i?i.shareTime:null,s.enterTime="enterTime"in i?i.enterTime:null,n.call()}else b8e.Toast.launch("登录Error:"+t.code,4294901760,0),b8e.error("SDK UserInfo Error:"+t.code)},this,null,!1)},s.login=function(i,n){s.UserInfo(function(){var e={pfid:game.LoginConfig.pfid,detail:{openid:game.LoginConfig.openId,name:s.Name,sex:s.sex,face:s.face,city:s.city}};game.sdk.sdkNet.requestData(game.LoginConfig.loginUrl,e,function(e,t){e?(b8e.error(e),b8e.Toast.launch("登录IO错误",4294901760,0)):(0==t.code?(game.LoginConfig.uid=t.data.uid,game.LoginConfig.channelId=t.data.channel_id,game.LoginConfig.channelName=t.data.channel_name):b8e.error("SDK login Error:"+t.code+":"+t.msg),i.call(n,t.code))},this,null,!0,{isJson:!0})})},s.pay=function(e){BEAR.goToPay(294,e.item_id,e.role_id,e.roleName,e.game_payorder)},s.shareGame=function(){BEAR.tickShare()},window.addEventListener("message",function(e){b8e.info(e.data.action),b8e.info(e.data.tp),b8e.info(e.data.link)}),s.getAccessToken=function(){return b8e.getQueryString("accessToken")},s.getAppId=function(){return 294},cc._RF.pop()},{}],LoadBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"78502apxM9DN7PVbOL+65iT","LoadBaseConfig"),game.ClientGlobalCfg=e("../config/cfg/ClientGlobalCfg"),game.LoadBaseConfig=b8e.BaseProcess.extends({_configProto:null,ctor:function(){this._super()},getState:function(){return game.BaseProcessTypes.LOAD_BASE_CONFIG},processHandler:function(e){game.LoadingPage.inst().setProgress(e)},startProcess:function(){this._super(),game.LoadingPage.inst().show(),game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在加载基础配置..."),this.setProcessPercent(1,3e3),this.loadConfig()},loadConfig:function(){b8e.res.loadBatchRes([{url:"base/config/base_config.bcd",useManifest:!1,proto:"base_conf.Config"},{url:"base/proto/base_proto.bpd",useManifest:!1}],this.batchLoadProcess,this,null,!1,!0)},batchLoadProcess:function(e,t,i,n,s){e?game.LoadingPage.inst().setErrorText("加载基础配置错误！"):("base/config/base_config.bcd"==s&&this._splitConfig(t)&&b8e.SensitiveWords.init(game.ccfg.GlobalCfg.getValue("sensitiveWords")),i==n&&this.completeProcess())},_splitConfig:function(e){return game.LoadBaseConfig._config=e,this._initModuleConfig(),!0},_initModuleConfig:function(){game.ccfg={},this.register("GlobalCfg","ClientGlobal",game.ClientGlobalCfg)},register:function(e,t,i){var n=new i;null!=n.setup?(game.LoadBaseConfig._config[t]||b8e.error(e,"配置不存在"),n.name=e,n.setup(game.LoadBaseConfig._config[t]),game.ccfg[e]=n):b8e.log(url+"未实现 setup 方法")}}),game.LoadBaseConfig._config=null,cc._RF.pop()},{"../config/cfg/ClientGlobalCfg":"ClientGlobalCfg"}],LoadModule:[function(e,t,i){"use strict";cc._RF.push(t,"62c20n9EM9AkrLs388NpD5a","LoadModule"),game.LoadModule=b8e.BaseProcess.extends({_moduleLoading:!1,_moduleLoaded:!1,getState:function(){return game.BaseProcessTypes.LOAD_MODULE},processHandler:function(e){game.ReconnectLoading&&game.ReconnectLoading.inst().setProgress(e),game.LoadingPage.inst().setProgress(e)},startProcess:function(){this._super(),b8e.log("process:"+game.BaseProcessTypes.LOAD_MODULE+"开始..."),game.LoginConfig.isReconnect?game.ReconnectLoading&&(game.ReconnectLoading.inst().show(),game.ReconnectLoading.inst().setTipText("请稍候，正在进入游戏...")):(game.LoadingPage.inst().show(),game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在加载模块..."),game.LoadingPage.inst().setRefreshState(0)),this.setProcessPercent(1,2e3),game.isDebugStartup?this.completeProcess():this._moduleLoaded?this.completeProcess():this._moduleLoading||(this._moduleLoading=!0,this.loadSkinSetting())},loadSkinSetting:function(){b8e.res.loadRes("module/skin.bsd",null,this.onSkinSettingComplete,this,null,{useManifest:!1})},onSkinSettingComplete:function(e,t){t&&(b8e.updateSettings(t),this.loadSkin())},loadSkin:function(){b8e.res.loadScript("module/skin.bgp",this.onSkinComplete,this)},onSkinComplete:function(e){b8e.isWeChatGame,this.loadModule()},loadModule:function(){b8e.res.loadScript("module/app.bgp",this.onModuleComplete,this)},onModuleComplete:function(e){this._moduleLoading=!1,this._moduleLoaded=!0,this.completeProcess()},completeProcess:function(){if(this._super(),game.GameModule){var e=new game.GameModule;e.init(),game.moduleInst=e}else game.LoadingPage.inst().setErrorText("初始化模块错误！"),b8e.error("初始化模块错误！")}}),cc._RF.pop()},{}],LoadingPage:[function(e,t,i){"use strict";cc._RF.push(t,"d63e2je3tFFBLx6wS3B3iww","LoadingPage"),game.LoadingPage=b8e.Object.extends({_loadingView:null,_loadComplete:!1,ctor:function(){this._super()},show:function(){this.parent||(this._loadingView||(this._loadingView=new game.LoadingView),b8e.layer.getTopLayer().addChild(this._loadingView),this._loadingView.setLocalZOrder(99999999),b8e.startup.removeLoadingBar())},onPanelRefresh:function(){this._loadComplete||(this._loadingView.removeRefreshCallback(this.onPanelRefresh,this),b8e.startup.removeLoadingBar(),this._loadComplete=!0)},hide:function(){this._loadingView&&this._loadingView.removeFromParent()},setTipText:function(e){this._loadingView&&this._loadingView.setTipText(e)},setErrorText:function(e){this._loadingView&&this._loadingView.setErrorText(e)},setProgress:function(e){this._loadingView&&this._loadingView.setProgress(e)},setRefreshState:function(e){this._loadingView&&this._loadingView.setRefreshState(e)}}),game.LoadingPage._instance=null,game.LoadingPage._singleton=!0,game.LoadingPage.inst=function(){return null==game.LoadingPage._instance&&(game.LoadingPage._singleton=!1,game.LoadingPage._instance=new game.LoadingPage,game.LoadingPage._singleton=!0),game.LoadingPage._instance},cc._RF.pop()},{}],LoadingView:[function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s;cc._RF.push(t,"ed870M3Q4hLZouxhTmCCjE9","LoadingView"),game.LoadingView=b8e.SkinWidget.extends((n(s={_bgGraph:null,_progress:0,_bgImg:null},"_progress",0),n(s,"_bgImg",null),n(s,"_modelTouchClose",!1),n(s,"_tipText",null),n(s,"_textColor",null),n(s,"_refreshState",null),n(s,"ctor",function(){this._super("base/prefabs/Loading")}),n(s,"init",function(){this._bgImg||(this._bgImg=b8e.Sprite.get(),this._bgImg.setAnchor(.5,.5),this._bgImg.addToParent(this.skin.bgImg));var e="images/image/loading/bg2.jpg";game.IS_HUO_SHU&&"1772"==game.HuoShuSDK.getAppId()&&(e="images/image/loading/bg3.jpg"),"ios_client"==game.VERSION_NAME||"72usa6_recharge_client"==game.VERSION_NAME?(this.skin.progress.node.active=!1,this.skin.lab_refresh.node.active=!1,e="images/image/loading/bg1.jpg"):(this.skin.progress.node.active=!0,this.skin.lab_refresh.node.active=!0),this._bgImg.loadTexture(e,null,null,{useManifest:!1})}),n(s,"onShow",function(){this.skin.bottom.active=!0,this.setProgress(this._progress),this.setTipText(this._tipText),this.setRefreshState(this._refreshState),b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this.onStageResize),this.onStageResize()}),n(s,"onHide",function(){b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onStageResize)}),n(s,"refreshGame",function(){b8e.startup&&b8e.startup.reload()}),n(s,"progress",{get:function(){return this._progress},set:function(e){this._progress=e,this.setProgress(this._progress)}}),n(s,"setProgress",function(e){if(this.skin){if("ios_client"==game.VERSION_NAME||"72usa6_recharge_client"==game.VERSION_NAME)return;this.skin.progressBar.node.scaleX=e}}),n(s,"setTipText",function(e){this._tipText=e,this.skin&&(this.skin.textTipLabel.string=e),this.setTextColor(4294967295)}),n(s,"setTextColor",function(e){this._textColor=e,this.skin&&(this.skin.textTipLabel.node.color=b8e.ColorUtil.toCCColor(e))}),n(s,"setErrorText",function(e){this.setTipText(e),this.setTextColor(4294901760)}),n(s,"setRefreshState",function(e){if("ios_client"!=game.VERSION_NAME&&"72usa6_recharge_client"!=game.VERSION_NAME&&(this._refreshState=e,this.skin)){var t=0==e;this.skin.lab_refresh.node.active=t}}),n(s,"onStageResize",function(){var e=b8e.stageWidth,t=b8e.stageHeight;this.setPosition(.5*e>>0,.5*t>>0)}),n(s,"dispose",function(){this._bgGraph&&(this._bgGraph.release(),this._bgGraph=null),this._super()}),s)),cc._RF.pop()},{}],LoginConfig:[function(e,t,i){"use strict";cc._RF.push(t,"26e24yGbwdDaL1/Al2JBRRH","LoginConfig"),game.LoginConfig={},game.LoginConfig.apiListUrl=null,game.LoginConfig.registerUrl=null,game.LoginConfig.loginUrl=null,game.LoginConfig.serverListUrl=null,game.LoginConfig.serverSelectUrl=null,game.LoginConfig.logReportUrl=null,game.LoginConfig.queryAnnouncementListUrl=null,game.LoginConfig.queryZoneAnnouncementListUrl=null,game.LoginConfig.needLogin=!1,game.LoginConfig.hasHeroData=!1,game.LoginConfig.heroData=null,game.LoginConfig.isSingle=!1,game.LoginConfig.gateSvrAddr=null,game.LoginConfig.serverArea=1,game.LoginConfig.serverId=1,game.LoginConfig.serverName="",game.LoginConfig.token=null,game.LoginConfig.loginAddr=null,game.LoginConfig.uid=0,game.LoginConfig.secret="",game.LoginConfig.pfid=0,game.LoginConfig.wanbaGiftId=0,game.LoginConfig.channelId=0,game.LoginConfig.channelName=null,game.LoginConfig.createOrderUrl=null,game.LoginConfig.rechargeCallbackUrl=null,game.LoginConfig.signlogUrl=null,game.LoginConfig.signrechargeUrl=null,game.LoginConfig.queryWanbaPayUrl=null,game.LoginConfig.wanbaFriendsUrl=null,game.LoginConfig.wanbaSendMsgUrl=null,game.LoginConfig.wanbaVipLevelUrl=null,game.LoginConfig.isMicroLogin=!1,game.LoginConfig.canDownloadMicro=!1,game.LoginConfig.canShare=!1,game.LoginConfig.openApplePay=!1,game.LoginConfig.canAddShortcut=!1,game.LoginConfig.isSwitch=!1,game.LoginConfig.canFocus=!1,game.LoginConfig.isFocus=!1,game.LoginConfig.announcementContents=null,game.LoginConfig.zoneAnnouncementContents=null,game.LoginConfig.isServerConnectProcessed=!1,game.LoginConfig.isReconnect=!1,game.LoginConfig.isReconnected=!1,game.LoginConfig.isReLogin=!1,game.LoginConfig.closedMsg=null,game.LoginConfig.closedCode=0,game.LoginConfig.allowReconnect=!0,game.LoginConfig.openId=0,game.LoginConfig.isWanBaGame=!1,game.LoginConfig.wanBaGameVipLevel=0,game.LoginConfig.wanbaUserReportUrl=null,game.LoginConfig.hasRealVerify=!1,game.LoginConfig.realVerifyComplete=!1,game.LoginConfig.isQQvip=!1,game.LoginConfig.qqvip=!1,game.LoginConfig.isActivity=!1,game.LoginConfig.activityUrl=null,game.LoginConfig.isExchangeType=!1,game.LoginConfig.exchange_num=10,game.LoginConfig.exchange_name="钻石",game.LoginConfig.coinRemain=0,game.LoginConfig.isCouponRemark=!1,game.LoginConfig.shareTitle="",game.LoginConfig.shareImage="",game.LoginConfig.wxScene=null,game.LoginConfig.isSentReady=!1,game.LoginConfig.gender="",game.LoginConfig.avatar="",game.LoginConfig.sessionKey=null,game.LoginConfig.wxOpenId=null,cc._RF.pop()},{}],QzoneSDK:[function(e,t,i){"use strict";cc._RF.push(t,"f1f4bQkzWNBJapvzYzQxoBo","QzoneSDK");var o=game.QzoneSDK=function(){};o._onSdkInited=null,o._lastPayParams=null,o.appid="",o.openid="",o.openkey="",o.init=function(e,t){game.LoadingPage.inst().setTipText("正在初始化Qzone..."),2==o.getPlatform()?game.LoginConfig.openApplePay=!0:game.LoginConfig.openApplePay=!1,game.LoginConfig.canAddShortcut=!0,game.LoginConfig.canShare=!0,game.LoginConfig.isWanBaGame=!0,game.LoginConfig.wanbaGiftId=o.getGiftId(),o._onSdkInited={callback:e,thisArg:t},game.LoadingPage.inst().setTipText("正在获取登录态..."),window.getOpenKey(function(e){0==e.code?(o.appid=e.data.appid,o.openid=e.data.openid,o.openkey=e.data.openkey,o._shareSetting(),o._onSdkInited.callback.call(o._onSdkInited.thisArg)):(game.LoadingPage.inst().setTipText("获取登录态失败..."),b8e.error("获取登录态 Error:"+e.code))}),b8e.Timer.add(o,o.onTimer,200,0,0)},o.login=function(i,n){var e,t=game.sdk.gamePFData();e=t&&0<t.length?t[0]+"":null;var s={pfid:game.LoginConfig.pfid,detail:{platform:o.getPlatform(),pf:o.getPf(),openid:o.getOpenid(),openkey:o.getOpenkey(),gpfd:e}};game.sdk.sdkNet.requestData(game.LoginConfig.loginUrl,s,function(e,t){e?b8e.error(e):(0==t.code?(game.LoginConfig.uid=t.data.uid,game.LoginConfig.channelId=t.data.channel_id,game.LoginConfig.channelName=t.data.channel_name):b8e.error("SDK login Error:"+t.code+":"+t.msg),i.call(n,t.code))},this,null,!0,{isJson:!0})},o.queryInfoAndPay=function(s){o._lastPayParams=null;var e={zone_id:o.getPlatform()+"",open_id:o.getOpenid()+"",open_key:o.getOpenkey()+"",pf:o.getPf()+"",item_id:s.itemId},t=game.LoginConfig.queryWanbaPayUrl;game.sdk.sdkNet.requestData(t,e,function(e,t){if(e)b8e.error(e);else if(0==t.code){var i=t.data,n=i.item_score;i.user_score-n<0?(o._lastPayParams=s,o.recharge(n)):game.sdk.createOrderAndPay(s)}else b8e.error("SDK queryInfo Error:"+t.code+":"+t.msg)},this,null,!0,{isJson:!0})},o.shareMessage=function(){"undefined"!=typeof mqq?o._shareSetting():b8e.error("不支持mqq")},o._shareSetting=function(){"undefined"!=typeof mqq?mqq.invoke("ui","setOnShareHandler",function(e){"QZ"!==game.QzoneSDK.getApp()&&0==e?mqq.ui.shareArkMessage({title:game.ShareMgr.inst().getShareTitle(),desc:game.ShareMgr.inst().getShareMessage(),share_url:o.getShareurl(),image_url:o.getAppicon(),back:!0},function(e){0==e.retCode&&game.ShareMgr.inst().shareSuccess(),o._shareSetting()}):mqq.invoke("ui","shareMessage",{title:game.ShareMgr.inst().getShareTitle(),desc:game.ShareMgr.inst().getShareMessage(),share_type:e,share_url:o.getShareurl(),image_url:o.getAppicon(),back:!0},function(e){0==e.retCode?game.ShareMgr.inst().shareSuccess():1==e.retCode||e.retCode,o._shareSetting()})}):b8e.error("不支持mqq")},o.showShareMenu=function(){"undefined"!=typeof mqq?(o.shareMessage(),mqq.ui.showShareMenu()):b8e.error("不支持mqq")},o.openInterestTribeUrl=function(){"undefined"!=typeof mqq?mqq.ui.openUrl({url:"https://buluo.qq.com/mobile/barindex.html?_bid=128&_wv=1027&bid=399862",target:1,style:1,callback:function(){b8e.log("进入部落成功")}}):b8e.error("不支持mqq")},o.addShortcut=function(){"undefined"!=typeof mqq?(mqq.ui.addShortcut({action:"web",title:b8e.startup.getTitle(),icon:o.getAppicon(),url:o.getJumpurl(),callback:function(){game.ShortcutMgr.inst().addShortcutSuccess()}}),2==o.getPlatform()&&game.ShortcutMgr.inst().addShortcutSuccess()):b8e.error("不支持mqq")},o.getPlatform=function(){return window.OPEN_DATA?window.OPEN_DATA.platform:0},o.getPf=function(){return window.OPEN_DATA?window.OPEN_DATA.pf:""},o.getAppid=function(){return o.appid},o.getOpenid=function(){return o.openid},o.getOpenkey=function(){return o.openkey},o.getVia=function(){return window.OPEN_DATA?window.OPEN_DATA.via:""},o.getAppurl=function(){return window.OPEN_DATA?window.OPEN_DATA.appurl:""},o.getAppicon=function(){return window.OPEN_DATA?window.OPEN_DATA.appicon:""},o.getShareurl=function(){return window.OPEN_DATA?window.OPEN_DATA.shareurl:""},o.getJumpurl=function(){return window.OPEN_DATA?window.OPEN_DATA.jumpurl:""},o.getQua=function(){return window.OPEN_DATA&&window.OPEN_DATA.qua?window.OPEN_DATA.qua.meybeQua:""},o.getApp=function(){return window.OPEN_DATA&&window.OPEN_DATA.qua?window.OPEN_DATA.qua.app:""},o.appInBackground=function(){return window.appInBackground},o.onTimer=function(){o.appInBackground()?b8e.startup.deactivate():b8e.startup.activate()},o.recharge=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:80;window.__paySuccess=function(){var e=new game.GameAlertInfo;e.alertType=game.GameAlertType.OneBtn,e.string="您已支付成功！",e.isShowTips=!1,game.gameAlert.showAlert(this,null,e),o._lastPayParams&&o.queryInfoAndPay(o._lastPayParams)},window.__payError=function(){var e=new game.GameAlertInfo;e.alertType=game.GameAlertType.OneBtn,e.string="支付失败！",e.isShowTips=!1,game.gameAlert.showAlert(this,null,e),o._lastPayParams=null},window.__payClose=function(){var e=new game.GameAlertInfo;e.alertType=game.GameAlertType.OneBtn,e.string="您已取消支付！",e.isShowTips=!1,game.gameAlert.showAlert(this,null,e),o._lastPayParams=null},window.popPayTips({version:"v2",defaultScore:e,appid:o.getAppid()})},o.rechargeCallback=function(e){var t={zone_id:o.getPlatform()+"",open_id:o.getOpenid()+"",open_key:o.getOpenkey()+"",order_id:e.game_payorder+"",pf:o.getPf()+""},i=game.LoginConfig.rechargeCallbackUrl;game.sdk.sdkNet.requestData(i,t,function(e,t){e?(b8e.error(e),b8e.Toast.launch("充值回调IO错误",4294901760)):0==t.code?b8e.Toast.launch("您已充值成功！"):(b8e.Toast.launch("充值回调Error:"+t.code+":"+t.msg,4294901760),b8e.error("SDK rechargeCallback Error:"+t.code+":"+t.msg))},this,null,!0,{isJson:!0})},o.reportUserAchievement=function(e){var t={open_id:o.getOpenid()+"",open_key:o.getOpenkey()+"",pf:o.getPf()+"",ach_type:e.ach_type+"",ach_des:e.ach_des+"",ach_value:e.ach_value+""},i=game.LoginConfig.wanbaUserReportUrl;game.sdk.sdkNet.requestData(i,t,function(e,t){e&&b8e.error(e)},this,null,!0,{isJson:!0})},o.reportRegister=function(){window.reportRegister()},o.reportLogin=function(){window.reportLogin()},o.getGiftId=function(){return b8e.getQueryString("GIFT")},o.sendGamebarMsg=function(s){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,e={open_id:o.getOpenid()+"",open_key:o.getOpenkey()+"",pf:o.getPf()+""},t=game.LoginConfig.wanbaFriendsUrl;game.sdk.sdkNet.requestData(t,e,function(e,t){e?b8e.error("获取关系链IO错误："+e):0==t.code?(t.msg,t.data?t.data.items.forEach(function(e){var t=e.openid;b8e.log("SDK sendFriend frdOpenId:"+t);var i={open_id:o.getOpenid()+"",open_key:o.getOpenkey()+"",pf:o.getPf()+"",frd:t,msgtype:r,content:s,qua:o.getQua()},n=game.LoginConfig.wanbaSendMsgUrl;game.sdk.sdkNet.requestData(n,i,function(e,t){e?b8e.error("发送好友消息IO错误："+e):0==t.code?t.msg:b8e.error("SDK sendGamebarMsg Error:"+t.code+":"+t.msg)},this,null,!0,{isJson:!0})},this):b8e.error("SDK sendFriends Error data.data is:"+t.data)):b8e.error("SDK sendFriends Error:"+t.code+":"+t.msg)},this,null,!0,{isJson:!0})},o.getGameVipLevel=function(i,n){var e={open_id:o.getOpenid()+"",open_key:o.getOpenkey()+"",pf:o.getPf()+""},t=game.LoginConfig.wanbaVipLevelUrl;game.sdk.sdkNet.requestData(t,e,function(e,t){e?b8e.error("获取小游戏vip IO错误："+e):"-1"==t?b8e.error("SDK getGameVipLevel Error:"+t):(game.LoginConfig.wanBaGameVipLevel=parseInt(t),b8e.log("玩吧游戏VIP Level:"+game.LoginConfig.wanBaGameVipLevel),i&&i.call(n))},this,null,!0,{isJson:!0,dataFormat:b8e.URLLoaderDataFormat.TEXT})},cc._RF.pop()},{}],ReconnectMgr:[function(e,t,i){"use strict";cc._RF.push(t,"b0d24CXW4hDFbPaRBFBE+1f","ReconnectMgr"),game.ReconnectMgr=b8e.Object.extends({name:"ReconnectMgr",_isFirst:!1,_reconnectTime:1e3,_reconnectCount:0,_delayTimer:null,_isReconnect:!1,ctor:function(){if(1==game.ReconnectMgr._singleton)throw new Error("ReconnectMgr 只能通过单例方法获取");this._super()},startReconnect:function(){this.startCountdown(),b8e.net.connectServer(game.LoginConfig.gateSvrAddr,0,this.onConnectedToGateServer,this.onGateConnectionClosed,this.onGateSocketError,null,this)},onConnectedToGateServer:function(){b8e.log("重连--正在请求登录...");var e=game.pbmsg.AuthRequest;e.secret=game.LoginConfig.secret,e.uid=game.LoginConfig.uid,b8e.NetSender.getBytes().writeProtobuf(e);var t=game.pbmid.Login.Auth;b8e.sendN(t)},onGateSocketError:function(){b8e.log("onGateSocketError"),game.LoginConfig.isReLogin||(game.LoginConfig.isServerConnectProcessed?game.ReconnectLoading&&game.ReconnectLoading.inst().setErrorText("正在重新连接服务器..."):game.LoadingPage.inst().setErrorText("服务器连接错误！"),this.showAlertOrReconnect())},onGateConnectionClosed:function(){b8e.log("onGateConnectionClosed"),game.LoginConfig.isReLogin||(game.LoginConfig.isServerConnectProcessed?game.ReconnectLoading&&(game.ReconnectLoading.inst().show(),game.ReconnectLoading.inst().setErrorText("正在重新连接服务器...")):(game.LoadingPage.inst().show(),game.LoadingPage.inst().setErrorText("服务器连接断开！")),this.showAlertOrReconnect())},showAlertOrReconnect:function(){if(0<game.LoginConfig.closedCode&&102!=game.LoginConfig.closedCode){game.ReconnectLoading&&game.ReconnectLoading.inst().hide();var e=new game.GameAlertInfo;e.alertType=game.GameAlertType.OneBtn,e.string=game.ccfg.ServerCodeCfg.getDesc(game.LoginConfig.closedCode),e.isShowTips=!1,game.gameAlert.showAlert(this,this.onClickBtn,e)}else this.onSenderReconnect()},onClickBtn:function(e,t){switch(t){case game.GameAlertBtnType.CONFIRM:case game.GameAlertBtnType.CLOSE:game.sdk.logout()}},onSenderReconnect:function(){game.SceneMgr&&(game.ScenePickMgr.inst().pickTarget(null),game.TrusteeshipMgr.inst().pause(!0)),game.ReconnectLoading&&(game.ReconnectLoading.inst().show(),game.ReconnectLoading.inst().setTipText("正在重新连接服务器...")),b8e.Tween.kill(this),b8e.Tween.get(this).wait(1500).call(this.delay,this)},delay:function(){b8e.Tween.kill(this),game.LoginConfig.allowReconnect&&(game.HeartBeatMgr.inst().stopHeartBeat(),this._isFirst?this._reconnectTime=1500:(this._isFirst=!0,this._reconnectTime=1e3),this._reconnectTime<=0&&(this._reconnectTime=1e3),b8e.Tween.get(this).wait(this._reconnectTime).call(this._reconnect,this))},_reconnect:function(){this._reconnectCount++,b8e.log("重连次数："+this._reconnectCount),b8e.Tween.kill(this),game.SceneMgr&&(game.LoginConfig.isReconnect=!0),game.baseProcess.runConnectProcess()},clear:function(){game.LoginConfig.hasHeroData&&game.SceneMgr&&(game.LoginConfig.isReconnect||game.LoginConfig.isReLogin)&&game.SceneMgr.inst().clear()},reset:function(){b8e.Tween.kill(this),this._isFirst=!1,this._reconnectCount=0,this._reconnectTime=1e3,game.LoginConfig.closedCode=0},stop:function(){game.LoginConfig.isReLogin=!1,game.LoginConfig.isReconnect=!1,game.LoginConfig.allowReconnect=!1,game.ReconnectLoading&&game.ReconnectLoading.inst().hide(),b8e.Tween.kill(this),game.SceneMgr&&(game.ScenePickMgr.inst().pickTarget(null),game.TrusteeshipMgr.inst().pause(!0)),b8e.net.closeConnection()},startCountdown:function(){this._isReconnect||(this._isReconnect=!0,this._delayTimer||(this._delayTimer=b8e.Timer.add(this,this.delayCountdown,3e4)),this._delayTimer.reset(),this._delayTimer.start())},delayCountdown:function(){this.stop();var e=new game.GameAlertInfo;e.alertType=game.BaseGameAlertType.OneBtn,e.string="重连失败，请重新登录游戏",e.isShowTips=!1,game.gameAlert.showAlert(this,this.refreshGame,e)},stopCountdown:function(){this._isReconnect=!1,this._delayTimer&&this._delayTimer.stop()},clearCountdown:function(){this._delayTimer&&(b8e.Timer.remove(this,this.delayCountdown),this._delayTimer=null,this._isReconnect=!1)},refreshGame:function(e,t){switch(t){case game.GameAlertBtnType.CONFIRM:case game.GameAlertBtnType.CLOSE:this.clearCountdown(),b8e.startup&&b8e.startup.reload()}}}),game.ReconnectMgr._instance=null,game.ReconnectMgr._singleton=!0,game.ReconnectMgr.inst=function(){return game.ReconnectMgr._instance||(game.ReconnectMgr._singleton=!1,game.ReconnectMgr._instance=new game.ReconnectMgr,game.ReconnectMgr._singleton=!0),game.ReconnectMgr._instance},cc._RF.pop()},{}],RegisterView:[function(e,t,i){"use strict";cc._RF.push(t,"5a943DZaZRJpYarY1HEU7ow","RegisterView"),game.RegisterView=b8e.SkinWidget.extends({ctor:function(){this._super("base/prefabs/roleLogin/RegisterSkin","RegisterSkin",null)},onShow:function(){var e=b8e.LocalStorage.getItem("username"),t=b8e.LocalStorage.getItem("password");this.skin.usernameInput.string=e||"",this.skin.passwordInput.string=t||"",b8e.evt.onC(this.skin.startBtn.node,this._onClickStartBtn,this),this.onResize(),b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this.onResize)},onHide:function(){b8e.evt.offC(this.skin.startBtn.node,this._onClickStartBtn,this),b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onResize)},onResize:function(){this.setPosition(.5*(b8e.stageWidth-this.width),.5*(b8e.stageHeight-this.height))},_onClickStartBtn:function(){if(this.skin){var e=this.skin.usernameInput.string.trim();if(0!=e.length){var t=this.skin.passwordInput.string.trim();if(0!=t.length){var i=this.data.onRegister;i&&i.call(this.data.thisArg,e,t)}else b8e.Toast.launch("请输入密码！")}else b8e.Toast.launch("请输入用户名！")}}}),cc._RF.pop()},{}],Register:[function(e,t,i){"use strict";cc._RF.push(t,"342achE/iJAcbCDTImsNnjt","Register"),game.Register=b8e.BaseProcess.extends({_registerView:null,_registerNet:null,skinUrl:null,ctor:function(){this._super(),this._registerNet=b8e.NetMgr.createMgr("register")},getState:function(){return game.BaseProcessTypes.REGISTER},processHandler:function(e){game.LoadingPage.inst().setProgress(e)},startProcess:function(){this._super(),game.LoginConfig.needLogin?(game.LoadingPage.inst().show(),game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在加载注册界面..."),this.setProcessPercent(1,3e3),this.skinUrl="base/prefabs/roleLogin/RegisterSkin",b8e.res.loadRes(this.skinUrl,b8e.Prefab,this.onResComplete,this)):(game.LoadingPage.inst().show(),game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在登录服务器..."),this.setProcessPercent(1,3e3),game.sdk.login(null,function(e){0==e&&this.completeProcess()},this))},onResComplete:function(e,t){this._registerView||(this._registerView=new game.RegisterView,b8e.layer.getGuiLayer().addChild(this._registerView),this._registerView.data={onRegister:this.registerAndLogin,thisArg:this},game.LoadingPage.inst().hide())},registerAndLogin:function(e,t){this.login(e,t)},login:function(t,i){var e={username:t,password:i};game.sdk.login(e,function(e){0==e?(b8e.LocalStorage.setItem("username",t),b8e.LocalStorage.setItem("password",i),this.completeProcess()):(b8e.Toast.launch("新账号自动注册..."),this.register(t,i))},this)},register:function(i,n){var e={username:i,password:n};this._registerNet.requestData(game.LoginConfig.registerUrl,e,function(e,t){e?(b8e.error(e),b8e.Toast.launch("注册IO错误")):0==t.code?this.login(i,n):b8e.Toast.launch("注册错误："+t.msg)},this,null,!0,{isJson:!0})},completeProcess:function(){this.skinUrl&&(b8e.res.unloadRes(this.skinUrl,this.onResComplete,this),this.skinUrl=null),this._registerView&&(this._registerView.removeFromParent(),this._registerView.release(),this._registerView=null),this._super()}}),cc._RF.pop()},{}],RoleLoginSender:[function(e,t,i){"use strict";cc._RF.push(t,"63ddeChDYNFDrtkODFkaVnT","RoleLoginSender");var n=game.RoleLoginSender=function(){};n.CreateRoleRequest=function(e,t){var i=game.pbmsg.CreateRoleRequest;i.name=e,i.protoId=t,b8e.NetSender.getBytes().writeProtobuf(i);var n=game.pbmid.Login.CreateRole;b8e.sendN(n)},n.roleLogin=function(){var e=game.pbmsg.RoleLoginRequest;if(e.isNative=game.LoginConfig.isMicroLogin,e.isVipCustomer=game.LoginConfig.isQQvip,e.radius=b8e.isMobile?12:20,e.isPc=!b8e.isMobile,game.IS_QZONE){var t=game.sdk.gamePFData();if(t&&0<t.length){var i=t[0]+"";e.gpfd=i}}b8e.info("微端登录："+(game.LoginConfig.isMicroLogin?"是":"否")),b8e.log("登录b8e.isMobile："+b8e.isMobile),b8e.NetSender.getBytes().writeProtobuf(e);var n=game.pbmid.Login.RoleLogin;b8e.sendN(n)},n.rename=function(e){var t=game.pbmsg.RenameRequest;t.name=e,b8e.NetSender.getBytes().writeProtobuf(t);var i=game.pbmid.Login.RenameRequest;b8e.sendN(i)},cc._RF.pop()},{}],SDKMgr:[function(e,t,i){"use strict";cc._RF.push(t,"90c40wW5k5JspGd07mOuwbr","SDKMgr"),game.SDKMgr=b8e.Object.extends({sdkNet:null,_onSdkInited:null,_isHuoShu:!1,_isIBearGame:!1,_is4399:!1,_isQzone:!1,_isSina:!1,_payTimer:null,_isPaying:!1,_remainTime:0,_isReportLog:!0,ctor:function(){this._super(),this.sdkNet=b8e.NetMgr.createMgr("sdk")},init:function(e,t){this._onSdkInited={callback:e,thisArg:t},this.initSdk()},initSdk:function(){if(game.LoginConfig.pfid=1,game.IS_HUO_SHU)game.HuoShuSDK.getGameId()?(game.LoginConfig.needLogin=!1,game.LoginConfig.pfid=3,this._isHuoShu=!0,game.HuoShuSDK.init(this.requestApiList,this)):(game.LoginConfig.needLogin=!0,this.requestApiList());else if(game.IS_I_BEAR_GAME)game.IBearGameSDK.init(),game.LoginConfig.needLogin=!1,game.LoginConfig.pfid=4,this._isIBearGame=!0,this.requestApiList();else if(game.IS_4399)game.G4399SDK.init(),game.LoginConfig.needLogin=!1,game.LoginConfig.pfid=5,this._is4399=!0,this.requestApiList();else if(game.IS_SINA)game.SinaSDK.init(),game.LoginConfig.needLogin=!1,game.LoginConfig.pfid=6,this._isSina=!0,this.requestApiList();else if(game.IS_QZONE){game.QzoneSDK.init(this.requestApiList,this),game.LoginConfig.needLogin=!1;var e=game.QzoneSDK.getPlatform();game.LoginConfig.pfid=1==e?7:2==e?8:7,this._isQzone=!0}else{var t=this.getToken();t?(game.LoginConfig.needLogin=!1,game.LoginConfig.token=t):game.LoginConfig.needLogin=!0,this.requestApiList()}game.AnalyticsSDK.init()},requestApiList:function(){b8e.log("正在请求API..."),game.LoadingPage.inst().setTipText("请稍候，正在进入游戏...");var e={pf_id:game.LoginConfig.pfid};this.sdkNet.requestData(b8e.getProtocol()+"//"+game.LoginConfig.apiListUrl,e,function(e,t){if(e)b8e.error(e),b8e.Toast.launch("请求API List IO错误",4294901760,0);else if(0==t.code){var i=t.data;game.LoginConfig.registerUrl=i.register_url,game.LoginConfig.loginUrl=i.login_url,game.LoginConfig.serverListUrl=i.server_list_url,game.LoginConfig.serverSelectUrl=i.server_select_url,game.LoginConfig.logReportUrl=i.log_report_url,game.LoginConfig.createOrderUrl=i.create_order_url,game.LoginConfig.rechargeCallbackUrl=i.recharge_callback_url,game.LoginConfig.signlogUrl=i.signlog_url,game.LoginConfig.signrechargeUrl=i.signrecharge_url,game.LoginConfig.queryWanbaPayUrl=i.query_wanba_pay_url,game.LoginConfig.wanbaFriendsUrl=i.wanba_friends_url,game.LoginConfig.wanbaSendMsgUrl=i.wanba_send_msg_url,game.LoginConfig.wanbaVipLevelUrl=i.wanba_vip_level_url,game.LoginConfig.queryAnnouncementListUrl=i.query_announcement_list_url,game.LoginConfig.queryZoneAnnouncementListUrl=i.query_zone_announcement_list_url,game.LoginConfig.wanbaUserReportUrl=i.wanba_user_report_url,b8e.info("game.LoginConfig.registerUrl:"+game.LoginConfig.registerUrl),b8e.info("game.LoginConfig.loginUrl:"+game.LoginConfig.loginUrl),b8e.info("game.LoginConfig.serverListUrl:"+game.LoginConfig.serverListUrl),b8e.info("game.LoginConfig.serverSelectUrl:"+game.LoginConfig.serverSelectUrl),b8e.info("game.LoginConfig.logReportUrl:"+game.LoginConfig.logReportUrl),b8e.info("game.LoginConfig.createOrderUrl:"+game.LoginConfig.createOrderUrl),b8e.info("game.LoginConfig.rechargeCallbackUrl:"+game.LoginConfig.rechargeCallbackUrl),b8e.info("game.LoginConfig.signlogUrl:"+game.LoginConfig.signlogUrl),b8e.info("game.LoginConfig.signrechargeUrl:"+game.LoginConfig.signrechargeUrl),b8e.info("game.LoginConfig.queryWanbaPayUrl:"+game.LoginConfig.queryWanbaPayUrl),b8e.info("game.LoginConfig.wanbaFriendsUrl:"+game.LoginConfig.wanbaFriendsUrl),b8e.info("game.LoginConfig.wanbaSendMsgUrl:"+game.LoginConfig.wanbaSendMsgUrl),b8e.info("game.LoginConfig.wanbaVipLevelUrl:"+game.LoginConfig.wanbaVipLevelUrl),b8e.info("game.LoginConfig.queryAnnouncementListUrl:"+game.LoginConfig.queryAnnouncementListUrl),b8e.info("game.LoginConfig.queryZoneAnnouncementListUrl:"+game.LoginConfig.queryZoneAnnouncementListUrl),b8e.info("game.LoginConfig.wanbaUserReportUrl:"+game.LoginConfig.wanbaUserReportUrl),this._onSdkInited.callback.call(this._onSdkInited.thisArg)}else b8e.Toast.launch("请求API List Error:"+t.code+":"+t.msg,4294901760,0),b8e.error("请求API List Error:"+t.code+":"+t.msg)},this,null,!0,{isJson:!0})},getToken:function(){return b8e.getQueryString("token")},login:function(e,i,n){if(this._isHuoShu)game.HuoShuSDK.login(i,n);else if(this._isIBearGame)game.IBearGameSDK.login(i,n);else if(this._is4399)game.G4399SDK.login(i,n);else if(this._isQzone)game.QzoneSDK.login(i,n);else{var t={pfid:game.LoginConfig.pfid,detail:{username:e.username,password:e.password}};this.sdkNet.requestData(game.LoginConfig.loginUrl,t,function(e,t){e?(b8e.Toast.launch("登录IO错误",4294901760,0),b8e.error(e)):(0==t.code&&(game.LoginConfig.uid=t.data.uid,game.LoginConfig.channelId=t.data.channel_id,game.LoginConfig.channelName=t.data.channel_name),i.call(n,t.code))},this,null,!0,{isJson:!0})}},logout:function(){this._isHuoShu?b8e.isWeChatGame&&b8e.startup&&b8e.startup.reload():this._isQzone||(this._is4399?game.G4399SDK.logout():null==game.platformName&&b8e.startup.reload())},addShortcut:function(){this._isQzone?game.QzoneSDK.addShortcut():this._isHuoShu&&game.HuoShuSDK.addShortcut()},openInterestTribeUrl:function(){this._isQzone&&game.QzoneSDK.openInterestTribeUrl()},switchAccount:function(){var e=new game.GameAlertInfo;e.alertType=game.GameAlertType.TwoBtn,e.string="是否退出当前帐号",e.isShowTips=!1,game.gameAlert.showAlert(this,this.onSwitchAccount,e)},onSwitchAccount:function(){this._isHuoShu&&game.HuoShuSDK.switchAccount()},focus:function(){this._isHuoShu&&game.HuoShuSDK.focus(function(){game.LoginConfig.isFocus=!0,b8e.evt.dptG(game.ActiveBarEvent.ACTIVE_BAR_CHANGE)})},downloadMicroClient:function(){this._isHuoShu&&game.HuoShuSDK.downloadMicroClient()},share:function(){this._isHuoShu?(b8e.info("huoshu SDK share start"),game.HuoShuSDK.share()):this._isIBearGame?(game.ShareMgr.inst().isBearGameSharing=!0,game.IBearGameSDK.shareGame()):this._is4399?(game.G4399SDK.shareGame(),game.ShareMgr.inst().shareSuccess()):this._isQzone?game.QzoneSDK.showShareMenu():game.ShareMgr.inst().shareSuccess()},pay:function(e){if(b8e.isWeChatGame&&cc.sys.os===cc.sys.OS_IOS){var t=new game.GameAlertInfo;return t.alertType=game.GameAlertType.TwoBtn,t.string="受苹果政策影响，IOS暂未开放充值。请用户换安卓手机登录为该角色充值。",t.isShowTips=!1,void game.gameAlert.showAlert(this,null,t)}this._isPaying?game.notice.show("等待$秒后可继续充值！",[this._remainTime]):(this._remainTime=3,this._isPaying=!0,this._payTimer||(this._payTimer=b8e.Timer.add(this,this.updateRemainTimer,1e3)),this._payTimer.reset(),this._payTimer.start(),this._isQzone?game.QzoneSDK.queryInfoAndPay(e):this.createOrderAndPay(e))},updateRemainTimer:function(){if(this._remainTime<=1&&this._payTimer)return this._remainTime=3,this._isPaying=!1,void this._payTimer.stop();this._remainTime--},createOrderAndPay:function(e){var h=game.mainRole.mainRoleData,c=h.spriteStat.getStatValue(game.SpriteStatType.LV),u=h.vipLevel,t={uid:game.LoginConfig.uid,server_id:game.LoginConfig.serverId,role_id:h.playerId,role_name:h.name,item_id:e.itemId};if(1==game.LoginConfig.pfid){var i=new game.GmCmdShortCut;i.desc="recharge "+e.itemId,i.cmdLine="充值成功",b8e.evt.dptG(game.EquipEvt.GM_UPDATE,{gmData:i}),game.GMSender.gmRequest(i.desc)}else{var n=game.LoginConfig.createOrderUrl;this.sdkNet.requestData(n,t,function(e,t){if(e)b8e.error(e),b8e.Toast.launch("订单IO错误",4294901760);else if(0==t.code){b8e.log(t.msg);var i=t.data,n=i.item_id,s="未知充值项",r="未知描述",o=0,a=game.ccfg.RechargeCfg.getRecharge(n);a&&(s=a.name,o=a.money,r=a.desc);var l={payment_amount:o,game_payorder:i.order_id,object_name:s,desc:r,timestamp:i.order_time,game_area:game.LoginConfig.serverArea,game_server:game.LoginConfig.serverId,role_id:h.playerId,role_level:c,vip_level:u,roleName:h.name,item_id:n};this._isHuoShu?game.HuoShuSDK.pay(l):this._isIBearGame?game.IBearGameSDK.pay(l):this._is4399?game.G4399SDK.pay(l):this._isQzone&&game.QzoneSDK.rechargeCallback(l)}else b8e.Toast.launch("订单Error:"+t.code+":"+t.msg,4294901760),b8e.error("SDK createOrder Error:"+t.code+":"+t.msg)},this,null,!0,{isJson:!0})}},serverChooseLog:function(){this._isHuoShu&&game.HuoShuSDK.serverChooseLog()},enterGameLog:function(){if(this._isHuoShu){var e=game.mainRole.mainRoleData,t=e.spriteStat.getStatValue(game.SpriteStatType.LV),i=e.vipLevel,n=e.getZhanLi(),s={role_id:e.playerId,roleName:e.name,level:t,vip_level:i,area:game.LoginConfig.serverArea,server_id:game.LoginConfig.serverId,is_new:!game.LoginConfig.hasHeroData,score:n};game.HuoShuSDK.enterGameLog(s)}},stepLog:function(e){if(this._isHuoShu){var t={role_id:game.mainRole.mainRoleData.playerId,area:game.LoginConfig.serverArea,server_id:game.LoginConfig.serverId,progress:e.progress};game.HuoShuSDK.stepLog(t)}},createRoleLog:function(){if(this._isHuoShu){var e=game.LoginConfig.heroData,t={role_id:e.id,roleName:e.sceneUnit.player.name,area:game.LoginConfig.serverArea,server_id:game.LoginConfig.serverId};game.HuoShuSDK.createRoleLog(t)}else this._isQzone&&game.QzoneSDK.reportRegister()},loginRoleLog:function(){this._isQzone&&game.QzoneSDK.reportLogin()},levelUpLog:function(){var e=game.mainRole.mainRoleData,t=e.spriteStat.getStatValue(game.SpriteStatType.LV);if(this._isHuoShu){var i=e.getZhanLi(),n=e.vipLevel,s={role_id:e.playerId,roleName:e.name,area:game.LoginConfig.serverArea,server_id:game.LoginConfig.serverId,level:t,role_level_reborn:game.rebirth.rebirthLevel,score:i,vip_level:n};game.HuoShuSDK.levelUpLog(s)}else this._isQzone&&this._isReportLog&&(s={ach_type:1,ach_des:"等级",ach_value:t},game.QzoneSDK.reportUserAchievement(s))},processLog:function(e){if(this._isHuoShu){var t=game.mainRole.mainRoleData,i=t.spriteStat.getStatValue(game.SpriteStatType.LV),n={role_id:t.playerId,roleName:t.name,area:game.LoginConfig.serverArea,server_id:game.LoginConfig.serverId,level:i,process:e.process};game.HuoShuSDK.processLog(n)}},updateFightScoreLog:function(){var e=game.mainRole.mainRoleData,t=e.getZhanLi();if(this._isHuoShu)i={role_id:e.playerId,roleName:e.name,area:game.LoginConfig.serverArea,server_id:game.LoginConfig.serverId,score:t},game.HuoShuSDK.updateFightScoreLog(i);else if(this._isQzone&&this._isReportLog){var i={ach_type:3,ach_des:"战力",ach_value:t};game.QzoneSDK.reportUserAchievement(i)}},sceneLog:function(e){if(this._isHuoShu){var t=game.mainRole.mainRoleData,i=t.spriteStat.getStatValue(game.SpriteStatType.LV),n=t.vipLevel,s=t.getZhanLi(),r={role_id:t.playerId,roleName:t.name,area:game.LoginConfig.serverArea,server_id:game.LoginConfig.serverId,level:i,vip_level:n,score:s,step:e};game.HuoShuSDK.sceneLog(r)}},getCoinRemain:function(){this._isHuoShu&&game.HuoShuSDK.getCoinRemain()},reportLog:function(){this.levelUpLog(),this.updateFightScoreLog(),this._isReportLog=!1},gamePFData:function(){var e=b8e.getQueryString("GPFD");return e?e.split("."):null}}),game.SDKMgr._instance=null,game.SDKMgr._singleton=!0,game.SDKMgr.inst=function(){return null==game.SDKMgr._instance&&(game.SDKMgr._singleton=!1,game.SDKMgr._instance=new game.SDKMgr,game.SDKMgr._singleton=!0),game.SDKMgr._instance},cc._RF.pop()},{}],SXMLHttpRequest:[function(e,t,i){"use strict";cc._RF.push(t,"7f369hZhlBBpZxEeYSGkukY","SXMLHttpRequest");var r=b8e.Object.extends({ctor:function(){r.localRootPath||(r.localRootPath="http://"+b8e.getQueryString("localRootPath")+":8001/"),this._xhr=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},readyState:{get:function(){return this._xhr.readyState}},response:{get:function(){if(!b8e.macro.IS_IOS_TISHEN)return this._xhr.response}},responseText:{get:function(){return this._xhr.responseText}},responseType:{set:function(e){b8e.macro.IS_IOS_TISHEN&&(e="text"),this._xhr.responseType=e},get:function(){return this._xhr.responseType}},responseURL:{get:function(){return this._xhr.responseURL}},responseXML:{get:function(){return this._xhr.responseXML}},status:{get:function(){return this._xhr.status}},statusText:{get:function(){return this._xhr.statusText}},timeout:{set:function(e){this._xhr.timeout=e},get:function(){return this._xhr.timeout}},upload:{get:function(){return this._xhr.upload}},withCredentials:{set:function(e){this._xhr.withCredentials=e},get:function(){return this._xhr.withCredentials}},msCaching:{set:function(e){this._xhr.msCaching=e},get:function(){return this._xhr.msCaching}},abort:function(){this._xhr.abort()},getAllResponseHeaders:function(){return this._xhr.getAllResponseHeaders()},getResponseHeader:function(e){return this._xhr.getResponseHeader(e)},msCachingEnabled:function(){return this._xhr.msCachingEnabled()},open:function(e,t,i,n,s){t=this._getUrl(t),console.log("加载资源路径:  ",t),this._xhr.open(e,t,i,n,s)},_getUrl:function(e){if(b8e.macro.IS_IOS_TISHEN&&b8e.XMLHttpRequest.localFilter){for(var t=void 0,i=0,n=b8e.XMLHttpRequest.localFilter,s=n.length;i<s;i++)if(t=n[i],-1<e.indexOf(t)){e=r.localRootPath+e.substr(b8e.ResMgr.remoteRootDir.length,e.length),console.log("更换为本地路径:"+e);break}return e}return e},overrideMimeType:function(e){this._xhr.overrideMimeType(e)},send:function(e){this._xhr.send(e)},setRequestHeader:function(e,t){this._xhr.setRequestHeader(e,t)},responseBody:{get:function(){return this._xhr.responseBody}},onreadystatechange:{set:function(e){this._xhr.onreadystatechange=e},get:function(){return this._xhr.onreadystatechange}},onload:{set:function(e){this._xhr.onload=e},get:function(){return this._xhr.onload}},onerror:{set:function(e){this._xhr.onerror=e},get:function(){return this._xhr.onerror}},ontimeout:{set:function(e){this._xhr.ontimeout=e},get:function(){return this._xhr.ontimeout}},onabort:{set:function(e){this._xhr.onabort=e},get:function(){return this._xhr.onabort}},onloadend:{set:function(e){this._xhr.onloadend=e},get:function(){return this._xhr.onloadend}},onloadstart:{set:function(e){this._xhr.onloadstart=e},get:function(){return this._xhr.onloadstart}},onprogress:{set:function(e){this._xhr.onprogress=e},get:function(){return this._xhr.onprogress}}});t.exports=r,cc._RF.pop()},{}],ServerConnect:[function(e,t,i){"use strict";cc._RF.push(t,"8339d5vQ05NSoZXpRn1Of+n","ServerConnect"),game.ServerConnect=b8e.BaseProcess.extends({loginServer:null,loginConnected:!1,_loginCmd:null,getState:function(){return game.BaseProcessTypes.SERVER_CONNECT},processHandler:function(e){game.LoadingPage.inst().setProgress(e)},startProcess:function(){this._super(),b8e.log("process:"+game.BaseProcessTypes.SERVER_CONNECT+"开始..."),this._loginCmd||(this._loginCmd=new game.BaseLoginCmd,this._loginCmd.start(),b8e.addNH(game.pbmid.Login.AuthResponse,this._onReceiveGateAuthResponse,this),b8e.addNH(game.pbmid.Login.QryHasRoleResponse,this._onReceiveQryHasRoleResponse,this),b8e.addNH(2,this._onHeartBeatResponse,this)),game.LoginConfig.isSingle?(game.LoginConfig.heroData=null,b8e.log("单机模式..."),this.completeProcess()):(b8e.log("联网模式..."),this.startConnect())},startConnect:function(){if(game.LoginConfig.isReconnect)game.LoginConfig.isReconnected=!0,game.ReconnectMgr.inst().startReconnect();else{game.LoadingPage.inst().show(),game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在连接登录..."),game.LoadingPage.inst().setRefreshState(0),this.setProcessPercent(1,3e3);var e=game.LoginConfig.loginAddr;this.loginServer=b8e.NetMgr.createMgr("login"),this.loginServer.initSocket(),this.loginServer.connectServer(e,0,this._onConnectedToLoginServer,this.onLoginClose,this.onLoginError,this._onReceiveDataFromLoginServer,this)}},onLoginClose:function(){this.loginConnected||(game.LoadingPage.inst().setErrorText("服务器登录关闭！"),this.showAlert("服务器登录关闭，请重新登录！"))},onLoginError:function(){this.loginConnected||(game.LoadingPage.inst().setErrorText("服务器登录错误！"),this.showAlert("服务器登录错误，请重新登录！"))},_onConnectedToLoginServer:function(){game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在请求登录..."),this.loginConnected=!0;var e={token:game.LoginConfig.token,debug:0};this.loginServer.sendString(e)},_onReceiveDataFromLoginServer:function(e){if(0==e.code){game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在连接服务器...");var t=e.addr;game.LoginConfig.secret=e.secret,game.LoginConfig.gateSvrAddr=t,b8e.log("Will connect to gate server: "+t),b8e.net.connectServer(game.LoginConfig.gateSvrAddr,0,this._onConnectedToGateServer,this._onGateConnectionClosed,this._onGateSocketError,null,this)}else{var i="登录服务器错误："+e.msg;b8e.Toast.launch(i,4294901760,0),b8e.error(i)}},_onConnectedToGateServer:function(){game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在请求登录...");var e=game.pbmsg.AuthRequest;e.secret=game.LoginConfig.secret,e.uid=game.LoginConfig.uid,b8e.NetSender.getBytes().writeProtobuf(e);var t=game.pbmid.Login.Auth;b8e.sendN(t)},_onReceiveGateAuthResponse:function(e){var t=e.readProtobuf(game.pbmsg.AuthResponse);if(game.LoginConfig.closedCode=t.code,0!=t.code){var i=game.ccfg.ServerCodeCfg.getDesc(t.code);switch(game.LoginConfig.closedMsg=i,t.code){case 102:b8e.log("重新登录重新登录..."),this.reLogin();break;case 112:default:game.ReconnectMgr.inst().stop(),game.LoginConfig.allowReconnect=!1,this.showAlert(i)}}else{game.LoginConfig.allowReconnect=!0,(i=game.pbmsg.QryHasRoleRequest).zone=game.LoginConfig.serverId,b8e.NetSender.getBytes().writeProtobuf(i);var n=game.pbmid.Login.QryHasRole;b8e.sendN(n),game.HeartBeatMgr.inst().startHeartBeat()}},_onReceiveQryHasRoleResponse:function(e){var t=e.readProtobuf(game.pbmsg.QryHasRoleResponse);if(0==t.code)game.LoginConfig.hasHeroData=t.yes,game.ReconnectMgr.inst().clear(),game.ReconnectMgr.inst().stopCountdown(),t.yes&&game.LoginConfig.isReconnect&&game.ReconnectMgr.inst().reset(),game.LoginConfig.isReLogin=!1,this.completeProcess();else{var i=game.ccfg.ServerCodeCfg.getDesc(t.code);this.showAlert(i)}},showAlert:function(e){var t=new game.BaseGameAlertInfo;t.alertType=game.BaseGameAlertType.OneBtn,t.string=e,t.isShowTips=!1,game.baseGameAlert.showAlert(this,this.onClickBtn,t)},onClickBtn:function(e,t){switch(t){case game.BaseGameAlertBtnType.CONFIRM:case game.BaseGameAlertBtnType.CLOSE:game.sdk.logout()}},_onHeartBeatResponse:function(e){game.HeartBeatMgr.inst().onHeartBeatResponse()},_onGateSocketError:function(){game.LoginConfig.isServerConnectProcessed=this.isProcessed,game.ReconnectMgr.inst().onGateSocketError()},_onGateConnectionClosed:function(){game.LoginConfig.isServerConnectProcessed=this.isProcessed,game.ReconnectMgr.inst().onGateConnectionClosed()},reLogin:function(){game.LoginConfig.isReLogin=!0,game.LoginConfig.isReconnect=!1,game.LoginConfig.allowReconnect=!0,game.ReconnectLoading&&game.ReconnectLoading.inst().hide(),b8e.net.closeConnection(),this.startConnect()}}),cc._RF.pop()},{}],ServerGroupInfo:[function(e,t,i){"use strict";cc._RF.push(t,"3bdd0Y+GAlMD6cgsw/kW3G9","ServerGroupInfo"),game.ServerGroupInfo=b8e.Object.extends({index:0,group_name:0,list:null,ctor:function(){this._super()},setup:function(e){e&&(this.index=e.index,this.group_name=e.group_name,this.list=e.list)}}),cc._RF.pop()},{}],ServerInfo:[function(e,t,i){"use strict";cc._RF.push(t,"2a10fRd4FVG0r3xad732ix8","ServerInfo"),game.ServerInfo=b8e.Object.extends({name:"",id:0,index:0,groupIndex:0,state:0,ctor:function(){this._super(),this.state=game.ZoneStateType.HIDE_ZONE},setup:function(e){e&&(this.index=e.index,this.name=e.name,this.groupIndex=e.groupIndex,this.state=e.state,this.id=e.id)}}),cc._RF.pop()},{}],ServerListView:[function(e,t,i){"use strict";cc._RF.push(t,"c8d9bsREGxHj7rBoY7MJAUo","ServerListView"),game.ServerListView=b8e.SkinWidget.extends({_selectedId:0,_bulletinPanel:null,_zonePanel:null,_bgImg:null,ctor:function(){this._super("base/prefabs/roleLogin/ServerListSkin")},init:function(){var e=game.AppInfo.create("BulletinFontsPanel","base/prefabs/bulletin/BulletinFontsSkin","BulletinFontsSkin","","BulletinFontsSkin",game.AppPosType.MIDDLE_CENTRAL),t=game.AppInfo.getAppInfo(e);this._bulletinPanel=new game.BulletinFontsPanel(t),this._bulletinPanel.setLocalZOrder(1),e=game.AppInfo.create("ZonePanel","base/prefabs/zone/ZoneSkin","ZoneSkin","","ZoneSkin",game.AppPosType.MIDDLE_CENTRAL),t=game.AppInfo.getAppInfo(e),this._zonePanel=new game.ZonePanel(t),this._zonePanel.setLocalZOrder(2)},onShow:function(){this._bgImg||(this._bgImg=b8e.Sprite.get(),this._bgImg.setAnchor(.5,.5),this._bgImg.addToParent(this.skin.bgImg));var e="images/image/loading/bg1.jpg";if(game.IS_HUO_SHU){var t=game.HuoShuSDK.getAppId();"1772"==t?e="images/image/loading/bg3.jpg":this.skin.btn_fanhui.node.active="2038"==t||"2066"==t}else this.skin.btn_fanhui.node.active=!1;this._bgImg.loadTexture(e,null,null,{useManifest:!1}),game.LoadingPage.inst().hide(),this.skin.selectedZoneNode.node.active=!1,this.skin.btn_bulletin.node.active=!1,b8e.evt.onC(this.skin.startBtn.node,this._onClickStartBtn,this),b8e.evt.onC(this.skin.selectedZoneNode.node,this._onClickSelectedZoneNode,this),b8e.evt.onC(this.skin.btn_bulletin.node,this.onClickBulletin,this),b8e.evt.onC(this.skin.btn_fanhui.node,this.switchAccount,this),b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this.onResize),this.onRefresh(),this.onResize(),this.queryAnnouncement()},switchAccount:function(){if(game.IS_HUO_SHU){var e=game.HuoShuSDK.getAppId();if("2038"==e||"2066"==e){var t=new game.BaseGameAlertInfo;t.alertType=game.BaseGameAlertType.TwoBtn,t.string="是否返回至游戏大厅",t.isShowTips=!1,game.baseGameAlert.showAlert(this,this.onSwitchAccount,t)}}},onSwitchAccount:function(e,t){switch(t){case game.BaseGameAlertBtnType.CONFIRM:game.IS_HUO_SHU&&game.HuoShuSDK.switchAccount()}},queryAnnouncement:function(){if("ios_client"!=game.VERSION_NAME&&"72usa6_recharge_client"!=game.VERSION_NAME){var e={uid:game.LoginConfig.uid};game.sdk.sdkNet.requestData(game.LoginConfig.queryAnnouncementListUrl,e,function(e,t){e?(b8e.error(e),b8e.Toast.launch("公告IO错误",4294901760)):t&&0==t.code&&(game.LoginConfig.announcementContents=t.data.list,this.skin.btn_bulletin.node.active=!0,this.onClickBulletin())},this,null,!0,{isJson:!0})}},onHide:function(){b8e.evt.offC(this.skin.startBtn.node,this._onClickStartBtn,this),b8e.evt.offC(this.skin.selectedZoneNode.node,this._onClickSelectedZoneNode,this),b8e.evt.offC(this.skin.btn_bulletin.node,this.onClickBulletin,this),b8e.evt.offC(this.skin.btn_fanhui.node,this.switchAccount,this),b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onResize)},onRefresh:function(){var e=this.data.recommededInfo;e&&(this.skin.selectedZoneNode.node.active=!0,this.onSelected(e.id))},onResize:function(){this.setPosition(.5*(b8e.stageWidth-this.width),.5*(b8e.stageHeight-this.height)),this.skin.bottom.y=.5*(1136-b8e.stageHeight)},_onClickStartBtn:function(){var e=this.data.onSelectServer;e&&e.call(this.data.thisArg,this._selectedId)},_onClickSelectedZoneNode:function(){var e=this.data.serverList;e&&(this._zonePanel.data={serverList:e,recommededInfo:this.data.recommededInfo,onSelected:this.onSelected,thisArg:this},b8e.layer.getGuiLayer().addChild(this._zonePanel))},onSelected:function(e){var t=this.data.serverList;if(t){this._selectedId=e;var i=t.get(this._selectedId);i&&(this.skin.selectedZoneNameLabel.string=i.name,this._updateSelectedZoneState(i))}},onClickBulletin:function(){this._bulletinPanel&&b8e.layer.getGuiLayer().addChild(this._bulletinPanel)},_updateSelectedZoneState:function(e){switch(this.skin.newStateSprite.node.active=!1,this.skin.hotStateSprite.node.active=!1,this.skin.fullStateSprite.node.active=!1,this.skin.defendStateSprite.node.active=!1,this.skin.hideStateSprite.node.active=!1,e.state){case game.ZoneStateType.DEFEND_ZONE:this.skin.defendStateSprite.node.active=!0;break;case game.ZoneStateType.NEW_ZONE:this.skin.newStateSprite.node.active=!0;break;case game.ZoneStateType.HOT_ZONE:this.skin.hotStateSprite.node.active=!0;break;case game.ZoneStateType.FULL_ZONE:this.skin.fullStateSprite.node.active=!0;break;case game.ZoneStateType.HIDE_ZONE:this.skin.hideStateSprite.node.active=!0}},dispose:function(){this._bulletinPanel&&(this._bulletinPanel.release(),this._bulletinPanel=null),this._zonePanel&&(this._zonePanel.release(),this._zonePanel=null),this._super()}}),cc._RF.pop()},{}],ServerList:[function(e,t,i){"use strict";cc._RF.push(t,"4e424pZcwJLOJd3sBPlF9YB","ServerList"),game.ServerList=b8e.BaseProcess.extends({_serverListNet:null,_serverListView:null,_serverList:null,_recommededInfo:null,skinUrl:null,ctor:function(){this._super(),this._serverListNet=b8e.NetMgr.createMgr("serverList")},getState:function(){return game.BaseProcessTypes.SERVER_LIST},processHandler:function(e){game.LoadingPage.inst().setProgress(e)},startProcess:function(){this._super();var e={uid:game.LoginConfig.uid};this._serverListNet.requestData(game.LoginConfig.serverListUrl,e,function(e,t){if(e)b8e.error(e);else if(0==t.code){var i=t.data.all_logged_in;this.setServerListData(t.data),!i||i.length<=0?(game.LoadingPage.inst().show(),game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在加载创角界面..."),this.onSelectServer(t.data.recommended),game.sdk.serverChooseLog()):(game.LoadingPage.inst().show(),game.LoadingPage.inst().setTipText("请稍候，正在进入游戏..."),b8e.log("正在加载选服界面..."),this.skinUrl="base/prefabs/roleLogin/ServerListSkin",b8e.res.loadRes(this.skinUrl,b8e.Prefab,this.onResComplete,this)),this.setProcessPercent(1,3e3)}else{var n="获取服务器列表错误："+t.msg;b8e.Toast.launch(n,4294901760,0)}},this,null,!0,{isJson:!0})},setServerListData:function(e){var t=e.groups,i=e.recommended,n=e.all_logged_in,s=b8e.HashMap.get(),r=b8e.HashMap.get(),o=[],a=0,l=0,h=0;if(t&&t.forEach(function(e){a++,e.list&&e.list.forEach(function(e){l++,e.index=l,e.groupIndex=a,r.set(e.id,e)}),e.index=a;var t=new game.ServerGroupInfo;t.setup(e),s.set(t.index,t)},this),a=0,this._serverList=r,game.ZoneMgr.inst().serverList=r,game.ZoneMgr.inst().serverGroupList=s,this._recommededInfo=null,0<r.count()){var c=r.get(i);c||(c=r.get(r.keys()[0])),this._recommededInfo=c,game.ZoneMgr.inst().curGroup=this._recommededInfo.groupIndex}if(n&&0<n.length){n.forEach(function(e){var t=r.get(e);if(t){h++;var i=new game.ServerInfo;i.setup(t),i.index=h,i.groupIndex=0,o.push(i)}}),-1!=n.indexOf(i)&&(game.ZoneMgr.inst().curGroup=0);var u=new game.ServerGroupInfo;u.index=0,u.group_name="最近登录",u.list=o,s.set(u.index,u)}this._serverListView&&(this._serverListView.data={serverList:this._serverList,recommededInfo:this._recommededInfo,onSelectServer:this.onSelectServer,thisArg:this},this._serverListView.onRefresh())},onSelectServer:function(e){var t={uid:game.LoginConfig.uid,server_id:e};this._serverListNet.requestData(game.LoginConfig.serverSelectUrl,t,function(e,t){if(e)b8e.error(e);else if(0==t.code)game.LoginConfig.serverId=t.data.server_id,game.LoginConfig.serverName=this._serverList.get(t.data.server_id).name,game.LoginConfig.token=t.data.token,game.LoginConfig.loginAddr=t.data.login_addr,this.completeProcess();else{var i=t.msg;b8e.Toast.launch(i,4294901760)}},this,null,!0,{isJson:!0})},onResComplete:function(e,t){this._serverListView||(this._serverListView=new game.ServerListView,this._serverListView.data={serverList:this._serverList,recommededInfo:this._recommededInfo,onSelectServer:this.onSelectServer,thisArg:this},b8e.layer.getGuiLayer().addChild(this._serverListView),game.sdk.serverChooseLog())},completeProcess:function(){this.skinUrl&&(b8e.res.unloadRes(this.skinUrl,this.onResComplete,this),this.skinUrl=null),this._serverListView&&(this._serverListView.removeFromParent(),this._serverListView.release(),this._serverListView=null),this._super()}}),cc._RF.pop()},{}],SinaSDK:[function(e,t,i){"use strict";cc._RF.push(t,"aeddbFGmopPD5l0/dDjQ3Sh","SinaSDK");var n=game.SinaSDK=function(){};n.init=function(){},n.loadScript=function(e){b8e.res.loadScript(e,function(e,t){b8e.info("SDK加载完成："+e),n.sdkInit()},this,!0)},n.sdkInit=function(){},cc._RF.pop()},{}],SystemTimeMgr:[function(e,t,i){"use strict";cc._RF.push(t,"34a5ev0jTZLUJqJE3IxOA7M","SystemTimeMgr"),game.SystemTimeMgr=b8e.Object.extends({_timer:null,curTime:{get:function(){return parseInt(b8e.startup.getServerTime())}},ping:{get:function(){return b8e.startup.getPing()}},unixTime:{get:function(){return parseInt(.001*this.curTime)}},reqServerTime:function(){b8e.startup.reqServerTime(),b8e.sendN(game.pbmid.Login.QryServerTimeRequest)},syncTime:function(){this.reqServerTime(),this._timer||(this._timer=b8e.Timer.add(this,this.reqServerTime,5e3)),this._timer.reset(),this._timer.start()}}),game.SystemTimeMgr._instance=null,game.SystemTimeMgr._singleton=!0,game.SystemTimeMgr.inst=function(){return null==game.SystemTimeMgr._instance&&(game.SystemTimeMgr._singleton=!1,game.SystemTimeMgr._instance=new game.SystemTimeMgr,game.SystemTimeMgr._singleton=!0),game.SystemTimeMgr._instance},game.SysTime=game.SystemTimeMgr.inst(),cc._RF.pop()},{}],ViewModuleMgr:[function(e,t,i){"use strict";cc._RF.push(t,"b7c09ryc8hGsrJv16ZrLod2","ViewModuleMgr"),game.ViewModuleMgr=b8e.Object.extends({name:"ViewModule",_showModules:null,_moduleNode:null,_isShowModule:!1,ctor:function(){if(this._super(),1==game.ViewModuleMgr._singleton)throw new Error("ViewModuleMgr 只能通过单例方法获取")},_initModule:function(){this._moduleNode||(this._moduleNode=b8e.Graphics.get(),this._moduleNode.setAnchor(.5,.5),this._moduleNode.getNode().touchEffectDisabled=!1,this._moduleNode.setLocalZOrder(0),b8e.evt.onC(this._moduleNode,this._onHideView,this))},addModule:function(e){if(e){this._showModules||(this._showModules=[]),this._initModule(),this._showModules.push(e),0==this._isShowModule&&(b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this._onStageResize),b8e.LayerMgr.inst().getGuiLayer().addChild(this._moduleNode),this._onStageResize(),this._isShowModule=!0);var t=e.getLocalZOrder()-1;this._moduleNode.setLocalZOrder(t)}},removeModule:function(e){if(this._showModules){var t=this._showModules.indexOf(e);if(-1<t)if(this._showModules.splice(t,1),this._showModules.length<=0)b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this._onStageResize),this._moduleNode.removeFromParent(),this._isShowModule=!1;else{var i=(e=this._showModules[this._showModules.length-1]).getLocalZOrder()-1;this._moduleNode.setLocalZOrder(i)}}},_onHideView:function(){var e=this._showModules[this._showModules.length-1];e&&e.getModelTouchClose()&&e.removeFromParent()},_onStageResize:function(){if(this._moduleNode){var e=b8e.stageWidth,t=b8e.stageHeight;this._moduleNode.clear(),this._moduleNode.fillColor(3204448256),this._moduleNode.fillRect(0,0,e,t),this._moduleNode.setSize(e,t),this._moduleNode.setPosition(.5*e>>0,.5*t>>0)}},hasShowModule:function(){return 0<this.getShowModuleCount()},getShowModules:function(){return this._showModules},getShowModuleCount:function(){return this._showModules.length}}),game.ViewModuleMgr._instance=null,game.ViewModuleMgr._singleton=!0,game.ViewModuleMgr.inst=function(){return game.ViewModuleMgr._instance||(game.ViewModuleMgr._singleton=!1,game.ViewModuleMgr._instance=new game.ViewModuleMgr,game.ViewModuleMgr._singleton=!0),game.ViewModuleMgr._instance},cc._RF.pop()},{}],ZoneEvents:[function(e,t,i){"use strict";cc._RF.push(t,"cdd8daABGxHZoYSDwsOiXAL","ZoneEvents"),game.ZoneEvents=b8e.Enum({ZONE_SELECT:b8e.Event.nextCode(),SERVER_GROUP_SELECT:b8e.Event.nextCode()}),cc._RF.pop()},{}],ZoneListBookItem:[function(e,t,i){"use strict";cc._RF.push(t,"6b5e7o9ZWtG54AmyWdOOZxd","ZoneListBookItem"),game.ZoneListBookItem=b8e.SkinWidget.extends({info:null,_zoneId:0,_onSelected:null,_onSelectedThis:null,ctor:function(){this._super("base/prefabs/zone/ZoneListBookItemSkin","ZoneListBookItemSkin",null)},getHeight:function(){return 70},getWidth:function(){return 220},show:function(){1!=this.__isShow&&this._super()},hide:function(){1==this.__isShow&&this._super()},onShow:function(){this.info&&(this.setData(this.info),b8e.evt.onC(this,this.onClick,this))},onHide:function(){b8e.evt.offC(this,this.onClick,this),this.skin.img_select.node.active=!1},onClick:function(){game.ZoneMgr.inst().curGroup=this.index,b8e.evt.dptG(game.ZoneEvents.SERVER_GROUP_SELECT)},setData:function(e){if((this.info=e)&&this.skin){this.index=e.index,this.skin.lab_zone_range.string=this.info.group_name;var t=game.ZoneMgr.inst().curGroup;this.index==t?this.skin.img_select.node.active=!0:this.skin.img_select.node.active=!1}}}),cc._RF.pop()},{}],ZoneListItem:[function(e,t,i){"use strict";cc._RF.push(t,"c804bjbC61D/af3SrBytbG4","ZoneListItem"),game.ZoneListItem=b8e.SkinWidget.extends({itemInfo:null,zoneId:0,ctor:function(){this._super("base/prefabs/zone/ZoneListItemSkin","ZoneListItemSkin",null)},getHeight:function(){return 55},getWidth:function(){return 315},show:function(){1!=this.__isShow&&this._super()},hide:function(){1==this.__isShow&&this._super()},onShow:function(){this.itemInfo&&(this.setData(this.itemInfo),b8e.evt.onC(this,this.onClick,this))},onHide:function(){b8e.evt.offC(this,this.onClick,this)},onClick:function(){game.ZoneMgr.inst().curId=this.zoneId,b8e.evt.dptG(game.ZoneEvents.ZONE_SELECT)},setData:function(e){if(e&&(this.itemInfo=e,this.skin)){switch(this.zoneId=this.itemInfo.id,this.skin.defendState.node.active=!1,this.skin.newState.node.active=!1,this.skin.hotState.node.active=!1,this.skin.fullState.node.active=!1,this.skin.hideState.node.active=!1,this.skin.bg_yincang.node.active=!1,this.itemInfo.state){case game.ZoneStateType.DEFEND_ZONE:this.skin.defendState.node.active=!0;break;case game.ZoneStateType.NEW_ZONE:this.skin.newState.node.active=!0;break;case game.ZoneStateType.HOT_ZONE:this.skin.hotState.node.active=!0;break;case game.ZoneStateType.FULL_ZONE:this.skin.fullState.node.active=!0;break;case game.ZoneStateType.HIDE_ZONE:this.skin.hideState.node.active=!0,this.skin.bg_yincang.node.active=!0}this.skin.nameLabel.string=this.itemInfo.name}}}),cc._RF.pop()},{}],ZoneMgr:[function(e,t,i){"use strict";cc._RF.push(t,"3c5bdDlnSZA+I1h3cZPGsqJ","ZoneMgr"),game.ZoneMgr=b8e.Object.extends({name:"ZoneMgr",serverList:null,serverGroupList:null,curGroup:-1,curId:-1,isFirstShow:!1,ctor:function(){if(1==game.ZoneMgr._singleton)throw new Error("ZoneMgr 只能通过单例方法获取");this._super(),this.serverList=b8e.HashMap.get(),this.serverGroupList=b8e.HashMap.get()}}),game.ZoneMgr._instance=null,game.ZoneMgr._singleton=!0,game.ZoneMgr.inst=function(){return game.ZoneMgr._instance||(game.ZoneMgr._singleton=!1,game.ZoneMgr._instance=new game.ZoneMgr,game.ZoneMgr._singleton=!0),game.ZoneMgr._instance},cc._RF.pop()},{}],ZonePanel:[function(e,t,i){"use strict";cc._RF.push(t,"a5598NPVbZAGY0yfJc1fnG8","ZonePanel"),game.ZonePanel=b8e.SkinWidget.extends({_groupList:null,_serverList:null,ctor:function(e){this._super(e.skinName)},onShow:function(){game.ViewModuleMgr.inst().addModule(this),this._groupList||(this._groupList=new b8e.List(this.skin.groupList,game.ZoneListBookItem)),this._groupList.show(),this.showServerGroup(),this._serverList||(this._serverList=new b8e.List(this.skin.serverList,game.ZoneListItem)),this._serverList.show(),this.showServer(),b8e.evt.addG(this,game.ZoneEvents.ZONE_SELECT,this.onItemSelected),b8e.evt.addG(this,game.ZoneEvents.SERVER_GROUP_SELECT,this.onServerGroupSelected),b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this.onStageResize),this.onStageResize()},onRefresh:function(){},getModelTouchClose:function(){return!1},onHide:function(){this._groupList&&this._groupList.hide(),this._serverList&&this._serverList.hide(),b8e.evt.rmvG(this,game.ZoneEvents.ZONE_SELECT,this.onItemSelected),b8e.evt.rmvG(this,game.ZoneEvents.SERVER_GROUP_SELECT,this.onServerGroupSelected),b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onStageResize)},onStageResize:function(){this.setPosition(.5*(b8e.stageWidth-this.width),.5*(b8e.stageHeight-this.height))},closeBtn:function(){game.ViewModuleMgr.inst().removeModule(this),this.removeFromParent()},closeReturnBtn:function(){game.ViewModuleMgr.inst().removeModule(this),this.removeFromParent()},onItemSelected:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.data.onSelected,i=(e=game.ZoneMgr.inst().curId,this.data.thisArg);t&&t.call(i,e),game.ViewModuleMgr.inst().removeModule(this),this.removeFromParent()},onServerGroupSelected:function(){this.showServerGroup(),this.showServer()},showServer:function(){var e,t=game.ZoneMgr.inst().curGroup,i=game.ZoneMgr.inst().serverGroupList.get(t);i&&(!(e=i.list)||e.length<=0||(e.sort(this.onSort),this._serverList.setData(e)))},showServerGroup:function(){if(game.ZoneMgr.inst().serverGroupList){var e=game.ZoneMgr.inst().serverGroupList.values();!e||e.length<=0||(e.sort(this.onSort),this._groupList.setData(e))}},onSort:function(e,t){return e.index-t.index},dispose:function(){game.ViewModuleMgr.inst().removeModule(this),this._groupList&&(this._groupList.release(),this._groupList=null),this._serverList&&(this._serverList.release(),this._serverList=null),this._super()}}),cc._RF.pop()},{}],ZoneStateType:[function(e,t,i){"use strict";cc._RF.push(t,"e9c0cE+rtRDtbUCWBal/Gzx","ZoneStateType"),game.ZoneStateType=b8e.Enum({HIDE_ZONE:0,DEFEND_ZONE:1,NEW_ZONE:2,HOT_ZONE:3,FULL_ZONE:4}),cc._RF.pop()},{}],appIndex:[function(e,t,i){"use strict";cc._RF.push(t,"749bdib6cdLc4tSkNfEvG5X","appIndex"),e("./ViewModuleMgr"),e("./heartBeast/heartBeatIndex"),e("./roleLogin/roleLoginIndex"),e("./bulletin/bulletinIndex"),e("./zone/zoneIndex"),cc._RF.pop()},{"./ViewModuleMgr":"ViewModuleMgr","./bulletin/bulletinIndex":"bulletinIndex","./heartBeast/heartBeatIndex":"heartBeatIndex","./roleLogin/roleLoginIndex":"roleLoginIndex","./zone/zoneIndex":"zoneIndex"}],black8_game_engine:[function(e,t,n){(function(n){"use strict";cc._RF.push(t,"98851A0D6JNRJ2ebAZS+H34","black8_game_engine");var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function r(o,a,l){function h(t,e){if(!a[t]){if(!o[t]){var i="function"==typeof $require&&$require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var s=a[t]={exports:{}};o[t][0].call(s.exports,function(e){return h(o[t][1][e]||e)},s,s.exports,r,o,a,l)}return a[t].exports}for(var c="function"==typeof $require&&$require,e=0;e<l.length;e++)h(l[e]);return h})({1:[function(e,t,i){e("./src/com/black8/sunny/engine/SEngine")},{"./src/com/black8/sunny/engine/SEngine":2}],2:[function(e,t,i){e("./core/SPredefine"),e("./utils/SMacro"),e("./utils/SCommonUtil"),e("./utils/SJsUtil"),e("./core/SClass"),e("./core/SObject"),e("./core/SEnum"),e("./core/SPool"),e("./core/SCallBackData"),e("./utils/SLogger"),e("./utils/SHashMap"),e("./utils/SCallBackUtil"),e("./utils/SInstallUtil"),e("./std/SEndian"),e("./std/SByteArray"),e("./std/SByteBuffer"),e("./events/SEvent"),e("./events/SErrorEvent"),e("./events/SIOErrorEvent"),e("./events/SProgressEvent"),e("./events/STimerEvent"),e("./events/SSceneEvent"),e("./events/SCameraEvent"),e("./events/SEventDispatcher"),e("./utils/SEventUtil"),e("./utils/SColorUtil"),e("./enum/SResolutionPolicy"),e("./enum/SOrientationType"),e("./enum/SRenderType"),e("./enum/SOverflowType"),e("./enum/SHorizontalAlign"),e("./enum/SVerticalAlign"),e("./enum/SSpriteStyle"),e("./enum/SBlendMode"),e("./enum/SPixelFormat"),e("./enum/SDirectionType"),e("./loader/SBinaryLoader"),e("./loader/STextLoader"),e("./core/STicker"),e("./core/STimer"),e("./core/SRecycleBin"),e("./manager/SResMgr"),e("./manager/SObserverMgr"),e("./shader/SColorTransfrom"),e("./shader/SShaderProgram"),e("./display/SBaseDisplay"),e("./display/SGraphics"),e("./display/SStage"),e("./display/SScene"),e("./display/SSprite"),e("./display/SPrefabDisplay"),e("./mvc/control/SBaseControl"),e("./mvc/mgr/SModuleMgr"),e("./display/ui/SLayout"),e("./display/ui/SToggle"),e("./display/ui/SLabel"),e("./display/ui/SEditBox"),e("./display/ui/SWidget"),e("./display/ui/SSkinWidget"),e("./display/ui/SLayoutContainer"),e("./display/ui/SScrollBox"),e("./display/ui/SScrollList"),e("./display/ui/SListItem"),e("./display/ui/SList"),e("./utils/SLayoutUtil"),e("./manager/SLayerMgr"),e("./manager/SSoundMgr"),e("./manager/SSceneMgr"),e("./manager/SNetMgr"),e("./net/SResRequest"),e("./net/SURLLoaderDataFormat"),e("./net/SURLRequestMethod"),e("./net/SURLRequest"),e("./net/SHttpRequest"),e("./net/SURLVariables"),e("./net/SNetContext"),e("./net/SURLLoader"),e("./net/SWebSocket"),e("./net/SSocket"),e("./net/SNetSender"),e("./net/SNetHandler"),e("./assets/SAsset"),e("./assets/SSpriteFrame"),e("./assets/STexture2D"),e("./assets/STextureCache"),e("./assets/SProtobufConfig"),e("./assets/SPrefab"),e("./utils/SToast"),e("./utils/SStringUtil"),e("./utils/STimeUtil"),e("./tween/SEase"),e("./tween/STween"),e("./tween/STweenBasePath"),e("./tween/STweenTo"),e("./tween/STweenWait"),e("./tween/STweenSet"),e("./tween/STweenTick"),e("./tween/STweenItem"),e("./tween/STweenGroup"),e("./utils/SLogReport"),e("./utils/SLocalStorage"),e("./utils/SBufferUtil"),e("./process/SBaseProcess"),e("./process/SProcessGroup"),e("./process/SProcessStateMachine"),e("./utils/SSensitiveWords"),e("./utils/SProtobufUtil"),e("./protobuf/SProtobuf"),e("./data/proto/SVersionConfig"),e("./core/SBaseStartup"),e("./core/SStartup"),e("./core/SStartupForCC"),b8e.VERSION="3.0.2",b8e.COCOS_VERSION="2.3.5",game.VERSION="0.0.0"},{"./assets/SAsset":3,"./assets/SPrefab":4,"./assets/SProtobufConfig":5,"./assets/SSpriteFrame":6,"./assets/STexture2D":7,"./assets/STextureCache":8,"./core/SBaseStartup":9,"./core/SCallBackData":10,"./core/SClass":11,"./core/SEnum":12,"./core/SObject":13,"./core/SPool":14,"./core/SPredefine":15,"./core/SRecycleBin":16,"./core/SStartup":17,"./core/SStartupForCC":18,"./core/STicker":19,"./core/STimer":20,"./data/proto/SVersionConfig":21,"./display/SBaseDisplay":22,"./display/SGraphics":23,"./display/SPrefabDisplay":24,"./display/SScene":25,"./display/SSprite":26,"./display/SStage":27,"./display/ui/SEditBox":28,"./display/ui/SLabel":29,"./display/ui/SLayout":30,"./display/ui/SLayoutContainer":31,"./display/ui/SList":32,"./display/ui/SListItem":33,"./display/ui/SScrollBox":34,"./display/ui/SScrollList":35,"./display/ui/SSkinWidget":36,"./display/ui/SToggle":37,"./display/ui/SWidget":38,"./enum/SBlendMode":39,"./enum/SDirectionType":40,"./enum/SHorizontalAlign":41,"./enum/SOrientationType":42,"./enum/SOverflowType":43,"./enum/SPixelFormat":44,"./enum/SRenderType":45,"./enum/SResolutionPolicy":46,"./enum/SSpriteStyle":47,"./enum/SVerticalAlign":48,"./events/SCameraEvent":49,"./events/SErrorEvent":50,"./events/SEvent":51,"./events/SEventDispatcher":52,"./events/SIOErrorEvent":53,"./events/SProgressEvent":54,"./events/SSceneEvent":55,"./events/STimerEvent":56,"./loader/SBinaryLoader":57,"./loader/STextLoader":58,"./manager/SLayerMgr":59,"./manager/SNetMgr":60,"./manager/SObserverMgr":61,"./manager/SResMgr":62,"./manager/SSceneMgr":63,"./manager/SSoundMgr":64,"./mvc/control/SBaseControl":65,"./mvc/mgr/SModuleMgr":66,"./net/SHttpRequest":67,"./net/SNetContext":68,"./net/SNetHandler":69,"./net/SNetSender":70,"./net/SResRequest":71,"./net/SSocket":72,"./net/SURLLoader":73,"./net/SURLLoaderDataFormat":74,"./net/SURLRequest":75,"./net/SURLRequestMethod":76,"./net/SURLVariables":77,"./net/SWebSocket":78,"./process/SBaseProcess":79,"./process/SProcessGroup":80,"./process/SProcessStateMachine":81,"./protobuf/SProtobuf":82,"./shader/SColorTransfrom":86,"./shader/SShaderProgram":87,"./std/SByteArray":90,"./std/SByteBuffer":91,"./std/SEndian":92,"./tween/SEase":93,"./tween/STween":94,"./tween/STweenBasePath":95,"./tween/STweenGroup":96,"./tween/STweenItem":97,"./tween/STweenSet":98,"./tween/STweenTick":99,"./tween/STweenTo":100,"./tween/STweenWait":101,"./utils/SBufferUtil":102,"./utils/SCallBackUtil":103,"./utils/SColorUtil":104,"./utils/SCommonUtil":105,"./utils/SEventUtil":106,"./utils/SHashMap":107,"./utils/SInstallUtil":108,"./utils/SJsUtil":109,"./utils/SLayoutUtil":110,"./utils/SLocalStorage":111,"./utils/SLogReport":112,"./utils/SLogger":113,"./utils/SMacro":114,"./utils/SProtobufUtil":115,"./utils/SSensitiveWords":116,"./utils/SStringUtil":117,"./utils/STimeUtil":118,"./utils/SToast":119}],3:[function(e,t,i){b8e.Asset=b8e.Object.extends({ctor:function(){this._super()},loadSubRes:function(e,t){},destroy:function(){}})},{}],4:[function(e,t,i){b8e.Prefab=b8e.Asset.extends({ctor:function(){this._super()},setPrefab:function(e,t){this._prefab=e,this._depends=t,this.loadRawAssets()},getPrefab:function(){return this._prefab},loadRawAssets:function(){var t=this;this._rawAssetsLoad||(this._rawAssetsLoad=!0,this._depends.forEach(function(e){-1<e.indexOf("raw-assets")&&b8e.res.loadRes(e,null,t.onRawAssetLoaded,t,null,{useManifest:!1})}))},unloadRawAssets:function(){var t=this;this._rawAssetsLoad&&(this._rawAssetsLoad=!1,this._depends.forEach(function(e){-1<e.indexOf("raw-assets")&&b8e.res.unloadRes(e,t.onRawAssetLoaded,t)}))},onRawAssetLoaded:function(e,t){},destroy:function(){this.unloadRawAssets(),this._prefab=null,this._depends=null,this._super()}})},{}],5:[function(e,t,i){b8e.ProtobufConfig=b8e.Asset.extends({ctor:function(){this._super()},buildMessage:function(e,t,i){this._url=e;var n=i.proto;n=b8e.ProtobufUtil.decodeMessage(this._url,t,n),this._protoData=n},getProtoData:function(){return this._protoData},destroy:function(){this._url=null,this._protoData=null,this._super()}})},{}],6:[function(e,t,i){b8e.SpriteFrame=b8e.Asset.extends({ctor:function(){this._super()},setTexture:function(e,t){this._scale9Inset=t,this._spriteFrame&&(this._spriteFrame.clearTexture(),this._spriteFrame.destroy(),this._spriteFrame=null),e&&(this._spriteFrame=new cc.SpriteFrame,this._spriteFrame.insetTop=t?t.top:0,this._spriteFrame.insetBottom=t?t.bottom:0,this._spriteFrame.insetLeft=t?t.left:0,this._spriteFrame.insetRight=t?t.right:0,e instanceof b8e.Texture2D?this._spriteFrame.setTexture(e.getTexture()):e instanceof cc.Texture2D&&this._spriteFrame.setTexture(e))},setImageData:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=new b8e.Texture2D;if(t)if("jpg"==t.format)s.initWithJpegData(e),this.setTexture(s.getTexture()),i&&i.call(null,this);else if("png"==t.format)s.initWithPngData(e),this.setTexture(s.getTexture()),i&&i.call(null,this);else if("btf"==t.format){var r=this;s.initWithBtfData(e,function(e){r.setTexture(e.getTexture()),i&&i.call(n,r)})}},getFrame:function(){return this._spriteFrame},destroy:function(){this._scale9Inset=null,this._spriteFrame&&(this._spriteFrame.clearTexture(),this._spriteFrame.destroy(),this._spriteFrame=null),this._super()}})},{}],7:[function(e,t,i){var r=b8e.Texture2D=b8e.Asset.extends({ctor:function(){this._super()},setTexture:function(e){this._texture=e},getTexture:function(){return this._texture},initWithImageData:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;if(t)if("jpg"==t.format)this.initWithJpegData(e,i,n);else if("png"==t.format){var s="argb";void 0!==t.channel&&(s=t.channel),this.initWithPngData(e,s,i,n)}else"btf"==t.format&&this.initWithBtfData(e,i,n)},initWithBtfData:function(e){1<arguments.length&&void 0!==arguments[1]&&arguments[1],2<arguments.length&&void 0!==arguments[2]&&arguments[2]},initWithJpegData:function(e){1<arguments.length&&void 0!==arguments[1]&&arguments[1],2<arguments.length&&void 0!==arguments[2]&&arguments[2]},initWithPngData:function(e){1<arguments.length&&void 0!==arguments[1]&&arguments[1],2<arguments.length&&void 0!==arguments[2]&&arguments[2],3<arguments.length&&void 0!==arguments[3]&&arguments[3]},getBitmapData:function(){return this._bitmapData},initWithRawData:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"argb",s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;this._bitmapData=new b8e.BitmapData(e,t,i,s);var r=null;this._texture=new cc.Texture2D;var o=cc.Texture2D.PIXEL_FORMAT_RGBA8888;"argb"==n?(o=cc.Texture2D.PIXEL_FORMAT_RGBA8888,r=this._bitmapData.getPixelsData(n,"argb")):"rgb"==n?(o=cc.Texture2D.PIXEL_FORMAT_RGB888,r=this._bitmapData.getPixelsData(n,"rgb")):"a"==n&&(o=cc.Texture2D.PIXEL_FORMAT_RGB888,r=this._bitmapData.getPixelsData(n,"rgb"));var a=cc.size(t,i);this._texture.initWithData(r.data,o,t,i,a)},destroy:function(){this._texture=null,this._bitmapData&&(this._bitmapData.destroy(),this._bitmapData=null),this._super()}});r.DEFAULT_FORMAT=b8e.PixelFormat.RGBA8888,r._designatedFormatMap=b8e.HashMap.get(),r.setDesignatedFormat=function(e,t){var i=(e=e.replace(/\\/g,"/")).indexOf(".");-1<i&&(e=e.substring(0,i)),r._designatedFormatMap.set(e,t)},r._designatedResFormatMap=b8e.HashMap.get(),r.setResDesignatedFormat=function(e,t){var i=(e=e.replace(/\\/g,"/")).indexOf(".");-1<i&&(e=e.substring(0,i)),r._designatedResFormatMap.set(e,t)},r.getDesignatedFormat=function(e){var t=e.lastIndexOf("."),i=!1;"jpg"==e.substr(t+1,3)&&(i=!0),e=r.getTextureUrl(e);for(var n=void 0,s=0;void 0===n&&-1<s&&void 0===(n=r._designatedFormatMap.get(e))&&-1<(s=e.lastIndexOf("/"));)e=e.substring(0,s);return void 0===n&&(n=r.DEFAULT_FORMAT),i&&(n==b8e.PixelFormat.RGBA8888?n=b8e.PixelFormat.RGB888:n==b8e.PixelFormat.RGBA4444?n=b8e.PixelFormat.RGB565:n==b8e.PixelFormat.RGB5A1&&(n=b8e.PixelFormat.RGB565)),n},r.getTextureUrl=function(e){e=e.replace(/\\/g,"/");var t=b8e.ResMgr.assetsResourcesDir,i=b8e.ResMgr.assetsResDir,n=b8e.ResMgr.assetsRootDir;n&&0==e.indexOf(n)&&(e=e.substr(n.length+1)),0==e.indexOf(t)?e=e.substr(t.length+1):0==e.indexOf(i)&&(e=e.substr(i.length+1));var s=e.indexOf(".");return-1<s&&(e=e.substring(0,s)),e},r.getResUrl=function(e){var t=e.lastIndexOf(".");if(-1<t&&"png"==e.substr(t+1,3)){e=e.substring(0,t);var i=r.getResDesignatedFormat(e);i||(i=b8e.ResMgr.DEFAULT_FORMAT),e=e+"."+i}return e},r.getResDesignatedFormat=function(e){e=r.getTextureUrl(e);var t=r._designatedResFormatMap.get(e);if(!t)for(var i=e,n=i.lastIndexOf("/");!t&&-1<n;)n=(i=i.substring(0,n)).lastIndexOf("/"),t=r._designatedResFormatMap.get(i);return t}},{}],8:[function(e,t,i){var o=b8e.TextureCache={};o.MAX_MEMORY=15e7,o._totalBytes=0,o._detectionStated=!1,o._needGc=!1,function(){if("undefined"!=typeof cc){var e,s=b8e.HashMap.get(),r=b8e.HashMap.get(),t=cc.textureCache._textures;for(var i in t)e=t[i],s.set(i,e),r.set(e,i,o),e.isLoaded()&&o._addTotalBytes(e);cc.textureCache._textures={},o.getTextureForKey=function(e){return e=b8e.Texture2D.getResUrl(e),s.get(e)},o.getKeyByTexture=function(e){return r.get(e,o)},o.removeAllTextures=function(){var e;for(var t in s)(e=s.get(t))&&e.releaseTexture();s.clear(),r.clear(),o._clearTotalBytes()},o.removeTexture=function(e){var t=r.get(e,o);t&&(s.del(t),r.del(e,o),e.isLoaded()&&o._removeTotalBytes(e),e.releaseTexture())},o.removeTextureForKey=function(e){var t=s.get(e);t&&(r.del(t,o),s.del(e),t.isLoaded()&&o._removeTotalBytes(t),t.releaseTexture())},o.cacheImage=function(e,t){if(!s.get(e)){if(t instanceof cc.Texture2D)return s.set(e,t),void r.set(t,e,o);var i=new cc.Texture2D;i.initWithElement(t),i.handleLoadedTexture(),s.set(e,i),r.set(i,e,o)}},o.handleLoadedTexture=function(e){var t=s.get(e);t||(t=new cc.Texture2D,s.set(e,t),r.set(t,e,o),t.url=e),t.handleLoadedTexture(),o._addTotalBytes(t)},o.addImage=function(e,i,n){e=b8e.Texture2D.getResUrl(e);var t=s.get(e);return t?t.isLoaded()?i&&i.call(n,t):t.once("load",function(){i&&i.call(n,t)},n):(t=new cc.Texture2D,s.set(e,t),r.set(t,e,o),t.url=e,b8e.res.loadRes(e,null,function(e,t){if(e)return i&&i.call(n,e||new Error("Unknown error"));i&&i.call(n,t)},o,null,{useManifest:!1})),t},o.getCounter=function(){return s.count()},o.getTotalBytes=function(){return o._totalBytes},o.infoDetection=function(){o._detectionStated||(b8e.Timer.add(o,o._onDetection,1e3,0,-1e3,null,2),o._detectionStated=!0)},o.bitsPerPixelForFormat=function(e){return e._format==b8e.PixelFormat.RGB565?16:e._format==b8e.PixelFormat.RGB5A1?16:e._format==b8e.PixelFormat.RGBA4444?16:e._format==b8e.PixelFormat.RGB888?24:e._format==b8e.PixelFormat.RGBA8888?32:0},o._addTotalBytes=function(e){var t=o.bitsPerPixelForFormat(e),i=e.width*e.height*t/8;o._totalBytes+=i},o._removeTotalBytes=function(e){var t=o.bitsPerPixelForFormat(e),i=e.width*e.height*t/8;o._totalBytes-=i},o._clearTotalBytes=function(){o._totalBytes=0},o._onDetection=function(){o.memoryOverflow()?(b8e.res.purge(o._needGc),o._needGc=!0):o._needGc=!1},o.memoryOverflow=function(){return o._totalBytes>o.MAX_MEMORY},o.dumpInfo=function(){var i=[];s.forEach(function(e,t){i.push({key:e,width:t.width,height:t.height,size:t.width*t.height})},o),i.sort(o._onSortInfo);var t="\n";return i.forEach(function(e){t+=e.key+":"+e.width+"*"+e.height+"\n"},o),t},o._onSortInfo=function(e,t){return e.size>t.size?-1:e.size<t.size?1:0}}}()},{}],9:[function(e,t,i){b8e.BaseStartup=b8e.EventDispatcher.extends({ctor:function(){this._super(),b8e.macro.PROFILER_POSITION={x:5,y:150},b8e.startup=this,b8e.renderType=0,cc._renderType===cc.game.RENDER_TYPE_CANVAS?b8e.renderType=b8e.RenderType.CANVAS:cc._renderType===cc.game.RENDER_TYPE_WEBGL?b8e.renderType=b8e.RenderType.WEBGL:cc._renderType===cc.game.RENDER_TYPE_OPENGL&&(b8e.renderType=b8e.RenderType.OPENGL),b8e.macro.IS_RELEASE=!0,b8e.macro.IS_DEBUG=!b8e.macro.IS_RELEASE,"undefined"!=typeof params?(this._title=void 0!==document.title?document.title:"",b8e.params=params):(this._title="调试预览",b8e.params={}),"undefined"!=typeof extendLib&&(lib.extend=extendLib),b8e.version=b8e.params.version,game.platformName=b8e.params.platformName,b8e.macro.BEFORE_UNLOAD_MSG=null==game.platformName?b8e.macro.BEFORE_UNLOAD_MSG:null;var n=this;b8e.isWeChatGame?(wx.onError(function(e,t){n.onUncaughtException(e,t,"")}),b8e.res.setRemoteRootDir(wxDownloader.REMOTE_SERVER_ROOT)):b8e.macro.IS_RELEASE||b8e.macro.IS_DESKTOP||(window.onerror=function(e,t,i){return n.onUncaughtException(e,t,i),b8e.macro.IS_RELEASE},!b8e.macro.IS_DESKTOP&&b8e.macro.BEFORE_UNLOAD_MSG&&(window.onbeforeunload=function(){return b8e.macro.BEFORE_UNLOAD_MSG}),b8e.res.setRemoteRootDir("http://127.0.0.1:8000"))},init:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;t||(t={width:640,height:1136,minHeight:970}),b8e.ready=!0,cc.director.setDisplayStats(!1),cc.view.adjustViewPort(!0),cc.sys.os!==cc.sys.OS_ANDROID||cc.sys.browserType!==cc.sys.BROWSER_TYPE_UC?cc.view.enableRetina(!0):cc.view.enableRetina(!1),cc.sys.isMobile&&(cc.view.setOrientation(cc.macro.ORIENTATION_AUTO),cc.view.enableAutoFullScreen(!1)),cc.checkGLErrorDebug=function(){},e||(e=cc.Canvas.instance.node),e.setAnchorPoint(0,0),e.setPosition(0,0),cc.game.addPersistRootNode(e),b8e.Pool.init(),b8e.designSize=t;var s=new b8e.Stage;s.addToParent(e),s.setAnchor(0,0),s.setPosition(0,0),b8e.stage=s,b8e.layer=b8e.LayerMgr.inst(),b8e.sound=b8e.SoundMgr.inst(),b8e.SceneMgr.inst().init();var r=b8e.NetMgr.createMgr("main");r.initSocket(b8e.Socket.TYPE_BINARY),b8e.net=r,b8e.net.sub=r.subscribe,b8e.net.req=r.request,b8e.ticker.init(),this.setFrameRate(60),this.activate();var o=this;if(window.hiddenProperty){for(var a=["visibilitychange","mozvisibilitychange","msvisibilitychange","webkitvisibilitychange","qbrowserVisibilityChange"],l=window.hiddenProperty,h=function(e){var t=document[l];(t=t||e&&e.hidden)?o.deactivate():o.activate()},c=0;c<a.length;c++)document.addEventListener(a[c],h,!1);h()}else window.addEventListener("blur",function(){o.deactivate()},!1),window.addEventListener("focus",function(){o.activate()},!1);return-1<navigator.userAgent.indexOf("MicroMessenger")&&(window.onfocus=function(){o.activate()}),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pagehide",function(){o.deactivate()},!1),window.addEventListener("pageshow",function(){o.activate()},!1)),this.setEnableAntiAlias(!0),b8e.TextureCache.infoDetection(),this.engineVersion!=b8e.VERSION?(this.removeLoadingBar(),void b8e.Toast.launch("Game和Black8 Game Engine版本不一致，请检查！\nGame:V"+this.engineVersion+" & Game Engine:V"+b8e.VERSION,4294901760,0)):cc.BLACK8_COCOS_VERSION?b8e.COCOS_VERSION!=cc.BLACK8_COCOS_VERSION?(this.removeLoadingBar(),void b8e.Toast.launch("Game Engine和Black8 Cocos Engine版本不一致，请检查！\nGame Engine:V"+b8e.COCOS_VERSION+" & Cocos Engine:V"+cc.BLACK8_COCOS_VERSION,4294901760,0)):(i&&(this._onInited={callback:i,thisArg:n}),void this.initSettings()):(this.removeLoadingBar(),void b8e.Toast.launch("请使用定制引擎：Black8 Cocos Engine！\n设置：Cocos Creator->偏好设置->原生开发环境->引擎路径",4294901760,0))},start:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;e&&(this._onStarted={callback:e,thisArg:t}),b8e.SceneMgr.inst().updateStageSize(),b8e.sound.init(),b8e.info("游戏名称："+this._title);var i=navigator.appName,n=navigator.appVersion,s=navigator.platform,r=window.location?window.location.href:"";for(var o in b8e.info("浏览器名称："+i),b8e.info("浏览器版本："+n),b8e.info("操作系统："+s),b8e.info("URL："+r),b8e.info("========== params =========="),b8e.params)b8e.info(o+":"+b8e.params[o]);b8e.info("============================"),this.started(null)},initSettings:function(){b8e.version?b8e.res.loadSettings("settings_"+b8e.version+".bsd",function(e){e?(this.dispatchEventWith(b8e.ErrorEvent.ERROR),this.inited(e),b8e.Toast.launch("引擎初始化错误：设置加载失败！",4294901760,0)):(b8e.resVersion=b8e.params.resVersion,game.debugType=b8e.params.debugType,b8e.macro.IS_DEBUG=void 0!==game.debugType?!!game.debugType&&0<game.debugType:b8e.macro.IS_DEBUG,game.VERSION_NAME=b8e.isWeChatGame?b8e.params.wechatVersionName:b8e.params.versionName,this.initVersion())},this):this.initVersion()},initVersion:function(){b8e.resVersion?b8e.res.loadVersionMap("version/"+b8e.resVersion+".bvc",function(e){e?(this.dispatchEventWith(b8e.ErrorEvent.ERROR),this.inited(e),b8e.Toast.launch("引擎初始化错误：版本配置加载失败！",4294901760,0)):this.checkRemote()},this):this.checkRemote()},checkRemote:function(){b8e.res.checkRemote(function(e){b8e.Toast.clear(),e?(this.dispatchEventWith(b8e.ErrorEvent.ERROR),this.inited(e),b8e.Toast.launch("引擎初始化错误：远程校验失败！",4294901760,0)):(this.dispatchEventWith(b8e.Event.COMPLETE),this.inited(null))},this,function(e){b8e.Toast.clear(),b8e.Toast.launch("远程校验失败，\n请确认远程主机可正常访问，\n正在进行重试！",4294901760,0)})},inited:function(e){this._isInited=!0,b8e.EngineExtension&&b8e.EngineExtension.init(),this._onInited&&this._onInited.callback.call(this._onInited.thisArg,e),e&&(this.removeLoadingBar(),b8e.error("引擎初始化错误！"))},isInited:function(){return!!this._isInited},started:function(e){this._isStarted=!0,this._onStarted&&this._onStarted.callback.call(this._onStarted.thisArg,e),e&&b8e.error("引擎运行错误！")},removeLoadingBar:function(){if(cc.sys.isBrowser){var e=document.getElementById("gameLoading");e&&e.parentElement&&e.parentElement.removeChild(e);var t=document.getElementById("splash");t&&t.parentElement&&t.parentElement.removeChild(t)}},setFrameRate:function(e){b8e.ticker.$setFrameRate(e)},activate:function(){b8e.isActivated||(b8e.isActivated=!0,b8e.ticker.activate(),b8e.sound.activate(),this._updateTitle(),cc.game.emit(cc.game.EVENT_SHOW,cc.game))},deactivate:function(){b8e.isActivated&&(b8e.isActivated=!1,b8e.ticker.deactivate(),b8e.sound.deactivate(),this._updateTitle(),cc.game.emit(cc.game.EVENT_HIDE,cc.game))},_updateTitle:function(){b8e.isActivated?void 0!==document.title&&(document.title=this._title):void 0!==document.title&&(document.title=this._title+"[后台]")},initMainScene:function(){var e=b8e.SceneMgr.inst().createScene("main",b8e.layer.getSceneLayer());b8e.SceneMgr.inst().activateScene("main"),e.setSize(b8e.stageWidth,b8e.stageHeight),e.soundEffectsEnabled=!0,b8e.scene=e},setEnableAntiAlias:function(e){this._enableAntiAlias!=e&&(this._enableAntiAlias=e,cc.view.enableAntiAlias(this._enableAntiAlias))},getEnableAntiAlias:function(){return!!this._enableAntiAlias},onUncaughtException:function(e,t,i){b8e.error(e,t,i)},reload:function(){window.location&&"function"==typeof window.location.reload&&window.location.reload()},setTitle:function(e){this._title=e,this._updateTitle()},getTitle:function(){return this._title},addDummyHot:function(e){this._dummyHot||(this._dummyPassword=e,this._hotClickCount=0,this._dummyHot=b8e.BaseDisplay.get(),this._dummyHot.setLocalZOrder(999999990),this._dummyHot.setSize(100,100),b8e.stage.addChild(this._dummyHot),b8e.evt.onC(this._dummyHot,this.onClickDummyHot,this))},removeDummyHot:function(){this._dummyHot&&(this._removeAllHotTouchPoint(),this._hotClickCount=0,b8e.evt.offC(this._dummyHot,this.onClickDummyHot,this),this._dummyHot.release(),this._dummyHot=null)},showHotTouchPoints:function(){if(!this._hotTouchPoints){this._drawValues=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],this._drawPassValue="";var e=b8e.Graphics.get();(this._touchPointBg=e).lineWidth(10),e.strokeColor(4278255360),e.setLocalZOrder(999999999),b8e.stage.addChild(e),this._drawPassPoints=[],this._hotTouchPoints=[];for(var t=0,i=0,n=0;n<16;n++)t=n%4*600/4,i=600-600*(n/4>>0)/4,this._addHotTouchPoint(t,i)}},_addHotTouchPoint:function(e,t){var i=b8e.Graphics.get();i.setLocalZOrder(999999999),i.setSize(50,50),i.fillColor(4278190335),i.fillCircle(25,25,25),b8e.stage.addChild(i),i.setPosition(e,t),this._hotTouchPoints.push(i),b8e.evt.onC(i,this.onClickDummyHot,this)},_removeAllHotTouchPoint:function(){this._hotTouchPoints&&(this._hotTouchPoints.forEach(function(e){b8e.evt.offC(e,this.onClickDummyHot,this),e.release()},this),this._hotTouchPoints.length=0,this._hotTouchPoints=null,this._touchPointBg.release(),this._touchPointBg=null)},onClickDummyHot:function(e){var t=e.target;if(t)if(t===this._dummyHot)8<=++this._hotClickCount&&this.showHotTouchPoints();else if(this._hotTouchPoints){var i=t,n=this._hotTouchPoints.indexOf(i);if(-1<n&&this._drawPassPoints.indexOf(i)<0){this._drawPassValue+=this._drawValues[n],i.clear(),i.fillColor(4278255360),i.fillCircle(25,25,25),this._drawPassPoints.push(i),this._touchPointBg.clear();for(var s=this._drawPassPoints.length,r=0;r<s;r++){var o=this._drawPassPoints[r];0==r?this._touchPointBg.moveTo(o.x+25,o.y+25):this._touchPointBg.lineTo(o.x+25,o.y+25),r==s-1&&this._touchPointBg.stroke()}b8e.log(this._drawPassValue),this._drawPassValue==this._dummyPassword&&(this.removeDummyHot(),b8e.evt.dptG("clickDummyHot"))}}},_lastReqTime:0,_lastSyncTime:0,_lastLocalTime:0,_ping:0,reqServerTime:function(){this._lastReqTime=b8e.getTimer()},fountErrorTime:!1,lastServerTime:0,setServerTime:function(e,t){if(0<this._lastReqTime){this._lastLocalTime=b8e.getTimer();var i=this._lastLocalTime-t;this._ping=.5*(this._lastLocalTime-this._lastReqTime-i);var n=e+i;if(n<this._lastSyncTime&&!this.fountErrorTime)return b8e.warn("当前serverTime",e," | 上次serverTime",this.lastServerTime,"| dt: ",i,"| msgTime:",t),void(this.fountErrorTime=!0);this.lastServerTime=e,this._lastSyncTime=n}},getServerTime:function(){var e=0;if(0==this._lastSyncTime)e=Date.now();else{var t=b8e.timeStamp-this._lastLocalTime;e=this._lastSyncTime+t}return e},getPing:function(){return this._ping}})},{}],10:[function(e,t,i){var n=b8e.CallBackData=b8e.Object.extends({_isRecycled:!1,_isDisposed:!1,ctor:function(){this.constructor===n&&(n.poolCall||b8e.warn("强烈建议用engine.CallBackData.get代替new操作！")),this._isRecycled=!1,this._isDisposed=!1},usable:{get:function(){return!this._isRecycled&&!this._isDisposed}},isRecycled:{get:function(){return this._isRecycled}},isDisposed:{get:function(){return this._isDisposed}},clear:function(){this.callback=null,this.thisArg=null,this.args=null,this.data=null},restore:function(){this._isRecycled=!1,this.clear()},recycle:function(){this.clear(),this._isRecycled=!0},release:function(){this.constructor===n?n.put(this):this.destroy()},dispose:function(){this._isRecycled=!1,this._isDisposed=!0},destroy:function(){this.constructor===n&&(n.poolCall||b8e.warn("强烈建议用engine.CallBackData.put或release代替destroy操作！")),this.recycle(),this.dispose()}});n.pool=new b8e.Pool(n,4096),n.get=function(){return n.pool.get()},n.put=function(e){return n.pool.put(e)}},{}],11:[function(e,t,i){var _,p,m="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)};b8e.__extends=function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},b8e.__define=b8e.__define||function(e,t,i,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:i,set:n})},b8e.registerProperty=function(e,t,i,n){var s=e.prototype;s.__meta__=s.__meta__||{},s.__meta__[t]=i,n&&(s.__defaultProperty__=t)},b8e.defineGetterSetter=function(e,t,i,n,s,r){if(e.__defineGetter__)i&&e.__defineGetter__(t,i),n&&e.__defineSetter__(t,n);else{if(!Object.defineProperty)throw new Error("browser does not support getters");var o={enumerable:!1,configurable:!0};i&&(o.get=i),n&&(o.set=n),Object.defineProperty(e,t,o)}if(!s&&!r)for(var a=void 0!==i,l=void 0!==n,h=Object.getOwnPropertyNames(e),c=0,u=h.length;c<u;c++){var d=h[c];if((e.__lookupGetter__?!e.__lookupGetter__(d):!Object.getOwnPropertyDescriptor(e,d))&&"function"==typeof e[d]){var f=e[d];if(a&&f===i&&(s=d,!l||r))break;if(l&&f===n&&(r=d,!a||s))break}}var g=e.constructor;s&&(g.__getters__||(g.__getters__={}),g.__getters__[s]=t),r&&(g.__setters__||(g.__setters__={}),g.__setters__[r]=t)},b8e.clone=function(e){var t=e.constructor?new e.constructor:{};for(var i in e){var n=e[i];n&&"object"===(void 0===n?"undefined":m(n))?t[i]=b8e.clone(n):t[i]=n}return t},b8e.inject=function(e,t){for(var i in e)t[i]=e[i]},b8e.ClassMgr={isDebug:!1,objHash:0,clsHash:0,instHash:0,funcHash:0,instHashByThis:{},funcHashByInst:{},hashCode:0,getObjHash:function(){return++this.objHash},getClsHash:function(){return++this.clsHash},getFuncHash:function(e){var t;return e?((t=this.funcHashByInst[e])||(t=this.funcHashByInst[e]=0),this.funcHashByInst[e]=++t):(t=this.funcHash,this.funcHash=++t)},getInstHash:function(e){var t;return e?((t=this.instHashByThis[e])||(t=this.instHashByThis[e]=0),this.instHashByThis[e]=++t):(t=this.instHash,this.instHash=++t)},getHashCode:function(){return++this.hashCode},dumpInfo:function(){var e="";if(b8e.ClassMgr.isDebug){var t=[];(t=(t=(t=t.concat(this._dumpDefinitionInfo(b8e))).concat(this._dumpDefinitionInfo(game))).concat(this._dumpDefinitionInfo(lib))).sort(this._onSortInfo);for(var i=t.length,n=0;n<i;n++)e+=t[n].info}return e},_onSortInfo:function(e,t){return e.maxCost>t.maxCost?-1:e.maxCost<t.maxCost?1:e.cost>t.cost?-1:e.cost<t.cost?1:e.callCount>t.callCount?-1:e.callCount<t.callCount?1:e.instCount>t.instCount?-1:e.instCount<t.instCount?1:0},_dumpDefinitionInfo:function(e){var t=[];for(var i in e){var n=e[i];if("function"==typeof n&&n.__clsHash){void 0===n.__instCount&&(n.__instCount=0);var s=n.__props;for(var r in s){var o=s[r];if("function"==typeof o)this._dumpPushInfo(t,e,n,o,i,r);else if(null!=o&&"object"===(void 0===o?"undefined":m(o))){var a=o.get,l=o.set;"function"!=typeof a&&(a=null),"function"!=typeof l&&(l=null),a&&this._dumpPushInfo(t,e,n,a,i,r+"(getter)"),l&&this._dumpPushInfo(t,e,n,l,i,r+"(setter)")}}}}return t},_dumpPushInfo:function(e,t,i,n,s,r){var o="\n";void 0===n.__cost&&(n.__cost=0,n.__maxCost=0,n.__callCount=0),o+="Max Cost:"+n.__maxCost.toFixed(2)+"ms ",o+="Cost:"+n.__cost.toFixed(2)+"ms ",o+="Call Count:"+n.__callCount+" ",o+="Inst Count:"+i.__instCount+" ",o+="@",o+=t.ns+"."+s+":"+r,e.push({cost:n.__cost,maxCost:n.__maxCost,callCount:n.__callCount,instCount:i.__instCount,info:o})}},p={writable:!0,enumerable:!(_=/\b_super\b/),configurable:!0},b8e.Class=function(){},b8e.Class.extends=function(e){var o=this.prototype,i=Object.create(o),t=function e(){this.__objHash=b8e.ClassMgr.getObjHash(),"function"==typeof this.ctor&&(b8e.ClassMgr.isDebug&&(void 0===e.__instCount&&(e.__instCount=0),e.__instCount++),this.ctor.apply(this,arguments))};t.__clsHash=b8e.ClassMgr.getClsHash(),t.__props=e,p.value=b8e.ClassMgr.getHashCode(),Object.defineProperty(i,"__pid",p),t.prototype=i,p.value=t,Object.defineProperty(i,"constructor",p);for(var n=0,s=arguments.length;n<s;++n){var r=arguments[n];for(var a in r){var l=r[a],h=!1,c=null;if("function"==typeof l)h="function"==typeof o[a],c=_.test(l),h&&c?p.value=function(s,r){return function(){var e,t=this._super;if(this._super=o[s],b8e.ClassMgr.isDebug){var i=b8e.getTimer();e=r.apply(this,arguments);var n=b8e.getTimer()-i;r.__cost=n,(void 0===r.__maxCost||n>r.__maxCost)&&(r.__maxCost=n),void 0===r.__callCount&&(r.__callCount=0),r.__callCount++}else e=r.apply(this,arguments);return this._super=t,e}}(a,l):b8e.ClassMgr.isDebug?p.value=function(e,n){return function(){var e=b8e.getTimer(),t=n.apply(this,arguments),i=b8e.getTimer()-e;return n.__cost=i,(void 0===n.__maxCost||i>n.__maxCost)&&(n.__maxCost=i),void 0===n.__callCount&&(n.__callCount=0),n.__callCount++,t}}(0,l):p.value=l,Object.defineProperty(i,a,p);else if(null!=l&&"object"===(void 0===l?"undefined":m(l))){var u=l.get,d=l.set;if("function"!=typeof u&&(u=null),"function"!=typeof d&&(d=null),u){i.__getters__||(i.__getters__={});var f=o.__getters__?o.__getters__[a]:null;h=f&&"function"==typeof f,c=_.test(u),h&&c?u=function(e,s){return function(){var e,t=this._super;if(this._super=f,b8e.ClassMgr.isDebug){var i=b8e.getTimer();e=s.apply(this,arguments);var n=b8e.getTimer()-i;s.__cost=n,(void 0===s.__maxCost||n>s.__maxCost)&&(s.__maxCost=n),void 0===s.__callCount&&(s.__callCount=0),s.__callCount++}else e=s.apply(this,arguments);return this._super=t,e}}(0,u):b8e.ClassMgr.isDebug&&(u=function(e,n){return function(){var e=b8e.getTimer(),t=n.apply(this,arguments),i=b8e.getTimer()-e;return n.__cost=i,(void 0===n.__maxCost||i>n.__maxCost)&&(n.__maxCost=i),void 0===n.__callCount&&(n.__callCount=0),n.__callCount++,t}}(0,u)),i.__getters__[a]=u,b8e.JsUtil.defineGetAccessor(i,a,u,!!d,!!d)}if(d){i.__setters__||(i.__setters__={});var g=o.__setters__?o.__setters__[a]:null;h=g&&"function"==typeof g,c=_.test(d),h&&c?d=function(e,s){return function(){var e,t=this._super;if(this._super=g,b8e.ClassMgr.isDebug){var i=b8e.getTimer();e=s.apply(this,arguments);var n=b8e.getTimer()-i;s.__cost=n,(void 0===s.__maxCost||n>s.__maxCost)&&(s.__maxCost=n),void 0===s.__callCount&&(s.__callCount=0),s.__callCount++}else e=s.apply(this,arguments);return this._super=t,e}}(0,d):b8e.ClassMgr.isDebug&&(d=function(e,n){return function(){var e=b8e.getTimer(),t=n.apply(this,arguments),i=b8e.getTimer()-e;return n.__cost=i,(void 0===n.__maxCost||i>n.__maxCost)&&(n.__maxCost=i),void 0===n.__callCount&&(n.__callCount=0),n.__callCount++,t}}(0,d)),i.__setters__[a]=d,b8e.JsUtil.defineSetAccessor(i,a,d,!!u,!!u)}u||d||b8e.error("类成员"+a+"定义不能用于初始化复合数据类型！")}else p.value=l,Object.defineProperty(i,a,p)}}return t.extends=b8e.Class.extends,t.implements=function(e){for(var t in e)i[t]=e[t]},t}},{}],12:[function(e,t,i){b8e.Enum=function(e){if("__enums__"in e)return e;b8e.JsUtil.defineValue(e,"__enums__",null,!0);for(var t=-1,i=Object.keys(e),n=0;n<i.length;n++){var s=i[n],r=e[s];if(-1===r)r=++t,e[s]=r;else if("number"==typeof r)t=r;else if("string"==typeof r&&Number.isInteger(parseFloat(s)))continue;var o=""+r;s!==o&&b8e.JsUtil.defineValue(e,o,s)}return e},b8e.Enum.isEnum=function(e){return e&&e.hasOwnProperty("__enums__")},b8e.Enum.getList=function(e){if(e.__enums__)return e.__enums__;var t=e.__enums__=[];for(var i in e){var n=e[i];Number.isInteger(n)&&t.push({name:i,value:n})}return t.sort(function(e,t){return e.value-t.value}),t}},{}],13:[function(e,t,i){b8e.Object=b8e.Class.extends({ctor:function(){},objHash:function(){return this.__objHash},getClass:function(){return this.constructor}}),b8e.Object.create=function(){return new b8e.Object}},{}],14:[function(e,t,i){var a=b8e.Pool=b8e.Object.extends({ctor:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;if(this._super(),"number"==typeof t){if((!b8e.macro.IS_DEBUG||this.assert(e))&&(this._ctor=e,this.count=0,this._pool=new Array(t),this._cleanupFunc=n,this._cleanupThis=s,i))if(a.isInited)for(var r=0;r<t;r++){var o=this.get();this.put(o)}else a.preCreates.push(this)}else b8e.error("对象池必须设置容量！")},get:function(e,t,i,n,s){if(0<this.count){--this.count;var r=this._pool[this.count];return r.poolHash++,r.restore.apply(r,arguments),this._pool[this.count]=null,r._isRecycled=!1,r}if(this._ctor){this._ctor.poolCall=!0;var o=null;switch(arguments.length){case 0:o=new this._ctor;break;case 1:o=new this._ctor(e);break;case 2:o=new this._ctor(e,t);break;case 3:o=new this._ctor(e,t,i);break;case 4:o=new this._ctor(e,t,i,n);break;case 5:o=new this._ctor(e,t,i,n,s)}return this._ctor.poolCall=!1,o.poolHash=1,o._isDisposed=!1,o._isRecycled=!1,o}return null},put:function(e){return e.__proto__!==this._ctor.prototype?(b8e.error("回收对象类型与原型不一致！"),null):b8e.macro.IS_DEBUG&&!this.assert(e.constructor)?null:this.count<this._pool.length?e._isDisposed?(b8e.error("不能回收已被销毁的对象！"),null):e._isRecycled?(b8e.error("不能回收已被回收的对象！"),null):this._cleanupFunc&&!1===this._cleanupFunc.call(this._cleanupThis,e)?null:(e.recycle(),e._isRecycled=!0,this._pool[this.count]=e,++this.count,e):(e.constructor.poolCall=!0,e.destroy(),e._isRecycled=!1,e._isDisposed=!0,e.poolHash=0,e.constructor.poolCall=!1,null)},assert:function(e){if(!e)return b8e.error("对象池对象构造不能为空！"),!1;var t=e.prototype;return"function"!=typeof t.restore?(b8e.error("对象使用对象池时必须实现restore方法！"),!1):"function"!=typeof t.recycle?(b8e.error("对象使用对象池时必须实现recycle方法！"),!1):"function"!=typeof t.dispose?(b8e.error("对象使用对象池时必须实现dispose方法！"),!1):"function"!=typeof t.destroy?(b8e.error("对象使用对象池时必须实现destroy方法！"),!1):"function"!=typeof t.release?(b8e.error("对象使用对象池时必须实现release方法！"),!1):void 0===t._isDisposed?(b8e.error("对象使用对象池时必须包含_isDisposed属性！"),!1):void 0!==t._isRecycled||(b8e.error("对象使用对象池时必须包含_isRecycled属性！"),!1)},resize:function(e){if(0<=e&&this.count>e){for(var t=this.count-1;e-1<t;){var i=this._pool[t];this._pool[t]=null,i.constructor.poolCall=!0,i.destroy(),i._isRecycled=!1,i._isDisposed=!0,i.poolHash=0,i.constructor.poolCall=!1,t--}this._pool.length=e,this.count=e}}});a.preCreates=[],a.isInited=!1,a.init=function(){a.preCreates.forEach(function(e){for(var t,i=e._pool.length-e.count,n=[],s=0;s<i;s++)t=e.get(),n.push(t);for(var r=n.length,o=0;o<r;o++)t=n[o],e.put(t);n.length=0,n=null},a),a.preCreates.length=0,a.isInited=!0}},{}],15:[function(e,t,i){(function(s){var r=null,o=null,a=null;(r=r||{}).ns="engine",(o=o||{}).ns="game",(a=a||{}).ns="lib",function(){"undefined"==typeof window?(s.window={},window.setTimeout=setTimeout,window.clearTimeout=clearTimeout,"undefined"==typeof document&&(s.document={}),s.engine=r,s.b8e=r,s.game=o,s.lib=a):(void 0===s&&(window.global={}),"undefined"==typeof document&&(window.document={}),window.engine=r,window.b8e=r,window.game=o,window.lib=a),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},window.cancelAnimFrame=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||function(e){window.clearTimeout(e)};var e=null;if(void 0!==document.hidden?e="hidden":void 0!==document.mozHidden?e="mozHidden":void 0!==document.msHidden?e="msHidden":void 0!==document.webkitHidden&&(e="webkitHidden"),window.hiddenProperty=e,window.isNaN=function(e){return(e=+e)!==e},window.performance||(window.performance={}),!window.performance.now){var t=Date.now();window.performance.timing&&window.performance.timing.navigationStart&&(t=window.performance.timing.navigationStart),window.performance.now=function(){return Date.now()-t}}engine.getXHR=function(){return engine.XMLHttpRequest?new engine.XMLHttpRequest:window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},"undefined"!=typeof cc&&(engine.isMobile=cc.sys.isMobile,engine.isWeChatGame=cc.sys.platform===cc.sys.WECHAT_GAME);var i=void 0;i=engine.isWeChatGame?function(){return Date.now()}:function(){return window.performance.now()};var n=(engine.getNow=i)();engine.getTimer=function(){return i()-n},engine.timeStamp=engine.getTimer(),engine.isActivated=!1,engine.proto={},window.performance.mark||(window.performance.mark=function(){}),window.performance.measure||(window.performance.measure=function(){}),window.performance.memory||(window.performance.memory={usedJSHeapSize:0,totalJSHeapSize:0,jsHeapSizeLimit:0})}(),engine.startup=null,engine.stage=null,engine.stageWidth=0,engine.stageHeight=0,engine.frameRate=60,engine.settings={},engine.ccSettings={},engine.protocol="http:",engine.updateSettings=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(e||(e=window._CCSettings),window._CCSettings=void 0,!e.debug){var t=e.uuids,i=e.rawAssets,n=e.assetTypes,s=e.rawAssets={};for(var r in i){var o=i[r],a=s[r]={};for(var l in o){var h=o[l],c=h[1];"number"==typeof c&&(h[1]=n[c]),a[t[l]||l]=h}}for(var u=e.scenes,d=0;d<u.length;++d){var f=u[d];"number"==typeof f.uuid&&(f.uuid=t[f.uuid])}var g=e.packedAssets;for(var _ in g)for(var p=g[_],m=0;m<p.length;++m)"number"==typeof p[m]&&(p[m]=t[p[m]])}var b=b8e.ResMgr.assetsRootDir?b8e.ResMgr.assetsRootDir+"/":"";return cc.AssetLibrary.init({libraryPath:b+"res/import",rawAssetsBase:b+"res/raw-",rawAssets:e.rawAssets,packedAssets:e.packedAssets,md5AssetsMap:e.md5AssetsMap}),e},engine.run=function(){var e=engine.updateSettings();"undefined"!=typeof wxDownloader&&(wxDownloader.REMOTE_SERVER_ROOT=params.remoteServerRoot,wxDownloader.SUBCONTEXT_ROOT=params.subcontextRoot);var i=void 0;cc.sys.isBrowser&&(i=document.getElementById("GameCanvas"));var t={id:"GameCanvas",scenes:e.scenes,debugMode:e.debug?cc.DebugMode.INFO:cc.DebugMode.ERROR,showFPS:e.debug,frameRate:60,jsList:[],groupList:e.groupList,collisionMatrix:e.collisionMatrix,renderMode:0};cc.game.run(t,function(){var t=e.launchScene;cc.runtime&&cc.director.setRuntimeLaunchScene(t),cc.director.loadScene(t,null,function(){if(cc.sys.isBrowser){i.style.visibility="";var e=document.getElementById("GameDiv");e&&(e.style.backgroundImage="")}cc.loader.onProgress=null,console.log("Success to load scene: "+t)})})},engine.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i");if(window.location&&window.location.search){var i=window.location.search.substr(1).match(t);if(i)return decodeURIComponent(i[2])}return null},engine.getProtocol=function(){return b8e.isWeChatGame?"https:":window.location&&window.location.protocol?window.location.protocol:b8e.protocol},engine.getHostName=function(){return window.location&&window.location.hostname?window.location.hostname:""},engine.transformContainer=function(e){if(!cc.view)return e;var t,i,n=document.getElementsByTagName("html")[0],s=((i=cc.game.frame)&&i!==n?i.clientWidth:window.innerWidth)>=((t=cc.game.frame)&&t!==n?t.clientHeight:window.innerHeight);cc.container.style["-webkit-transform-origin"]="0px 0px 0px",cc.container.style.transformOrigin="0px 0px 0px",cc.container.style.padding="0px";var r=cc.view._frameSize.width,o=cc.view._frameSize.height;return e?(cc.container.style["-webkit-transform"]="rotate(90deg)",cc.container.style.transform="rotate(90deg)",cc.container.style.margin="0 0 0 "+o+"px",!0):s?b8e.settings.orientation===b8e.OrientationType.PORTRAIT||b8e.settings.orientation===b8e.OrientationType.PORTRAIT_UPSIDE_DOWN?(cc.container.style["-webkit-transform"]="rotate(90deg)",cc.container.style.transform="rotate(90deg)",cc.container.style.margin="0 0 0 "+o+"px",!0):b8e.settings.orientation===b8e.OrientationType.PORTRAIT_UPSIDE_UP?(cc.container.style["-webkit-transform"]="rotate(-90deg)",cc.container.style.transform="rotate(-90deg)",cc.container.style.margin=r+"px 0 0 0",!0):(cc.container.style["-webkit-transform"]="rotate(0deg)",cc.container.style.transform="rotate(0deg)",!(cc.container.style.margin="0px")):(cc.container.style["-webkit-transform"]="rotate(0deg)",cc.container.style.transform="rotate(0deg)",!(cc.container.style.margin="0px"))},engine.convertToLocationInView=function(e,t,i){var n=cc.view._devicePixelRatio*(e-i.left),s=cc.view._devicePixelRatio*(i.top+i.height-t);return cc.view._isRotated?b8e.settings.orientation===b8e.OrientationType.PORTRAIT_UPSIDE_UP?{x:s,y:cc.view._viewPortRect.height-n}:{x:cc.view._viewPortRect.width-s,y:n}:{x:n,y:s}},engine.focusOnMobile=function(){},engine.endEditOnMobile=function(){}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,i){b8e.RecycleBin=b8e.Object.extends({ctor:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this._super(),this._recycles=[],this._purges=[],this._recycleMap=b8e.HashMap.get(),0<e?b8e.Timer.add(this,this.onTimer,1e3,0,-2e3,null,2):e=0,this._recycleDelay=e},onTimer:function(){for(var e,t=b8e.timeStamp,i=this._recycles.length-1;0<=i;i--){var n=this._recycles[i];if(t>=n.recycleTime&&(e=!0,this._destroyObjCallback&&void 0===(e=this._destroyObjCallback.apply(this._destroyObjThisArg,n.args))&&(e=!0),e)){this._recycleMap.del(n.key),this._recycles.splice(i,1);var s=this._purges.indexOf(n);-1<s&&this._purges.splice(s,1)}}},restore:function(e,t){if(void 0===t||Array.isArray(t)){var i=this._recycleMap.get(e);if(i){this._recycleMap.del(e);var n=this._recycles.indexOf(i);-1<n&&this._recycles.splice(n,1),-1<(n=this._purges.indexOf(i))&&this._purges.splice(n,1),this._restoreObjCallback&&this._restoreObjCallback.apply(this._restoreObjThisArg,t)}}else b8e.error("args必须是Array类型！")},recycle:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(void 0===t||Array.isArray(t))if(this._recycleMap.get(e))b8e.warn("重复回收无效！");else{var n=i;0==i&&0==(i=this._recycleDelay)&&(i=100),(this._isGc||this._isPurge&&n<=0)&&(i=0);var s=null,r=0,o=0;if(0<i){s={};var a=b8e.timeStamp;r=n+a,o=i+a}else if(i<=0&&this._destroyObjCallback){var l=this._destroyObjCallback.apply(this._destroyObjThisArg,t);void 0===l&&(l=!0),l||(s={},o=r=0)}s&&(s.key=e,s.args=t,s.specifyTime=r,s.recycleTime=o,this._recycleMap.set(e,s),this._recycles.push(s))}else b8e.error("args必须是Array类型！")},purge:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._isPurge=!0,this._isGc=e,this._purges.length=0;for(var t=b8e.timeStamp,i=this._recycles.length,n=0;n<i;n++){var s=this._recycles[n];(e||t>=s.specifyTime)&&(s.recycleTime=0,this._purges.push(s))}0<this._purges.length?this._isBatch||(this._isBatch=!0,b8e.setTimeout(this._nextPurge,this,20)):(this._isPurge=!1,this._isGc=!1)},_nextPurge:function(){var e=this._purges.length;if(0<e){var t=this._purges[e-1],i=!0;if(this._destroyObjCallback&&void 0===(i=this._destroyObjCallback.apply(this._destroyObjThisArg,t.args))&&(i=!0),i){this._recycleMap.del(t.key);var n=this._recycles.indexOf(t);-1<n&&this._recycles.splice(n,1),-1<(n=this._purges.indexOf(t))&&this._purges.splice(n,1)}}this._isBatch=!1,0<this._purges.length?(this._isBatch=!0,b8e.setTimeout(this._nextPurge,this,20)):(this._isPurge=!1,this._isGc=!1)},onRestoreObject:function(e,t){this._restoreObjCallback=e,this._restoreObjThisArg=t},onDestroyObject:function(e,t){this._destroyObjCallback=e,this._destroyObjThisArg=t}})},{}],17:[function(e,t,i){b8e.Startup=b8e.BaseStartup.extends({ctor:function(){this._super()},run:function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"gameCanvas",t=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=this;cc.game.run({debugMode:b8e.macro.IS_DEBUG?1:0,noCache:!1,showFPS:!1,frameRate:60,id:e,renderMode:t,engineDir:"./src/cocos2d_engine",modules:["cocos2d"],jsList:[]},function(){!cc.sys.isNative&&document.getElementById("cocosLoading")&&document.body.removeChild(document.getElementById("cocosLoading"));var e=new cc.Node,t=new cc.Scene;t.width=i.width,t.height=i.height,cc.director.runScene(t),t.addChild(e),o.init(e,i,function(){n&&n.call(r),o.start(s,r)},this)})}})},{}],18:[function(e,t,i){b8e.StartupForCC=b8e.BaseStartup.extends({ctor:function(e){b8e.macro.IS_COCOS_CREATOR=!0,this._nodeComponent=e,this._super()},init:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._super(this._nodeComponent?this._nodeComponent.node:null,e,t,i)},run:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=this;s.init(e,function(){t&&t.call(n),s.start(i,n)},this)}})},{}],19:[function(e,t,i){var n=b8e.Ticker=b8e.Object.extends({ctor:function(){this._super(),this._highLayer=[],this._highMap=b8e.HashMap.get(),this._middleLayer=[],this._middleMap=b8e.HashMap.get(),this._lowLayer=[],this._lowMap=b8e.HashMap.get()},init:function(){this._fpsAverage=1e3},startTick:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if("function"==typeof e){var s=this._lowMap.get(e,t);if(s)b8e.warn("注意：试图在同一地址重复添加Ticker！");else if(s=this._middleMap.get(e,t))b8e.warn("注意：试图在同一地址重复添加Ticker！");else if(s=this._highMap.get(e,t))b8e.warn("注意：试图在同一地址重复添加Ticker！");else{var r=null,o=null;if(0==n?(r=this._lowLayer,o=this._lowMap):1==n?(r=this._middleLayer,o=this._middleMap):2==n&&(r=this._highLayer,o=this._highMap),r){var a={callBack:e,thisArg:t,priority:i,lastTime:b8e.timeStamp};o.set(e,a,t),0==i?this._appendIn(r,a):this._priorityIn(r,a)}}}else b8e.error("回调参数不是一个有效的方法！")},stopTick:function(e,t){if("function"==typeof e){var i=this._lowMap.get(e,t),n=i?this._lowLayer.indexOf(i):-1;if(-1<n)return this._lowLayer.splice(n,1),void this._lowMap.del(e,t);if(-1<(n=(i=this._middleMap.get(e,t))?this._middleLayer.indexOf(i):-1))return this._middleLayer.splice(n,1),void this._middleMap.del(e,t);if(-1<(n=(i=this._highMap.get(e,t))?this._highLayer.indexOf(i):-1))return this._highLayer.splice(n,1),void this._highMap.del(e,t);b8e.warn("注意：试图移除不存在的Ticker！")}else b8e.error("回调参数不是一个有效的方法！")},_priorityIn:function(e,t,i){for(var n=e.length,s=0;s<n;s++)if(i<e[s].priority)return e.splice(s,0,t),s;return e.unshift(t),0},_appendIn:function(e,t){e.unshift(t)},$setFrameRate:function(e){if((e=+e||0)<=0)return!1;if(60<e&&(e=60),this._frameRate==e)return!1;this._frameRate=e,b8e.frameRate=this._frameRate,this._frameBatch=30===this._frameRate,this._fps=this._frameRate,this._backFps=this._frameRate,this._fpsTotal=0,this._backFpsTotal=0;var t=b8e.getTimer();return b8e.timeStamp=t,this._fpsTime=t,this._backFpsTime=t,0<this._intervalId&&(window.cancelAnimFrame(this._intervalId),this._intervalId=0),this._runMainLoop(),!0},_runMainLoop:function(){if(!this._paused){if(this.skip=!0,!this.animFrameCb){var e=this;this.animFrameCb=function(){e._paused||(e._intervalId=window.requestAnimFrame(e.animFrameCb),e._frameBatch?(e.skip=!e.skip,e.skip||e.onUpdate(!e.skip)):e.onUpdate())}}this._intervalId=window.requestAnimFrame(this.animFrameCb)}},onUpdate:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=b8e.getTimer();b8e.timeStamp=t,this._updateLayer(this._highLayer,t,!1,e),this._isActivated&&(this._updateLayer(this._middleLayer,t,!1,e),this._updateLayer(this._lowLayer,t,this._frameBatch,e)),e?(this._isActivated&&this._updateRender(),this._onFrame()):b8e.macro.IS_DEBUG&&this._onBackFrame(),b8e.macro.IS_DEBUG&&(this._costFrame=b8e.getTimer()-t,(void 0===this._maxCostFrame||this._costFrame>this._maxCostFrame)&&(this._maxCostFrame=this._costFrame))},_updateRender:function(){cc.director.mainLoop()},_updateLayer:function(e,t){2<arguments.length&&void 0!==arguments[2]&&arguments[2];for(var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=void 0,s=e.length-1;0<=s;s--){var r=e[s];r&&r.callBack&&(n=t-r.lastTime,r.lastTime=t,r.callBack.call(r.thisArg,n,this._frameBatch,i))}},setPaused:function(e){this._paused!=e&&(this._paused=e,this._paused?0<this._intervalId&&(window.cancelAnimFrame(this._intervalId),this._intervalId=0):this._runMainLoop())},activate:function(){this._isActivated||(this._isActivated=!0)},deactivate:function(){this._isActivated&&(this._isActivated=!1)},getCount:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;return-1==e?this._lowLayer.length+this._middleLayer.length+this._highLayer.length:0==e?this._lowLayer.length:1==e?this._middleLayer.length:2==e?this._highLayer.length:0},_onBackFrame:function(){var e=b8e.timeStamp,t=e-this._backFpsTime;if(this._backFpsTotal++,t>(this._fpsAverage||1e3)){var i=1e3*this._backFpsTotal/t;this._backFps=i,this._backFpsTotal=0,this._backFpsTime=e}},_onFrame:function(){var e=b8e.timeStamp,t=e-this._fpsTime;if(this._fpsTotal++,t>(this._fpsAverage||1e3)){var i=1e3*this._fpsTotal/t;this._fps=i,this._fpsTotal=0,this._fpsTime=e}},getFps:function(){return Math.round(100*this._fps)/100},getBackFps:function(){return Math.round(100*this._backFps)/100},getCostFrame:function(){return Math.round(100*this._costFrame)/100},getMaxCostFrame:function(){return Math.round(100*this._maxCostFrame)/100},debugReset:function(){this._maxCostFrame=0}});b8e.ticker=new b8e.Ticker,n.add=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;b8e.ticker.startTick(t,e,i,n)},n.remove=function(e,t){b8e.ticker.stopTick(t,e)},n.getCount=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;return b8e.ticker.getCount(e)},n.getBackFps=function(){return b8e.ticker.getBackFps()},n.getFps=function(){return b8e.ticker.getFps()},function(){function i(e){l.has(e)&&(c--,l.del(e),0==c&&b8e.ticker.stopTick(a,null))}function a(e){n=e,l.forEach(t,null)}function t(e,t){t.delay-=n,t.delay<=0&&(t.listener.apply(t.thisObject,t.params),i(e))}var l=b8e.HashMap.get(),h=0,c=0,n=0;b8e.setTimeout=function(e,t,i){if("number"!=typeof i)return 0;for(var n=[],s=3,r=arguments.length;s<r;s++)n[s-3]=arguments[s];var o={listener:e,thisObject:t,delay:i,params:n};return 1==++c&&b8e.ticker.startTick(a,null,0,2),h++,l.set(h,o),h},b8e.clearTimeout=i}()},{}],20:[function(e,t,i){var l=b8e.Timer=b8e.EventDispatcher.extends({ctor:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0;this._super(),void 0===t&&(t=0),this._currentCount=0,this._running=!1,this.updateInterval=1e3,this.lastCount=1e3,this.lastTime=0,this.delay=e,this.repeat=0|+t,this.priority=i,this.callBack=n,this.thisArg=s,this.args=r,this.level=o},delay:{get:function(){return this._delay},set:function(e){(e=+e||0)<1&&(e=1),this._delay!=e&&(this._delay=e,this.lastCount=this.updateInterval=Math.round(60*this._delay))}},currentCount:{get:function(){return this._currentCount}},running:{get:function(){return this._running}},reset:function(){this._running&&(this.lastCount=this.updateInterval,this.lastTime=this._delay,this._lastTimeStamp=b8e.timeStamp,this._currentCount=0)},start:function(){if(!this._running){this.lastCount=this.updateInterval,this.lastTime=this._delay,this._running=!0,this._lastTimeStamp=b8e.timeStamp,this._currentCount=0,l._inited||(b8e.ticker.startTick(l.lowTick,l,0,1),b8e.ticker.startTick(l.middleTick,l,0,1),b8e.ticker.startTick(l.highTick,l,0,2),l._middleNextIndex=-1,l._inited=!0);var e=null,t=null,i=this.level;if(0==i?(e=l.lowLayer,t=l.lowMap):1==i?(e=l.middleLayer,t=l.middleMap):2==i&&(e=l.highLayer,t=l.highMap),this.callBack&&t.set(this.callBack,this,this.thisArg),0==this.priority)this._appendIn(e),1==i&&l._middleNextIndex++;else{var n=this._priorityIn(e);1==i&&n<=l._middleNextIndex&&l._middleNextIndex++}}},_priorityIn:function(e){for(var t=this.priority,i=0,n=e.length;i<n;i++)if(t<e[i].priority)return e.splice(i,0,this),i;return e.unshift(this),0},_appendIn:function(e){e.unshift(this)},stop:function(){if(this._running){this._running=!1,this._lastTimeStamp=0;var e=l.lowLayer.indexOf(this);return-1<e?(l.lowLayer.splice(e,1),void(this.callBack&&l.lowMap.del(this.callBack,this.thisArg))):-1<(e=l.middleLayer.indexOf(this))?(l.middleLayer.splice(e,1),this.callBack&&l.middleMap.del(this.callBack,this.thisArg),void(e<=l._middleNextIndex&&l._middleNextIndex--)):-1<(e=l.highLayer.indexOf(this))?(l.highLayer.splice(e,1),void(this.callBack&&l.highMap.del(this.callBack,this.thisArg))):void 0}},update:function(e){if(this.lastTime-=e,this.lastTime<=0)this.lastCount=this.updateInterval;else{if(this.lastCount-=1e3,0<this.lastCount)return;this.lastCount+=this.updateInterval}this.lastTime=this._delay,this._currentCount++,this.callBack&&this.callBack.apply(this.thisArg,this.args),this.useEvent&&b8e.TimerEvent.dispatchTimerEvent(this,b8e.TimerEvent.TIMER),0<this.repeat&&this._currentCount>=this.repeat&&(this.stop(),this.useEvent&&b8e.TimerEvent.dispatchTimerEvent(this,b8e.TimerEvent.TIMER_COMPLETE))},dispose:function(){this.stop(),this.callBack=null,this.thisArg=null,this.args=null,this.level=0,this.useEvent=!1}});l._inited=!1,l.highLayer=[],l.highMap=b8e.HashMap.get(),l.middleLayer=[],l.middleMap=b8e.HashMap.get(),l.lowLayer=[],l.lowMap=b8e.HashMap.get(),l._middleNextIndex=0,l.lowTick=function(e,t,i){i&&l._updateLayer(l.lowLayer,e)},l.middleTick=function(e,t,i){l._updateLayer(l.middleLayer,e,t,i)},l.highTick=function(e){l._updateLayer(l.highLayer,e)},l._updateLayer=function(e,t){2<arguments.length&&void 0!==arguments[2]&&arguments[2],3<arguments.length&&void 0!==arguments[3]&&arguments[3];var i;i=e.length-1;for(var n=b8e.timeStamp,s=i;0<=s;s--){var r=e[s];r&&(t=n-r._lastTimeStamp,r._lastTimeStamp=n,r.update(t))}},l.add=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0;if("function"!=typeof t)return b8e.error("回调参数不是一个有效的方法！"),null;var a=l.lowMap.get(t,e);return a||(a=l.middleMap.get(t,e))||(a=l.highMap.get(t,e)),a?b8e.warn("注意：试图在同一地址重复添加Timer！"):(a=new b8e.Timer(i,n,s,t,e,r,o)).start(),a},l.remove=function(e,t){if("function"!=typeof t)return b8e.error("回调参数不是一个有效的方法！"),null;var i=l.lowMap.get(t,e);return i||(i=l.middleMap.get(t,e))||(i=l.highMap.get(t,e)),i?(i.stop(),i.dispose()):b8e.warn("注意：试图移除不存在的Timer！"),i},l.getCount=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;return-1==e?l.lowLayer.length+l.middleLayer.length+l.highLayer.length:0==e?l.lowLayer.length:1==e?l.middleLayer.length:2==e?l.highLayer.length:0}},{}],21:[function(e,t,i){var n,s;n=JSON.parse('{"package":"version_config","messages":[{"name":"VersionConfigMessage","fields":[{"rule":"required","type":"int32","name":"version","options":{},"id":1},{"rule":"required","type":"int32","name":"res_version","options":{},"id":2},{"rule":"required","type":"int32","name":"init_version","options":{},"id":3},{"rule":"repeated","type":"VersionFileInfo","name":"infos","options":{},"id":4}],"enums":[],"messages":[],"options":{},"services":[],"oneofs":{}},{"name":"VersionFileInfo","fields":[{"rule":"required","type":"string","name":"source","options":{},"id":1},{"rule":"required","type":"string","name":"dest","options":{},"id":2}],"enums":[],"messages":[],"options":{},"services":[],"oneofs":{}}],"enums":[],"imports":[],"options":{},"services":[],"syntax":"proto3"}'),s=b8e.ProtobufUtil.buildMessage("version_config",n),b8e.proto.version={},b8e.proto.version.VersionConfigMessage=b8e.ProtobufUtil.instantiateMessage(s.version_config.VersionConfigMessage),b8e.proto.version.VersionFileInfo=b8e.ProtobufUtil.instantiateMessage(s.version_config.VersionFileInfo)},{}],22:[function(e,t,i){var n="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)},s=b8e.BaseDisplay=b8e.Object.extends({_isRecycled:!1,_isDisposed:!1,ctor:function(){if(!b8e.ready)throw new Error("引擎未就绪，不能实例化显示对象！");this.constructor===s&&(s.poolCall||b8e.warn("强烈建议用engine.BaseDisplay.get代替new操作！")),this._super(),this._isRecycled=!1,this._isDisposed=!1,this._node=new cc.Node,this._children=[],this.resetDisplay(),s.count++},getNode:function(){return this._node},getChildrenCount:function(){return this._children.length},getChildren:function(){return this._children},alpha:{set:function(e){this._node&&this._alpha!=e&&(this._alpha=e,this._hierarchyVisible&&(this._node.opacity=this._alpha*this._contentAlpha*255>>0))},get:function(){return this._alpha}},contentAlpha:{set:function(e){this._node&&this._contentAlpha!=e&&(this._contentAlpha=e,this._hierarchyVisible&&(this._node.opacity=this._alpha*this._contentAlpha*255>>0))},get:function(){return this._contentAlpha}},setSize:function(e,t){this._setContentSize(e,t)},_setContentSize:function(e,t){this._width==e&&this._height==t||(this._width=e,this._height=t,this._node.setContentSize(this._width,this._height))},setScale:function(e,t){this._scaleX==e&&this._scaleY==t||(this._scaleX=e,this._scaleY=t,this._hierarchyVisible&&this.applyScale())},setContentScale:function(e,t){this._contentScaleX==e&&this._contentScaleY==t||(this._contentScaleX=e,this._contentScaleY=t,this._hierarchyVisible&&this.applyScale())},contentScaleX:{set:function(e){this.setContentScale(e,this._contentScaleY)},get:function(){return this._contentScaleX}},contentScaleY:{set:function(e){this.setContentScale(this._contentScaleX,e)},get:function(){return this._contentScaleY}},offsetX:{set:function(e){this._offsetX!=e&&(this._offsetX=e,this.syncPosition(this))},get:function(){return this._offsetX}},offsetY:{set:function(e){this._offsetY!=e&&(this._offsetY=e,this.syncPosition(this))},get:function(){return this._offsetY}},offsetZ:{set:function(e){this._offsetZ!=e&&(this._offsetZ=e,this.syncPosition(this))},get:function(){return this._offsetZ}},x:{set:function(e){this._posX!=e&&(this._posX=e,this.syncPosition(this))},get:function(){return this._posX}},y:{set:function(e){this._posY!=e&&(this._posY=e,this.syncPosition(this))},get:function(){return this._posY}},z:{set:function(e){this._posZ!=e&&(this._posZ=e,this.syncPosition(this))},get:function(){return this._posZ}},scaleX:{set:function(e){this._scaleX!=e&&(this._scaleX=e,this._hierarchyVisible&&this.applyScale())},get:function(){return this._scaleX}},scaleY:{set:function(e){this._scaleY!=e&&(this._scaleY=e,this._hierarchyVisible&&this.applyScale())},get:function(){return this._scaleY}},applyScale:function(){var e=this._contentScaleX*this._scaleX*(this._flippedX?-1:1),t=this._contentScaleY*this._scaleY;this._node.setScale(e,t)},width:{set:function(e){this.setSize(e,this._height)},get:function(){return this.getWidth()}},height:{set:function(e){this.setSize(this._width,e)},get:function(){return this.getHeight()}},rotation:{set:function(e){this.syncRotation(this._rotX,this._rotY,e,this)},get:function(){return this._rotZ}},getWidth:function(){return this._width},getHeight:function(){return this._height},setAnchor:function(e,t){this._node.setAnchorPoint(e,t)},getAnchor:function(){return this._node.getAnchorPoint()},setSyncPosition:function(e,t,i,n,s,r,o){this._posX==e&&this._posY==t&&this._posZ==i&&this._offsetX==n&&this._offsetY==s&&this._offsetZ==r||(this._posX=e,this._posY=t,this._posZ=i,this._offsetX=n,this._offsetY=s,this._offsetZ=r,this.syncPosition(o))},setPosition:function(e,t,i){this._node?(null==t?this._posX==e.x&&this._posY==e.y&&this._posZ==e.z||(this._posX=e.x,this._posY=e.y,this._posZ=e.z):this._posX==e&&this._posY==t&&this._posZ==i||(this._posX=e,this._posY=t,this._posZ=i),this.syncPosition(this)):b8e.error("销毁的显示对象不能设置位置！")},setOffset:function(e,t,i){this._node&&(null==t?this._offsetX==e.x&&this._offsetY==e.y&&this._offsetZ==e.z||(this._offsetX=e.x,this._offsetY=e.y,this._offsetZ=e.z):this._offsetX==e&&this._offsetY==t&&this._offsetZ==i||(this._offsetX=e,this._offsetY=t,this._offsetZ=i),this.syncPosition(this))},setRotation:function(e,t,i){this._node?null==t?this.syncRotation(e.x,e.y,e.z,this):this.syncRotation(e,t,i,this):b8e.error("销毁的显示对象不能设置旋转！")},getPosition:function(){return{x:this._posX,y:this._posY,z:this._posZ}},getOffset:function(){return{x:this._offsetX,y:this._offsetY,z:this._offsetZ}},getRotation:function(){return{x:this._rotX,y:this._rotY,z:this._rotZ}},addReleaseCallback:function(e,t,i){this._releaseCallbackVec||(this._releaseCallbackVec=b8e.HashMap.get()),b8e.CallBackUtil.addCallBackData(this._releaseCallbackVec,e,t,i)},removeReleaseCallback:function(e,t){this._releaseCallbackVec&&0<this._releaseCallbackVec.count()&&b8e.CallBackUtil.removeCallBackData(this._releaseCallbackVec,e,t)},syncPosition:function(e){this._node&&(this._disX=this._posX+this._offsetX,this._disY=this._posY+this._offsetY,this._hierarchyVisible&&this._node.setPosition(this._disX,this._disY),this.onSyncPosition(e))},onSyncPosition:function(e){this.syncAllInfo(e)},syncRotation:function(e,t,i,n){this._node&&(this._rotX==e&&this._rotY==t&&this._rotZ==i||(this._rotX=e,this._rotY=t,this._rotZ=i,this._hierarchyVisible&&(this._node.rotation=this._rotZ),this.syncAllInfo(n)))},syncAllInfo:function(e){this._syncInfos&&(this._tmpInitiator=e,this._syncInfos.forEach(this._syncObjInfo,this),this._tmpInitiator=null)},_syncObjInfo:function(e,t){var i=this._tmpInitiator;i&&t.getObj()!=i&&this.onSyncInfo(t)},addSyncInfo:function(e){if(e){this._syncInfos||(this._syncInfos=b8e.HashMap.get());var t=e.getObj(),i=this._syncInfos.get(t,this);i!=e&&(i&&(b8e.warn("注意：同步目标已存在！"),(t=i.getObj())instanceof s&&(t._syncTarget=null,t.removeReleaseCallback(this.onSyncObjRelease)),i.dispose()),t=e.getObj(),this._syncInfos.set(t,e,this),t instanceof s&&(t._syncTarget=this,t.addReleaseCallback(this.onSyncObjRelease,this,[this]))),this.onSyncInfo(e)}},onSyncInfo:function(e){e.syncInfo(this,{x:this._posX,y:this._posY,z:this._posZ},{x:this._rotX,y:this._rotY,z:this._rotZ})},removeSyncInfo:function(e){if(e&&this._syncInfos){var t=this._syncInfos.get(e,this);t&&((e=t.getObj())instanceof s&&(e._syncTarget=null,e.removeReleaseCallback(this.onSyncObjRelease)),t.dispose(),this._syncInfos.del(e,this))}},removeAllSyncInfo:function(){this._syncInfos&&(this._syncInfos.forEach(this._removeObjSync,this),this._syncInfos.clear())},_removeObjSync:function(e,t){e instanceof s&&(e._syncTarget=null,e.removeReleaseCallback(this.onSyncObjRelease)),t.dispose()},onSyncObjRelease:function(e){this.removeSyncInfo(e)},syncTo:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=new b8e.DisplaySyncInfo(this,t,i);e.addSyncInfo(n)},unSyncTarget:function(){this._syncTarget&&(this._syncTarget.usable&&this._syncTarget.removeSyncInfo(this),this._syncTarget=null)},localToGlobal:function(e){return b8e.CommonUtil.convertToStageSpace(this,e)},_setParent:function(e){this.parent!=e&&((this.parent=e)?e instanceof s?this._setInHierarchy(e._inHierarchy):e instanceof cc.Node?this._setInHierarchy(!0):this.parent instanceof _ccsg.Node?this._setInHierarchy(!0):b8e.error("父级显示对象不是一个有效的engine.BaseDisplay或cc.Node！type:"+(void 0===e?"undefined":n(e))):this._setInHierarchy(!1))},addToParent:function(e){e instanceof s?e.addChild(this):e instanceof cc.Node?this._node&&this._node.parent!=e&&(this.removeFromParent(),e.addChild(this._node),this._setParent(e)):e instanceof _ccsg.Node?this._node&&this._node._sgNode.parent!=e&&(this.removeFromParent(),e.addChild(this._node._sgNode),this._setParent(e)):b8e.error("显示对象不是一个有效的engine.BaseDisplay或cc.Node！type:"+(void 0===e?"undefined":n(e)))},removeFromParent:function(){this.parent&&(this.parent instanceof s?this.parent.removeChild(this):this.parent instanceof cc.Node?this.parent.removeChild(this._node,!1):this.parent instanceof _ccsg.Node&&this.parent.removeChild(this._node._sgNode,!1),this._setParent(null))},removeAllChildren:function(){if(this._children)for(var e=this._children.length-1;0<=e;e--){var t=this._children[e];t.clearDisabled||this.removeChild(t)}},addChild:function(e){if(this.usable){if(e instanceof s)this._node&&e._node&&e.parent!=this&&(e.removeFromParent(),this._node.addChild(e._node),e._setParent(this));else if(e instanceof cc.Node)this._node&&e.parent!=this._node&&(e.removeFromParent(!1),this._node.addChild(e));else{if(!(e instanceof _ccsg.Node))return void b8e.error("显示对象不是一个有效的engine.BaseDisplay或cc.Node！type:"+(void 0===e?"undefined":n(e)));this._node&&e.parent!=this._node._sgNode&&(e.removeFromParent(!1),this._node._sgNode.addChild(e))}this._children.indexOf(e)<0&&this._children.push(e)}},removeChild:function(e){if(this._children){if(e instanceof s)this._node&&e._node&&e.parent==this&&(this._node.removeChild(e._node,!1),e._setParent(null));else if(e instanceof cc.Node)this._node&&e.parent==this._node&&this._node.removeChild(e,!1);else{if(!(e instanceof _ccsg.Node))return void b8e.error("显示对象不是一个有效的engine.BaseDisplay或cc.Node！type:"+(void 0===e?"undefined":n(e)));this._node&&e.parent==this._node._sgNode&&this._node._sgNode.removeChild(e,!1)}var t=this._children.indexOf(e);-1<t&&this._children.splice(t,1)}},convertToNodeSpaceAR:function(e){return this._node.convertToNodeSpaceAR(e)},setVisible:function(e){this._visible!=e&&(this._visible=e,this._node.active=this._visible,this._applyHierarchyVisible())},getVisible:function(){return this._visible},_setInHierarchy:function(e){if(this._inHierarchy!=e){(this._inHierarchy=e)?s.inHierarchyCount++:s.inHierarchyCount--,this.onHierarchy(e);for(var t=this._children.length-1;0<=t;t--){var i=this._children[t];i instanceof s&&i._setInHierarchy(e)}this._applyHierarchyVisible()}},_applyHierarchyVisible:function(){this.usable&&this._node.onActiveInHierarchy&&(this.parent?this.parent instanceof s?this._setHierarchyVisible(this.parent._visible):this.parent instanceof cc.Node?this._setHierarchyVisible(this.parent._activeInHierarchy):this.parent instanceof _ccsg.Node?this._setHierarchyVisible(!0):b8e.error("父级显示对象不是一个有效的engine.BaseDisplay或cc.Node！type:"+n(this.parent)):this._setHierarchyVisible(!1))},_applyProperties:function(){this.usable&&(this._node.opacity=this._alpha*this._contentAlpha*255>>0,this._node.rotation=this._rotZ,this._node.setLocalZOrder(this._localZOrder),this._node.setPosition(this._disX,this._disY),this.applyScale())},_setHierarchyVisible:function(e){if(this.usable&&this._node){var t=this._node._activeInHierarchy&&this._inHierarchy&&this._visible&&e;if(this._hierarchyVisible!=t&&(this._hierarchyVisible=t,this._hierarchyVisible&&this._applyProperties(),this.onHierarchyVisible(this._hierarchyVisible),this.usable))for(var i=this._children.length-1;0<=i;i--){var n=this._children[i];n instanceof s&&n._setHierarchyVisible(this._visible)}}},onHierarchy:function(e){},onHierarchyVisible:function(e){},onActiveInHierarchy:function(e){this.usable&&(this._node.parent?this._setHierarchyVisible(this._node.parent._activeInHierarchy):this._setHierarchyVisible(!1))},getInHierarchy:function(){return this._inHierarchy},getHierarchyVisible:function(){return this._hierarchyVisible},setLocalZOrder:function(e){this._localZOrder!=e&&(this._localZOrder=e,this._hierarchyVisible&&this._node.setLocalZOrder(this._localZOrder))},getLocalZOrder:function(){return this._localZOrder},setFlippedX:function(e){this._flippedX!=e&&(this._flippedX=e,this._hierarchyVisible&&this.applyScale())},getFlippedX:function(){return this._flippedX},getBoundingBox:function(){return this._node.getBoundingBox()},resetDisplay:function(){if(b8e.Tween.kill(this),this.removeFromParent(),this.removeAllSyncInfo(),this.removeAllChildren(),this._syncInfos&&this._syncInfos.clear(),this.setVisible(!0),this.setAnchor(0,0),this._posX=0,this._posY=0,this._posZ=0,this._offsetX=0,this._offsetY=0,this._offsetZ=0,this._disX=0,this._disY=0,this._node.setPosition(0,0),this._rotX=0,this._rotY=0,this._rotZ=0,this._node.rotation=0,this._localZOrder=0,this._node.setLocalZOrder(0),this._flippedX=!1,this._contentScaleX=1,this._contentScaleY=1,this._scaleX=1,this._scaleY=1,this._node.setScale(1,1),this._width=0,this._height=0,this._node.setContentSize(0,0),this._alpha=1,this._contentAlpha=1,this._node.opacity=255,this._inHierarchy=!1,this._hierarchyVisible=!1,this.clearDisabled=!1,this.data=null,this._tmpInitiator=null,this._releaseCallbackVec&&b8e.CallBackUtil.removeAllCallBackData(this._releaseCallbackVec),!this._node.onActiveInHierarchy){var t=this;this._node.onActiveInHierarchy=function(e){t.onActiveInHierarchy(e)}}},usable:{get:function(){return!this._isRecycled&&!this._isDisposed}},isRecycled:{get:function(){return this._isRecycled}},isDisposed:{get:function(){return this._isDisposed}},hashUsable:function(e){if(this.poolHash)return this.usable&&this.poolHash===e;b8e.error("使用哈希校验的对象必须使用engine.Pool管理！")},restore:function(){this._isRecycled=!1,this.resetDisplay(),s.count++},recycle:function(){this._node.onActiveInHierarchy=null,this._releaseCallbackVec&&0<this._releaseCallbackVec.count()&&b8e.CallBackUtil.exceteCallBackData(this,this._releaseCallbackVec),this.resetDisplay(),this._isRecycled=!0,s.count--},release:function(){this.constructor===s?s.put(this):this.destroy()},dispose:function(){if(this._releaseCallbackVec&&(this._releaseCallbackVec.release(),this._releaseCallbackVec=null),this._syncInfos&&(this._syncInfos.release(),this._syncInfos=null),this._children){for(var e=this._children.length-1;0<=e;e--){var t=this._children[e];this.removeChild(t)}this._children.length=0,this._children=null}this._node&&(this._node.destroy(),this._node=null),this._isRecycled=!1,this._isDisposed=!0},destroy:function(){this.constructor===s&&(s.poolCall||b8e.warn("强烈建议用engine.BaseDisplay.put或release代替destroy操作！")),this.recycle(),this.dispose()}});s.count=0,s.inHierarchyCount=0,s.pool=new b8e.Pool(s,1024),s.get=function(){return s.pool.get()},s.put=function(e){return s.pool.put(e)}},{}],23:[function(e,t,i){b8e.Graphics=b8e.BaseDisplay.extends({ctor:function(){this.constructor===b8e.Graphics&&(b8e.Graphics.poolCall||b8e.warn("强烈建议用engine.Graphics.get代替new操作！")),this._super(),this._graphics=this._node.addComponent(cc.Graphics)},getGraphics:function(){return this._graphics},strokeColor:function(e){this._graphics.strokeColor=b8e.ColorUtil.toCCColor(e)},fillColor:function(e){this._graphics.fillColor=b8e.ColorUtil.toCCColor(e)},stroke:function(){this._graphics.stroke()},fill:function(){this._graphics.close(),this._graphics.fill()},fillRect:function(e,t,i,n){this._graphics.rect(e,t,i,n),this._graphics.fill()},fillCircle:function(e,t,i){this._graphics.circle(e,t,i),this._graphics.fill()},fillRoundRect:function(e,t,i,n,s){this._graphics.roundRect(e,t,i,n,s),this._graphics.fill()},moveTo:function(e,t){this._graphics.moveTo(e,t)},lineTo:function(e,t){this._graphics.lineTo(e,t)},lineWidth:function(e){this._graphics.lineWidth=e},clear:function(){this._graphics&&this._graphics.clear()},restore:function(){this.clear(),this._super()},recycle:function(){this.clear(),this._super()},release:function(){this.constructor===b8e.Graphics?b8e.Graphics.put(this):this.destroy()},dispose:function(){this._graphics&&(this._node.removeComponent(this._graphics),this._graphics.destroy(),this._graphics=null),this._super()},destroy:function(){this.constructor===b8e.Graphics&&(b8e.Graphics.poolCall||b8e.warn("强烈建议用engine.Graphics.put或release代替destroy操作！")),this._super()}}),b8e.Graphics.pool=new b8e.Pool(b8e.Graphics,128),b8e.Graphics.get=function(){return b8e.Graphics.pool.get()},b8e.Graphics.put=function(e){return b8e.Graphics.pool.put(e)}},{}],24:[function(e,t,i){b8e.PrefabDisplay=b8e.BaseDisplay.extends({ctor:function(){this._super(),this._propMap=b8e.HashMap.get(),this._isLoading=!1,this._isLoaded=!1},_setPrefab:function(e,t){e?this._prefab||(this._prefab=e,this._scriptName=t,this._prefabNode=cc.instantiate(this._prefab),this.addChild(this._prefabNode),this.setSize(this._prefabNode.width,this._prefabNode.height),this._scriptName&&(this._script=this._prefabNode.getComponent(this._scriptName)),this._propMap.forEach(this._applyProp,this),this._onComplete&&this._onComplete.call(this._onCompleteThis)):b8e.error("预制体不能为空！"+this._url)},loadPrefab:function(e,t,i,n,s){e!=this._url&&(this.unloadPrefab(),this._url=e,this._onComplete=i,this._onCompleteThis=n,this._isLoading=!0,s||(s={}),void 0===s.priority&&(s.priority=1e8),b8e.res.loadRes(this._url,b8e.Prefab,this.onLoadComplete,this,[t],s))},onLoadComplete:function(e,t,i){this._isLoading=!1,this._isLoaded=!0,e||this._setPrefab(t.getPrefab(),i)},_applyProp:function(e){if(this._script){var t=this._propMap.get(e);if(t){var i=t.thisArg||this._script;i&&("function"==typeof i[e]?i[e].call(i,t.value):i[e]=t.value)}}},callProp:function(e,t,i){this._propMap.set(e,{value:t,thisArg:i}),this._applyProp(e)},unloadPrefab:function(){this._prefabNode&&(this._prefabNode.destroy(),this._prefabNode=null),this._url&&(b8e.res.unloadRes(this._url,this.onLoadComplete,this),this._url=null),this.setSize(0,0),this._onComplete=null,this._onCompleteThis=null,this._scriptName=null,this._script=null,this._prefab=null,this._propMap.clear(),this._isLoading=!1,this._isLoaded=!1},isLoading:function(){return this._isLoading},isLoaded:function(){return this._isLoaded},restore:function(){this._super()},recycle:function(){this.unloadPrefab(),this._propMap&&this._propMap.clear(),this._super()},dispose:function(){this._propMap&&(this._propMap.release(),this._propMap=null),this._super()}})},{}],25:[function(e,t,i){b8e.Scene=b8e.EventDispatcher.extends({ctor:function(e){1<arguments.length&&void 0!==arguments[1]&&arguments[1];var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._super(),this._container=b8e.BaseDisplay.get(),this._container.setAnchor(0,0),this._container.setPosition(0,0),e.addChild(this._container),this._viewSize={width:0,height:0},this._viewFilter=t,this._mapLayer=new b8e.SceneMapLayer(this),this._earthContainer=this._mapLayer.getEarthSurface().getContainer(),this._entityLayer=new b8e.SceneEntityLayer(this,this._viewFilter),this._camera=new b8e.SceneCamera(this)},getCountByType:function(e){return this._entityLayer.getCountByType(e)},setViewFilter:function(e){this._viewFilter=e,this._entityLayer.setViewFilter(this._viewFilter)},getCurrOtherRenderNum:function(){return this._entityLayer.getCurrOtherRenderNum()},getMaxOtherRenderNum:function(){return this._entityLayer.getMaxOtherRenderNum()},getCurrRenderNum:function(e){return this._entityLayer.getCurrRenderNum(e)},getMaxRenderNum:function(e){return this._entityLayer.getMaxRenderNum(e)},getMaxAttachNum:function(e,t){return this._entityLayer.getMaxAttachNum(e,t)},setMaxOtherRenderNum:function(e){this._entityLayer.setMaxOtherRenderNum(e)},setMaxRenderNum:function(e,t){this._entityLayer.setMaxRenderNum(e,t)},setMaxAttachNum:function(e,t,i){this._entityLayer.setMaxAttachNum(e,t,i)},isOtherRenderLimit:function(){return this._entityLayer.isOtherRenderLimit()},isRenderLimit:function(e){return this._entityLayer.isRenderLimit(e)},getContainer:function(){return this._container},addDisplay:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],s=!(4<arguments.length&&void 0!==arguments[4])||arguments[4];this._entityLayer.addDisplay(e,t,i,n,s)},removeDisplay:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this._entityLayer.removeDisplay(e,t)},_driveOutDisplay:function(e){this._entityLayer._driveOutDisplay(e)},getDisplayByType:function(e){return this._entityLayer.getDisplayByType(e)},getDisplayById:function(e){return this._entityLayer.getDisplayById(e)},getDisplayByTypeAndId:function(e,t){return this._entityLayer.getDisplayByTypeAndId(e,t)},removeDisplayByType:function(e){this._entityLayer.removeDisplayByType(e)},removeDisplayById:function(e){this._entityLayer.removeDisplayById(e)},removeDisplayByTypeAndId:function(e,t){this._entityLayer.removeDisplayByTypeAndId(e,t)},getDisplays:function(){return this._entityLayer.getDisplays()},getVisibleSize:function(){return cc.director.getVisibleSize()},getMapLayer:function(){return this._mapLayer},getEntityLayer:function(){return this._entityLayer},getCamera:function(){return this._camera},getSceneSize:function(){return{width:this._mapLayer.getMapWidth(),height:this._mapLayer.getMapHeight()}},getSceneScale:function(){return this._camera.getSceneScale()},startRender:function(){this._isRendering||(this._isLoaded?(this._isRendering=!0,this._mapLayer.startRender(),this.updateScene(),b8e.ticker.startTick(this.onUpdate,this,0,0)):b8e.error("错误：地图配置未设置完成，不能启动渲染！"))},stopRender:function(){this._isRendering&&(this._isRendering=!1,this._mapLayer.stopRender(),b8e.Ticker.remove(this,this.onUpdate))},onUpdate:function(e){this._mapLayer.update(e),this._entityLayer.update(e)},loadMap:function(e,n,s){return this.clear(),this._mapLayer.loadMap(e,function(e,t){if(!e){var i=t.getConfig();this._setSceneConfig(i),n&&n.call(s,e,this),this.dispatchEventWith(b8e.SceneEvent.SCENE_MAP_LOAD_COMPLETE,{scene:this})}},this),this._mapLayer},setMapConfig:function(e,t){this.clear(),this._mapLayer.setMapConfig(e,t),this._setSceneConfig(t)},getMapUrl:function(){return this._mapLayer.getMapUrl()},_setSceneConfig:function(e){if(e){var t=parseInt(e.cameraDistance);if(this._navigateRatio=parseInt(e.navigateRatio),this._panoramaRatio=parseInt(e.panoramaRatio),this._container.setSize(this._mapLayer.getMapWidth(),this._mapLayer.getMapHeight()),this._camera.setDistance(t),this._isLoaded=!0,this.updateScene(),this._entityLayer.onSceneLoaded(),b8e.evt.onC(this._earthContainer,this.onEarthClick,this),this.soundEffectsEnabled){var i=this._mapLayer.getMapUrl();if(e.backgroundMusic){var n=b8e.SoundMgr.BACKGROUND_MUSIC_DIR;n||(n=i?i.substring(0,i.lastIndexOf("/")):null),b8e.sound.playBackgroundMusic(n+"/"+e.backgroundMusic)}if(e.environmentAudio){var s=b8e.SoundMgr.ENVIRONMENT_AUDIO_DIR;s||(s=i?i.substring(0,i.lastIndexOf("/")):null),b8e.sound.playEnvironmentAudio(s+"/"+e.environmentAudio)}}}},isLoaded:function(){return this._isLoaded},getNavigateRatio:function(){return this._navigateRatio},getPanoramaRatio:function(){return this._panoramaRatio},clearEntity:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._entityLayer.clear(e),this==b8e.scene&&b8e.res.purge(!0)},clear:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.stopRender(),this._entityLayer.clear(e),this._mapLayer.clear(),this._navigateRatio=0,this._panoramaRatio=0,this._isLoaded&&(b8e.evt.offC(this._earthContainer,this.onEarthClick,this),this._isLoaded=!1),this.soundEffectsEnabled&&(b8e.sound.stopBackgroundMusic(),b8e.sound.stopEnvironmentAudio(),b8e.sound.stopAllEffectSound()),this==b8e.scene&&b8e.res.purge(!0)},updateSceneScale:function(){var e=this.getSceneScale();this._container.setScale(e,e),this.updateScene()},setSize:function(e,t){this._viewSize.width=e,this._viewSize.height=t,this.updateScene()},updateScene:function(){var e=this.getSceneScale(),t=this._viewSize.width/e>>0,i=this._viewSize.height/e>>0;this._mapLayer.setViewSize(t,i);var n=this._mapLayer.getMapWidth(),s=this._mapLayer.getMapHeight();this._mapLayer.setViewBounds(0,t-n,i-s,0),this._mapLayer.refreshView(!0);var r=this._mapLayer.getContainerPos();this._container.setPosition(r.x*e,r.y*e),this._camera.syncTargetFocus()},sceneGLToViewGLPos:function(e,t){var i=this.getViewGLPos(),n=this.getSceneScale();return{x:(e+i.x)*n,y:(t+i.y)*n}},viewGLToSceneGLPos:function(e,t){var i=this.getViewGLPos(),n=this.getSceneScale();return{x:e/n-i.x,y:t/n-i.y}},sceneUIToGLPos:function(e,t){return this._mapLayer.mapUIToGLPos(e,t)},sceneGLToUIPos:function(e,t){return this._mapLayer.mapGLToUIPos(e,t)},getViewUIPos:function(){var e=this.getViewGLPos();return this.viewGLToUIPos(e.x,e.y)},setViewUIPos:function(e,t){var i=this.viewUIToGLPos(e,t);this.setViewGLPos(i.x,i.y)},viewUIToGLPos:function(e,t){var i=this._mapLayer.getMapHeight();return{x:e,y:this._viewSize.height-i-t}},viewGLToUIPos:function(e,t){var i=this._mapLayer.getMapHeight();return{x:e,y:this._viewSize.height-i-t}},viewToViewportGLPos:function(e,t){return{x:-e,y:-t}},getViewGLPos:function(){return this._mapLayer.getViewGLPos()},getViewportPos:function(){var e=this.getViewUIPos();return{x:-e.x,y:-e.y}},setViewportPos:function(e,t){this.setViewUIPos(-e,-t)},setViewGLPos:function(e,t){this._applyViewPos(e,t),this._camera.applyCamera()},setGLViewportPos:function(e,t){this.setViewGLPos(-e,-t)},getViewSize:function(){return this._viewSize},_applyViewPos:function(e,t){this._mapLayer.setViewGLPos(e,t);var i=this.getSceneScale(),n=this._mapLayer.getContainerPos();this._container.setPosition(n.x*i,n.y*i)},modifyDisplayId:function(e,t){this._entityLayer.modifyDisplayId(e,t)},findPath:function(e,t,i,n){var s=4<arguments.length&&void 0!==arguments[4]&&arguments[4],r=5<arguments.length&&void 0!==arguments[5]&&arguments[5];return this._mapLayer.getEarthSurface().findPath(e,t,i,n,s,r)},gridIsSolid:function(e,t){return this._mapLayer.getEarthSurface().gridIsSolid(e,t)},gridIsSpecifyType:function(e,t,i){return this._mapLayer.getEarthSurface().gridIsSpecifyType(e,t,i)},getPixelPosByGrid:function(e,t){return{x:this._mapLayer.getPixelXByGrid(e),y:this._mapLayer.getPixelYByGrid(t)}},getGridPosByPixel:function(e,t){return{x:this._mapLayer.getGridXByPixel(e),y:this._mapLayer.getGridYByPixel(t)}},onEarthClick:function(e){var t=this._container.convertToNodeSpaceAR(e.getLocation()),i=this.sceneGLToUIPos(t.x,t.y);this.dispatchEventWith(b8e.SceneEvent.SCENE_MAP_CLICK,{x:i.x,y:i.y})},entityCount:{get:function(){return this._entityLayer.getDisplayCount()}},entityRenderCount:{get:function(){return this._entityLayer.getRenderCount()}},tileCount:{get:function(){return this._mapLayer.getTileCount()}},tileRenderCount:{get:function(){return this._mapLayer.getRenderCount()}}})},{}],26:[function(e,t,i){b8e.Sprite=b8e.BaseDisplay.extends({ctor:function(){this.constructor===b8e.Sprite&&(b8e.Sprite.poolCall||b8e.warn("强烈建议用engine.Sprite.get代替new操作！")),this._super(),this.setAnchor(0,0),this.setPosition(0,0,0),this._sprite=this._node.addComponent(cc.Sprite),this._shader=new b8e.ShaderProgram(this._sprite),this.resetSprite(),this._isLoaded=!1,this._isLoading=!1,this._frame=null},setSizeMode:function(e){this._sprite.sizeMode=e},setStyle:function(e){switch(e){case b8e.SpriteStyle.SIMPLE:this._sprite.type=cc.Sprite.Type.SIMPLE;break;case b8e.SpriteStyle.SLICED:this._sprite.type=cc.Sprite.Type.SLICED;break;case b8e.SpriteStyle.TILED:this._sprite.type=cc.Sprite.Type.TILED;break;case b8e.SpriteStyle.FILLED:this._sprite.type=cc.Sprite.Type.FILLED}},loadTexture:function(e,t,i,n){if(this._url==e)return this._onComplete=t,this._onCompleteThis=i,void(this._isLoaded&&(this._onComplete&&this._onComplete.call(this._onCompleteThis,this,this._frame),this._onComplete=null,this._onCompleteThis=null));this.unloadTexture(),this._url=e,this._onComplete=t,this._onCompleteThis=i,n||(n={}),void 0===(this._options=n).priority&&(n.priority=1e5),this._startLoad()},onHierarchyVisible:function(e){this._super(),e?this._startLoad():this.unload()},_startLoad:function(){this._hierarchyVisible&&(this._loadStarted||this._url&&(this._loadStarted=!0,this._isLoading=!0,b8e.res.loadRes(this._url,b8e.SpriteFrame,this.onFrameComplete,this,null,this._options)))},onFrameComplete:function(e,t){e?b8e.error(e):(this._isLoaded=!0,this._isLoading=!1,this.setFrame(t),this._onComplete&&this._onComplete.call(this._onCompleteThis,this,this._frame)),this._onComplete=null,this._onCompleteThis=null},unload:function(){this._url&&(this._loadStarted&&this._url&&b8e.res.unloadRes(this._url,this.onFrameComplete,this),this._loadStarted=!1,this.setFrame(null),this._isLoaded=!1,this._isLoading=!1)},unloadTexture:function(){this._url&&(this.unload(),this._onComplete=null,this._onCompleteThis=null,this._url=null,this._options=null)},setTexture:function(e,t){this._spriteFrame&&(this._spriteFrame.destroy(),this._spriteFrame=null),e&&(this._spriteFrame=new b8e.SpriteFrame,this._spriteFrame.setTexture(e,t)),this.setFrame(this._spriteFrame)},setFrame:function(e){if(this._sprite){var t=null;if(e instanceof b8e.SpriteFrame){if(t=e.getFrame(),this._sprite.spriteFrame==t)return}else if(e instanceof cc.SpriteFrame){if(t=e,this._sprite.spriteFrame==t)return}else if(t=null,this._sprite.spriteFrame==t)return;this._sprite.spriteFrame=t,this._frame=e,this._adjustSize()}},getShader:function(){return this._shader},setSize:function(e,t){this._fixedWidth==e&&this._fixedHeight==t||(this._fixedWidth=e,this._fixedHeight=t,0<this._fixedWidth&&0<this._fixedHeight?this._sprite.sizeMode=cc.Sprite.SizeMode.CUSTOM:this._sprite.sizeMode=cc.Sprite.SizeMode.RAW,this._adjustSize())},setBlendMode:function(e){if(this._sprite){var t,i;switch(e){case b8e.BlendMode.NORMAL:t=cc.BlendFunc.BlendFactor.SRC_ALPHA,i=cc.BlendFunc.BlendFactor.ONE_MINUS_SRC_ALPHA;break;case b8e.BlendMode.ADD:t=cc.BlendFunc.BlendFactor.SRC_ALPHA,i=cc.BlendFunc.BlendFactor.ONE;break;case b8e.BlendMode.LIGHTEN:t=cc.BlendFunc.BlendFactor.SRC_ALPHA,i=cc.BlendFunc.BlendFactor.DST_ALPHA;break;default:t=cc.BlendFunc.BlendFactor.SRC_ALPHA,i=cc.BlendFunc.BlendFactor.ONE_MINUS_SRC_ALPHA}this._sprite.srcBlendFactor=t,this._sprite.dstBlendFactor=i}},_adjustSize:function(){if(this._sprite){var e=null;if(this._frame&&(this._frame instanceof b8e.SpriteFrame?e=this._frame.getFrame():this._frame instanceof cc.SpriteFrame&&(e=this._frame)),e)if(0<this._fixedWidth&&0<this._fixedHeight)this._setContentSize(this._fixedWidth,this._fixedHeight);else{var t=e.getOriginalSize(),i=t.width,n=t.height;this._setContentSize(i,n)}else this._setContentSize(0,0)}},_setContentSize:function(e,t){this._width==e&&this._height==t||this._super(e,t)},isLoaded:{get:function(){return this._isLoaded}},isLoading:{get:function(){return this._isLoading}},resetDisplay:function(){this.clear(),this._fixedWidth=0,this._fixedHeight=0,this._isLoaded=!1,this._isLoading=!1,this._super()},resetSprite:function(){this._sprite.trim=!1,this._sprite.type=cc.Sprite.Type.SIMPLE,this._sprite.sizeMode=cc.Sprite.SizeMode.RAW,this.resetShader()},resetShader:function(){this._shader.reset(),this._shader.update(!0)},clear:function(){this.unloadTexture(),this.setTexture(null),this.setFrame(null)},restore:function(){this.resetSprite(),this._super()},recycle:function(){this.resetDisplay(),this._super()},release:function(){this.constructor===b8e.Sprite?b8e.Sprite.put(this):this.destroy()},dispose:function(){this._sprite&&(this._node.removeComponent(this._sprite),this._sprite.destroy(),this._sprite=null),this._shader&&(this._shader.dispose(),this._shader=null),this._super()},destroy:function(){this.constructor===b8e.Sprite&&(b8e.Sprite.poolCall||b8e.warn("强烈建议用engine.Sprite.put或release代替destroy操作！")),this._super()}}),b8e.Sprite.pool=new b8e.Pool(b8e.Sprite,1024),b8e.Sprite.get=function(){return b8e.Sprite.pool.get()},b8e.Sprite.put=function(e){return b8e.Sprite.pool.put(e)}},{}],27:[function(e,t,i){b8e.Stage=b8e.BaseDisplay.extends({ctor:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._super(e),this._setInHierarchy(!0),this._setHierarchyVisible(!0),b8e.evt.onC(this,this.onClickStage,this)},onClickStage:function(){}})},{}],28:[function(e,t,i){b8e.EditBox=b8e.BaseDisplay.extends({ctor:function(){this._super();var e=new _ccsg.EditBox(cc.size(160,40));e.createDomElementIfNeeded(),e.clearDisabled=!0,this.addChild(e),e.setDelegate(this),this._editBox=e,this.resetEditBox()},editBoxEditingDidBegan:function(){this._node.emit("editing-did-began",this)},editBoxEditingDidEnded:function(){this._node.emit("editing-did-ended",this)},editBoxTextChanged:function(e,t){this._node.emit("text-changed",this)},editBoxEditingReturn:function(){this._node.emit("editing-return",this)},setText:function(e){this._editBox&&(this._editBox.setString(e),this._updateNodeSize())},getText:function(){return this._editBox?this._editBox.getString():null},setColor:function(e){this._editBox&&(this._node.color=b8e.ColorUtil.toCCColor(e),this._editBox.setFontColor(this._node.color))},setLineHeight:function(e){this._editBox&&(this._editBox.setLineHeight(e),this._updateNodeSize())},setFontSize:function(e){this._editBox&&(this._editBox.setFontSize(e),this._updateNodeSize())},setSize:function(e,t){this._super(e,t),this._editBox&&(this._editBox.setContentSize(e,t),this._updateNodeSize())},_updateNodeSize:function(){},resetEditBox:function(){var e=this._editBox;e.setInputFlag(cc.EditBox.InputFlag.DEFAULT),e.setInputMode(cc.EditBox.InputMode.ANY),e.setReturnType(cc.EditBox.KeyboardReturnType.DEFAULT),e.setMaxLength(20),e.stayOnTop(!1),e.setString(""),e.setFontSize(24),e.setLineHeight(0),this.setColor(4294967295),this._updateNodeSize()},dispose:function(){this._editBox&&(this.removeChild(this._editBox),this._editBox.setDelegate(null),this._editBox=null),this._super()}})},{}],29:[function(e,t,i){b8e.Label=b8e.BaseDisplay.extends({ctor:function(){this.constructor===b8e.Label&&(b8e.Label.poolCall||b8e.warn("强烈建议用engine.Label.get代替new操作！")),this._super();var e=_ccsg.Label.pool.get();e.setVisible(!1),e.clearDisabled=!0,this.addChild(e),this._label=e,this.resetLabel()},setStroke:function(e,t){if(0<e){var i=this._label;i&&(i.setOutlined(!0),i.setOutlineColor(b8e.ColorUtil.toCCColor(t)),i.setOutlineWidth(e),i.setMargin(e))}else this.removeOutline()},setText:function(e){this._label&&(this._label.setString(e),this._updateNodeSize())},setColor:function(e){this._label&&(this._node.color=b8e.ColorUtil.toCCColor(e),this._label.setColor(this._node.color))},isMultiline:function(e){this._label&&this._label.enableWrapText(e)},isWordWrap:function(e){e?this.setOverflow(b8e.OverflowType.RESIZE_HEIGHT):this.setOverflow(b8e.OverflowType.NONE)},setLineHeight:function(e){this._label&&(this._label.setLineHeight(e),this._updateNodeSize())},setLetterSpacing:function(e){this._label&&(this._label.setSpacingX(e),this._updateNodeSize())},isBold:function(e){this._label&&this._label.enableBold(e)},isUnderline:function(e){this._label&&this._label.enableUnderline(e)},setFontSize:function(e){this._label&&(this._label.setFontSize(e),this._updateNodeSize())},setFontFile:function(e){this._label&&(this._fontUrl&&(b8e.res.unloadRes(this._fontUrl,this.onFontComplete,this),this._fontUrl=null,this._label.setFontAsset(null)),e&&(this._fontUrl=e,b8e.res.loadRes(this._fontUrl,null,this.onFontComplete,this)))},onFontComplete:function(e,t){e?b8e.error(e):this._label.setFontAsset(t)},setFontFamily:function(e){this._label&&this._label.setFontFamily(e)},setHorizontalAlign:function(e){this._label&&this._label.setHorizontalAlign(e)},setVerticalAlign:function(e){this._label&&this._label.setVerticalAlign(e)},setOverflow:function(e){this._label&&(this._overflow=e,this._label.setOverflow(this._overflow),this._updateNodeSize())},removeOutline:function(){this._label&&(this._label.setOutlined(!1),this._label.setMargin(0))},setSize:function(e,t){this._super(e,t),this._label&&(this._label.setContentSize(e,t),this._updateNodeSize())},_updateNodeSize:function(){if(this._label&&(this._overflow===b8e.OverflowType.NONE||this._overflow===b8e.OverflowType.RESIZE_HEIGHT)){var e=this._label.getContentSize();this._setContentSize(e.width,e.height),this._label.setPosition(.5*this._label.width,.5*this._label.height)}},onHierarchyVisible:function(e){this._super(e),this._label&&this._visible&&this._label.setVisible(e)},setVisible:function(e){this._visible!=e&&(this._super(e),this._label&&this._hierarchyVisible&&this._label.setVisible(e))},restore:function(){this._super(),this.resetLabel()},resetLabel:function(){var e=this._label;this._overflow=b8e.OverflowType.NONE,e.setVisible(!1),e.setString(""),e.setFontSize(24),e.setLineHeight(0),e.setSpacingX(0),e.setOverflow(this._overflow),this.setHorizontalAlign(b8e.HorizontalAlign.LEFT),this.setVerticalAlign(b8e.VerticalAlign.TOP),this.setFontFile(null),this.setFontFamily("Arial"),this.isMultiline(!1),this.setColor(4294967295),this.isBold(!1),this.isUnderline(!1),this.removeOutline(),this._updateNodeSize()},recycle:function(){this.resetLabel(),this._super()},release:function(){this.constructor===b8e.Label?b8e.Label.put(this):this.destroy()},dispose:function(){this._label&&(this.removeChild(this._label),this._label.cleanup(),_ccsg.Label.pool.put(this._label),this._label=null),this._super()},destroy:function(){this.constructor===b8e.Label&&(b8e.Label.poolCall||b8e.warn("强烈建议用engine.Label.put或release代替destroy操作！")),this._super()}}),b8e.Label.pool=new b8e.Pool(b8e.Label,512),b8e.Label.get=function(){return b8e.Label.pool.get()},b8e.Label.put=function(e){return b8e.Label.pool.put(e)}},{}],30:[function(e,t,i){b8e.LayoutType=b8e.Enum({None:0,Horizontal:1,Vertical:2,Grid:3}),b8e.Layout=b8e.Object.extends({ctor:function(e){this._super(),e&&this.setLayout(e)},type:b8e.LayoutType.None,spacingX:0,spacingY:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,setLayout:function(e){void 0!==e.type&&(this.type=e.type),void 0!==e.spacingX&&(this.spacingX=e.spacingX),void 0!==e.spacingY&&(this.spacingY=e.spacingY),void 0!==e.paddingLeft&&(this.paddingLeft=e.paddingLeft),void 0!==e.paddingRight&&(this.paddingRight=e.paddingRight),void 0!==e.paddingTop&&(this.paddingTop=e.paddingTop),void 0!==e.paddingBottom&&(this.paddingBottom=e.paddingBottom)},clone:function(){var e=new b8e.Layout;return e.setLayout(this),e}}),b8e.InstallUtil.installOb(b8e.Layout),b8e.HorizontalLayoutAtts={type:b8e.LayoutType.Horizontal,spacingX:5,paddingLeft:10,paddingRight:10},b8e.VerticalLayoutAtts={type:b8e.LayoutType.Vertical,spacingY:5,paddingTop:5,paddingBottom:5},b8e.GridLayoutAtts={type:b8e.LayoutType.Grid,spacingX:5,spacingY:5,paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5},b8e.HorizontalLayout=new b8e.Layout(b8e.HorizontalLayoutAtts),b8e.VerticalLayout=new b8e.Layout(b8e.VerticalLayoutAtts),b8e.GridLayout=new b8e.Layout(b8e.GridLayoutAtts)},{}],31:[function(e,t,i){b8e.LayoutContainer=b8e.Widget.extends({ctor:function(){this._layout=new b8e.Layout,b8e.obMgr.addOb(this._layout,this.updateLayout,this),this._super()},dispose:function(){b8e.obMgr.disposeOb(this._layout,this.updateLayout,this),this._layout=null},layout:{set:function(e){this._layout.setLayout(e),this.setAnchor(0,1),this.updateLayout()},get:function(){return this._layout}},updateLayout:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;b8e.LayoutUtil.layout(this,e)},setLayoutContent:function(e){this._layoutContent=e,this.updateLayout()},getLayoutContent:function(){return this._layoutContent?this._layoutContent:this.getChildren()}})},{}],32:[function(e,t,n){b8e.List=b8e.Object.extends({ctor:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;this._super(),this._itemRenders=[],this._itemrenderPool=[],this._clears=[],this.setScrollView(e),this._setItemRender(t,i)},show:function(){!(0<arguments.length&&void 0!==arguments[0])||arguments[0];var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];1!=this._isShow&&((this._layout.type!=b8e.LayoutOld.Type.HORIZONTAL||this._viewCb)&&(this._scrollView.node.on("scroll-ended",this._onScrollEnd,this),this._scrollView.node.on("scrolling",this._onScrolling,this),this._scrollView.node.on("scroll-to-top",this._onScrolling,this),this._scrollView.node.on("scroll-to-bottom",this._onScrolling,this)),e&&this._scrollView.scrollToTop(0),this._isShow=!0,this.setData(this._data),this._clearAllTimer&&this._clearAllTimer.stop())},hide:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];0!=this._isShow&&((this._layout.type!=b8e.LayoutOld.Type.HORIZONTAL||this._viewCb)&&(this._scrollView.node.off("scroll-ended",this._onScrollEnd,this),this._scrollView.node.off("scrolling",this._onScrolling,this),this._scrollView.node.off("scroll-to-top",this._onScrolling,this),this._scrollView.node.off("scroll-to-bottom",this._onScrolling,this)),this._isShow=!1,b8e.Tween.kill(this),this._startRefreshTimer&&this._startRefreshTimer.stop(),this._updateTimer&&this._updateTimer.stop(),e&&(this._clearAllItemRender(!1),this._clearAllTimer?(this._clearAllTimer.reset(),this._clearAllTimer.start()):this._clearAllTimer=b8e.Timer.add(this,this._clearAllItemRender,6e4,1)))},setViewCb:function(e,t){this._viewCb=e,this._viewThis=t},setScrollView:function(e){e&&(e instanceof cc.ScrollView?this._scrollView=e:b8e.error("game.List.setScrollView arguments view type error"))},_setItemRender:function(e,t){this._itemRenderClass=e;var i=new this._itemRenderClass;this._itemWidth=i.getWidth(),this._itemHeight=i.getHeight(),this._layout=new b8e.LayoutOld;var n=this._scrollView.content.getComponent(cc.Layout);this._layout.setupByComponent(n),this._layout.lineMaxCount=t,this._scrollView.content.removeComponent(cc.Layout);var s=this._scrollView.content.parent.getContentSize();this._maskWidth=s.width,this._maskHeight=s.height;var r=s.width-this._layout.paddingLeft-this._layout.paddingRight,o=s.height-this._layout.paddingTop-this._layout.paddingBottom;this._widthCount=1==t?r/(this._itemWidth+this._layout.spacingX)>>0:t,this._heightCount=Math.ceil(o/this._itemHeight),0==this._widthCount&&(this._widthCount=1),0==this._heightCount&&(this._heightCount=1),this._maskViewCount=this._widthCount*this._heightCount},setData:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this._data=e,this._data||(this._data=[]),0!=this._isShow&&(t&&this._scrollView.scrollToTop(0),this._forceRefresh=!0,0!=this._data.length?this.refreshNext():this._clearAllItemRender())},refreshNext:function(){this._startRefreshTimer?(this._startRefreshTimer.reset(),this._startRefreshTimer.start()):this._startRefreshTimer=b8e.Timer.add(this,this._startRefresh,50,1,2)},_startRefresh:function(){this._startRefreshTimer.stop(),this._updateIndex=0,this._maxCount=this._data.length>this._itemRenders.length+this._itemrenderPool.length?this._data.length:this._itemRenders.length+this._itemrenderPool.length,this._updateTimer?(this._updateTimer.reset(),this._updateTimer.start()):this._updateTimer=b8e.Timer.add(this,this._updateItemRender,100,0,2),this._updateItemRender()},_updateItemRender:function(){var e,t=this._itemWidth+this._layout.spacingX,i=this._itemHeight+this._layout.spacingY;e=this._layout.type==b8e.LayoutOld.Type.HORIZONTAL?t*this._data.length+this._layout.paddingLeft+this._layout.paddingRight:this._widthCount*t+this._layout.paddingLeft+this._layout.paddingRight;var n=Math.ceil(this._data.length/this._widthCount)*i+this._layout.paddingTop+this._layout.paddingBottom;if(this._scrollView.content.setContentSize(e,n),this._maxCount>this._updateIndex){var s,r,o,a,l,h,c,u,d=0;for(o=this._maxCount-this._updateIndex,a=this._maskViewCount,this._updateCount=a<o?a:o,t=this._itemWidth,i=this._itemHeight+this._layout.spacingY,u=this._updateIndex+this._updateCount,this._updateIndex;this._updateIndex<u;this._updateIndex++)this._updateIndex<this._itemRenders.length?s=this._itemRenders[this._updateIndex]:(s=this._getItemRender(),this._itemRenders.push(s)),s.setSize(this._itemWidth,this._itemHeight),s.setAnchor(.5,.5),s.itemRenderIndex=this._updateIndex,r=this._data[s.itemRenderIndex],s.itemRenderData=r,this._layout.type==b8e.LayoutOld.Type.HORIZONTAL?(c=-1*this._layout.paddingTop,h=this._layout.paddingLeft+t*(this._updateIndex+.5)+this._layout.spacingX*this._updateIndex,s=this._itemRenders[this._updateIndex],r||0===r?(s.parent||s.addToParent(this._scrollView.content),s.setData(r),s.setPosition(h,c),s.setVisible(!0),s.show()):(s.setVisible(!1),s.hide(!1))):r?(l=this._updateIndex/this._widthCount>>0,h=1==this._widthCount?0:this._layout.paddingLeft+t*(s.itemRenderIndex%this._widthCount+.5)+this._layout.spacingX*(s.itemRenderIndex%this._widthCount)-.5*this._scrollView.content.width,c=-1*this._layout.paddingTop+l*i*-1+-.5*i,s.y=c,s.x=h,s.setData(r),this.viewTest(s)?(s.parent||s.addToParent(this._scrollView.content),s.setVisible(!0),s.show()):(s.setVisible(!1),s.hide(!1),s.removeFromParent())):(s.setVisible(!1),s.hide(!1),s.removeFromParent());if(this._updateIndex>=this._maxCount){for(d=this._updateIndex;d<this._itemRenders.length;d++)(s=this._itemRenders[d]).setVisible(!1),s.hide(!1),s.itemRenderData=null,s.removeFromParent();this._updateTimer&&this._updateTimer.stop(),this._onScrollEnd()}}else{for(d=this._updateIndex;d<this._itemRenders.length;d++)(s=this._itemRenders[d]).hide(!1),s.itemRenderData=null,s.removeFromParent();this._updateTimer&&this._updateTimer.stop(),this._onScrollEnd()}},viewTest:function(e){return this._scrollView.content.y<=-1*(e.y-this._itemHeight-this._layout.spacingY)&&-1*(this._scrollView.content.y+this._maskHeight+2*(this._itemHeight+this._layout.spacingY))<=e.y},viewTestH:function(e){return-1*this._scrollView.content.x-this._itemWidth<e.x-.5*this._itemWidth&&-1*this._scrollView.content.x+this._maskWidth+this._itemWidth>e.x+.5*this._itemWidth},getItemRender:function(e){var t;for(i=0;i<this._itemRenders.length;i++)if((t=this._itemRenders[i]).itemRenderIndex==e)return t;return null},getItemRenderLocalToGlobal:function(e){return e?{x:e.x+this._scrollView.node.x,y:e.y-this._scrollView.content.y+this._scrollView.node.y}:0},scrollLeft:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:300,t=this._scrollView.content.x+this._maskWidth;0<t&&(t=0),this._scrollView.stopAutoScroll(),b8e.Tween.get(this).to({contentX:t,onUpdate:this._onScrolling,onUpdateThis:this},e).call(this._onScrollEnd)},scrollRight:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:300,t=this._scrollView.content.x,i=this._maskWidth,n=t-i,s=-1*this._scrollView.content.getContentSize().width+i;n<s&&(n=s),this._scrollView.stopAutoScroll(),b8e.Tween.get(this).to({contentX:n,onUpdate:this._onScrolling,onUpdateThis:this},e).call(this._onScrollEnd)},_onScrollEnd:function(){if(Math.ceil(this._data.length/this._widthCount)*(this._itemHeight+this._layout.spacingY)<=this._maskHeight&&this._scrollView.scrollToTop(0),this._onScrolling(),this._viewCb&&this._viewThis){for(var e,t=[],i=[],n=[],s=0,r=this._itemRenders.length;s<r;s++)e=this._itemRenders[s],this.viewTestH(e)?i.push(this._data[s]):0==i.length?t.push(this._data[s]):n.push(this._data[s]);this._viewCb.call(this._viewThis,t,i,n)}},_onScrolling:function(){this._scrollView.content.x;var e=this._scrollView.content.y;if(4*Math.abs(this._offsetY)<this._itemHeight&&(this._offsetY=this._offsetY+e-this._lastOffsetY,this._offsetY<this._itemHeight))this._lastOffsetY=e;else{this._offsetY=0,this._lastOffsetY=e;for(var t,i=this._itemHeight+this._layout.spacingY,n=(this._scrollView.content.getContentSize(),((e+this._layout.paddingTop)/i>>0)*this._widthCount),s=n;s<n+this._maskViewCount;s++)(t=this._itemRenders[s])&&(t.itemRenderData||0===t.itemRenderData)&&this.viewTest(t)&&(t.show(),t.setVisible(!0),t.parent||t.addToParent(this._scrollView.content))}},contentX:{set:function(e){this._scrollView.content.x=e},get:function(){return this._scrollView.content.x}},contentY:{set:function(e){this._scrollView.content.y=e},get:function(){return this._scrollView.content.y}},_clearAllItemRender:function(){var e,t;for(t=0<arguments.length&&void 0!==arguments[0]&&!arguments[0]?this._maskViewCount+this._widthCount:0;this._itemRenders.length>t;)(e=this._itemRenders.pop())&&(e.hide(),e.removeFromParent(),e.itemRenderData=null),this._itemrenderPool.push(e);this._itemrenderPool.sort(this._sortItemRender),0==this._itemRenders.length&&this._clearAllTimer&&this._clearAllTimer.stop()},_sortItemRender:function(e,t){return e.itemRenderIndex-t.itemRenderIndex},_getItemRender:function(){return 0<this._itemrenderPool.length?this._itemrenderPool.shift():new this._itemRenderClass},dispose:function(){if(this.hide(),this._itemRenders){for(i=0;i<this._itemRenders.length;i++)this._itemRenders[i].release();this._itemRenders.length=0,this._itemRenders=null}if(this._itemrenderPool){for(i=0;i<this._itemrenderPool.length;i++)this._itemrenderPool[i].release();this._itemrenderPool.length=0,this._itemrenderPool=null}this._updateTimer&&(this._updateTimer.dispose(),this._updateTimer=null),this._clearAllTimer&&(this._clearAllTimer.dispose(),this._clearAllTimer=null),this._startRefreshTimer&&(this._startRefreshTimer.dispose(),this._startRefreshTimer=null),this._itemRenderClass=null,this._scrollView=null,this._data=null},release:function(){this.destroy()},destroy:function(){this.dispose()}}),b8e.LayoutOld=b8e.Object.extends({lineMaxCount:1,type:2,spacingX:0,spacingY:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,ctor:function(){this._super()},setupByComponent:function(e){e&&(this.type=e.type,this.paddingLeft=e.paddingLeft,this.paddingRight=e.paddingRight,this.paddingTop=e.paddingTop,this.paddingBottom=e.paddingBottom,this.spacingX=e.spacingX,this.spacingY=e.spacingY)}}),b8e.LayoutOld.Type=b8e.Enum({NONE:0,HORIZONTAL:1,VERTICAL:2,GRID:3})},{}],33:[function(e,t,i){b8e.ListItem=b8e.SkinWidget.extends({loadComplete:function(){this.__waitUpdate&&this.notifyData()},notifyData:function(){this.__isInit__?(this.__waitUpdate=!1,this.setData(this.data)):this.__waitUpdate=!0},setData:function(e){},send:function(){this.list.send.apply(this.list,arguments)},layout:function(){this.list&&this.list.callLayout()}})},{}],34:[function(e,t,i){b8e.ScrollBoxType=b8e.Enum({None:0,Horizontal:1,Vertical:2}),b8e.ScrollBox=b8e.Widget.extends({ctor:function(){this._super(),this._inertia=!0,this.setAnchor(0,1),this.getNode().addComponent(cc.Mask),this.initContainer()},dispose:function(){this._container&&(this._container.dispose(),this._container=null)},initContainer:function(){},show:function(){var e=this.getNode();this.setSize(this.parent.width,this.parent.height),e.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),e.on(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0),e.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this,!0),e.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),e.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this,!0)},hide:function(){node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),node.off(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0),node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this,!0),node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this._startTouch=!1,this._touchMoved=!1},setContainerSize:function(e,t){this._container&&this._container.setSize(e,t)},setScrollType:function(e){this._scrollType=e,this._container&&this.autoScrollContainer()},getScrollType:function(){return this._scrollType},_onMouseWheel:function(e){if(this._container&&this._scrollType!==b8e.ScrollBoxType.Horizontal&&this._setMouseRect()){this._touchMoved=!0;var t=this._container.y+.3*e.getScrollY();this._scroll(this._container.x,t,300)}},_onTouchBegan:function(e){this._startTouch||this._setMouseRect()&&(this._startTouch=!0,b8e.Tween.kill(this._container),this._lastPos=this._startPos=e.getLocation(),this.onScollBegin(),this._stopPropagationIfTargetIsMe(e))},_onTouchMove:function(e){var t,i,n,s,r;if(this._container&&(this._lastPos&&(n=(r=e.getLocation()).x-this._lastPos.x,s=r.y-this._lastPos.y,0!=n||0!=s))){switch(this._scrollType){case b8e.ScrollBoxType.None:t=this._container.x+n,i=this._container.y+s;break;case b8e.ScrollBoxType.Horizontal:t=this._container.x+n,i=this._container.y;break;case b8e.ScrollBoxType.Vertical:t=this._container.x,i=this._container.y+s;break;default:b8e.error("b8e.ScrollBox 类型错误")}this._scroll(t,i),this._lastPos=r,this._endPos=r,this._touchMoved=!0,this._stopPropagationIfTargetIsMe(e)}},_onTouchCancelled:function(e){this._lastPos=null,this._stopPropagationIfTargetIsMe(e),this._startTouch=!1,this._touchMoved=!1,this._scrollEnd(),this._inertiaScroll()},_onTouchEnd:function(e){this._lastPos=null,this._touchMoved?e.stopPropagation():this._stopPropagationIfTargetIsMe(e),this._startTouch=!1,this._touchMoved=!1,this._scrollEnd(),this._inertiaScroll()},_stopPropagationIfTargetIsMe:function(e){e.target===this.parent&&e.stopPropagation()},scrollToTop:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(this._scrollType!=b8e.ScrollBox.Horizontal&&this._container){this._setMouseRect();var i=this._container.x,n=this._mouseBottom-e;this._scroll(i,n,t)}},scrollToBottom:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(this._scrollType!=b8e.ScrollBox.Horizontal&&this._container){this._setMouseRect();var i=this._container.x,n=this._mouseTop+e;this._scroll(i,n,t)}},scrollToRight:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(this._scrollType!=b8e.ScrollBox.Vertical&&this._container){this._setMouseRect();var i=this._mouseLeft-e,n=this._container.y;this._scroll(i,n,t)}},scrollToLeft:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(this._scrollType!=b8e.ScrollBox.Vertical&&this._container){this._setMouseRect();var i=this._mouseRight+e,n=this._container.y;this._scroll(i,n,t)}},scrollToPos:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;e&&this._scroll(e.x,e.y,t)},_scroll:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this._container&&(e===this._container.x&&t===this._container.y||(b8e.Tween.kill(this._container),0<i?b8e.Tween.get(this._container).to({x:e,y:t},i,b8e.Ease.quadOut).call(this._scrollEnd,this):(this._container.setPosition(e,t),this.onScolling())))},_scrollEnd:function(){this._scrollReset(),this.onScollEnd()},_scrollReset:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:200;if(this._container){var t,i,n=this._container.getPosition(),s=!1;t=0===this._mouseRight&&0===this._mouseLeft?0:n.x>=this._mouseRight?this._mouseRight:n.x<=this._mouseLeft?this._mouseLeft:n.x,0===this._mouseTop&&0===this._mouseBottom?i=0:n.y>=this._mouseTop?i=this._mouseTop:n.y<=this._mouseBottom?(i=this._mouseBottom,s=!0):i=n.y,this._scroll(t,i,e),s&&this.onScrollBottomReset()}},_setMouseRect:function(){if(!this._container)return!1;var e=this.width-this._container.width,t=this.height-this._container.height;if(this._mouseLeft=0,this._mouseRight=0,this._mouseTop=0,(this._mouseBottom=0)<=e&&0<=t)return!1;var i=this._container.width,n=this._container.height;switch(this._scrollType){case b8e.ScrollBoxType.None:e<0&&(this._mouseLeft=this.width-i),t<0&&(this._mouseTop=this.height-n);break;case b8e.ScrollBoxType.Horizontal:if(!(e<0))return!1;this._mouseLeft=this.width-i;break;case b8e.ScrollBoxType.Vertical:if(!(t<0))return!1;this._mouseTop=n-this.height}return!0},_inertiaScroll:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:400;if(0!=this._inertia&&this._endPos&&this._startPos){if(!this._container)return!1;var t,i,n,s;this._container.getPosition(),0===this._mouseRight&&0===this._mouseLeft?n=0:(t=5*(this._endPos.x-this._startPos.x),(n=this._container.x+t)>=this._mouseRight?n=this._mouseRight:n<=this._mouseLeft&&(n=this._mouseLeft)),0===this._mouseTop&&0===this._mouseBottom?s=0:(i=5*(this._endPos.y-this._startPos.y),(s=this._container.y+i)>=this._mouseTop?s=this._mouseTop:s<=this._mouseBottom&&(s=this._mouseBottom)),this._scroll(n,s,e),this._startPos=null,this._endPos=null}},autoScrollContainer:function(){this._setMouseRect(),this._scrollReset(0)},onScollBegin:function(){},onScolling:function(){},onScollEnd:function(){},onScrollBottomReset:function(){},addBoxChild:function(e){this._container&&this._container.addChild(e)},removeBoxChild:function(e){this._container&&this._container.removeChild(e)},setContainer:function(e){this._container&&(b8e.warn("box 已经存在container"),this._container.removeFromParent()),this._container=e,this.addChild(this._container),this.autoScrollContainer()},getContainer:function(){return this._container}})},{}],35:[function(e,t,i){b8e.ScrollList=b8e.ScrollBox.extends({ctor:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:b8e.ScrollBoxType.Vertical,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:b8e.LayoutType.Vertical;this._layoutType=t,this._scrollType=e,this._renders=b8e.HashMap.get(),this._rendersTemp=b8e.HashMap.get(),this._renderPool=b8e.HashMap.get(),this.autoRefresh=!0,this.spliceRefresh=!1,this._super()},dispose:function(){},refreshLen:{set:function(e){this._refreshLen=e,this._refreshEndIndex=e}},initContainer:function(){switch(this._container=new b8e.LayoutContainer,this._layoutType){case b8e.LayoutType.Horizontal:this._container.layout=b8e.HorizontalLayout;break;case b8e.LayoutType.Vertical:this._container.layout=b8e.VerticalLayout;break;case b8e.LayoutType.Grid:this._container.layout=b8e.GridLayout;break;default:b8e.error("ScrollList.initContainer typeError")}this.addChild(this._container)},show:function(){this._super(),this._container.setSize(this.width,this.height)},clear:function(){0<this._rendersTemp.count()&&(this._rendersTemp.forEach(this._clearItems,this),this._rendersTemp.clear()),0<this._renders.count()&&(this._renders.forEach(this._clearItems,this),this._renders.clear()),this._listTimer&&(b8e.Timer.remove(this,this._updateData),this._listTimer=null)},layout:{get:function(){return this._container?this._container.layout:null},set:function(e){this._container&&(this._container.layout=e)}},getLayoutContent:function(){return this._layoutContent?this._layoutContent:this.getChildren()},itemRender:{set:function(e){if(e)if(this._renderCls)b8e.error("暂时不支持重设itemRender");else{e instanceof Array?this._renderCls=e:this._renderCls=[e];for(var t=0,i=this._renderCls.length;t<i;t++)this._renderPool.set(t,[])}else b8e.error("set itemRender error")}},setData:function(e){this._renderCls&&0!=this._renderCls.length?(this._datas=e,this._refreshing=!1,this._listTimer?(this._listTimer.reset(),this._listTimer.start()):this._listTimer=b8e.Timer.add(this,this._updateData,100)):b8e.error("ScrollList 没有设置 itemRender")},_updateData:function(){this._listTimer.stop();var e=this._renders;this._renders=this._rendersTemp,this._rendersTemp=e,this._renders.clear();var t,i,n,s=[];if(this._datas&&0<this._datas.length){var r;r=this.spliceRefresh&&this._datas.length>this._refreshEndIndex?this._refreshEndIndex:this._datas.length;for(var o=0;o<r;o++)if(t=this._datas[o]){if(!t.__installOb__)return void b8e.error("list 数据必须执行installUtil.installOb");i=t.objHash(),(n=this._getRender(t)).parent||this._container.addChild(n),n.data=t,n.__bindOb__||(b8e.obMgr.addOb(t,n.notifyData,n),n.__bindOb__=!0,b8e.obMgr.notify(t)),t.__isRefresh&&(n.width=this._container.width-this.layout.paddingLeft-this.layout.paddingRight),this._renders.set(i,n),s.push(n)}else b8e.warn("_updateData data null");this._container.setLayoutContent(s),this.height>this._container.height&&(this._container.height=this.height),this.autoScrollContainer()}0<this._rendersTemp.count()&&(this._rendersTemp.forEach(this._clearItems,this),this._rendersTemp.clear())},callLayout:function(){this._callLayout()},_callLayout:function(){var e=this._renders.values();0<e.length&&this._container.setLayoutContent(e)},_clearItems:function(e,t){this._putRender(t)},onScrollBottomReset:function(){this._datas&&this.spliceRefresh&&!this._refreshing&&(this._datas.length<=this._refreshEndIndex||(this._refreshData||(this._refreshData=new b8e.ScrollList.RefreshData,this._refreshData.__renderType=this._renderCls.length-1),this._refreshing=!0,this._datas=this._datas.concat(),this._datas.splice(this._refreshEndIndex,0,this._refreshData),this._refreshEndIndex++,this._updateData(),this.scrollToBottom(),this._onScrollBottomResetCb&&this._onScrollBottomResetThis&&this._onScrollBottomResetCb.call(this._onScrollBottomResetThis),this.autoRefresh&&(b8e.Tween.kill(this),b8e.Tween.get(this).wait(1e3).call(this._onRefreshResetEnd,this))))},_onRefreshResetEnd:function(){this._refreshEndIndex--,this._datas.splice(this._refreshEndIndex,1),this._refreshEndIndex+=this._refreshLen,this.setData(this._datas)},_putRender:function(e){var t=e.__renderType,i=this._renderPool.get(t);i||(i=[],this._renderPool.set(t,i)),e.data&&e.__bindOb__&&(b8e.obMgr.removeOb(e.data,e.notifyData,e),e.data=null,e.__bindOb__=!1),e.parent&&e.removeFromParent(),i.push(e)},_getRender:function(e){var t=e.objHash(),i=e.__renderType?e.__renderType:0,n=this._rendersTemp.get(t);if(n){if(this._rendersTemp.del(t),n.__renderType===i)return n;this._putRender(n)}var s=this._renderPool.get(i);if(s&&0<s.length)return s.pop();var r=this._renderCls[i];return r?((n=new r).list=this,n.__renderType=i,n):(b8e.error("list renderCls 没有找到对应枚举",i),null)},send:function(){this.moduleEnum?b8e.module.sendToControl(this.moduleEnum,arguments):b8e.error("ScrollList send 方法需要给出 moduleEnum")}}),b8e.ScrollList.RefreshData=b8e.Object.extends({__isRefresh:!0}),b8e.InstallUtil.installOb(b8e.ScrollList.RefreshData)},{}],36:[function(e,t,i){b8e.SkinWidget=b8e.Widget.extends({ctor:function(e){e||b8e.error("b8e.SkinWidget ctor 必须传入 preUrl"),this._preUrl=b8e.macro.SKIN_ROOT_PATH?b8e.macro.SKIN_ROOT_PATH+e:e,this._super()},dispose:function(){this._prefab&&(this._prefab.release(),this._prefab=null),this._preUrl=null,this.skin=null,this._evts=null,this.__isInit__=!1,this.__bind=!1,this.__waitNotifys=null,this.moduleEnum=0},show:function(){this._initPrefab(),this._super()},hide:function(){this._super(),this.__isInit__&&this.onHide()},_initPrefab:function(){this._prefab||(this._prefab=new b8e.PrefabDisplay,this.addChild(this._prefab));var e=this._prefab.isLoaded(),t=this._prefab.isLoading();e?this._onComplete():t||this._prefab.loadPrefab(this._preUrl,null,this._onComplete,this)},_onComplete:function(){if(!this.__isInit__){if(this._prefab&&!this.skin&&(this.skin={},this._evts=[],this._prefab._children&&0<this._prefab._children.length)){var e=this._prefab._children[0];this.skin.node=e,this._initSkin(e),this.moduleEnum?b8e.module.bindViewToControl(this.moduleEnum):this._bindEvts(),this.setSize(this.skin.node.width,this.skin.node.height)}this.init(),this.__isInit__=!0}this.loadComplete(),this.onShow(),this.notifyWaits()},_initSkin:function(e){if(e&&e.children&&0<e.children.length)for(var t,i,n=0,s=e.children.length;n<s;n++)(i=(t=e.children[n]).getComponent(cc.Label))||(i=t.getComponent(cc.Sprite)),i||(i=t.getComponent(cc.RichText)),i||(i=t.getComponent(cc.EditBox)),i||(i=t.getComponent(cc.ScrollView)),i||(i=t.getComponent(cc.Layout)),i||(i=t.getComponent(cc.Mask)),i||(i=t),this.skin[t.name]?b8e.warn("skin 中属性重复了！",t.name):(this.skin[t.name]=i,(i=t.getComponent(cc.Button))&&i.interactable&&(t.removeComponent(i),this._evts.push(t)),t.children&&0<t.children.length&&this._initSkin(t))},_bindEvts:function(){if(this.__bind)b8e.error("view 已经完成bind");else{var e,t,i,n,s=this.getEvts();if(s&&0<s.length)for(e=0,t=s.length;e<t;e++)(i=s[e])&&""!==i.name?(n=this[i.name])&&"function"==typeof n?b8e.evt.onC(i,n,this):b8e.error("view bind事件在SkinWidget中不存在",i.name):b8e.error("bind事件node不存在");this.__bind=!0}},dptG:function(e,t,i,n){b8e.evt.dptG(e,t,i,n)},getEvts:function(){return this._evts},isInit:{get:function(){return this.__isInit__}},waitNotify:function(e){this.__isInit__?this.notify.apply(this,e):(this.__waitNotifys||(this.__waitNotifys=[]),this.__waitNotifys.push(e))},notifyWaits:function(){if(this.__waitNotifys&&0<this.__waitNotifys.length){for(var e=0,t=this.__waitNotifys.length;e<t;e++)this.notify.apply(this,this.__waitNotifys[e]);this.__waitNotifys.length=0,this.__waitNotifys=null}},send:function(){b8e.module.sendToControl(this.moduleEnum,arguments)},loadComplete:function(){},init:function(){},onShow:function(){},onHide:function(){},notify:function(){}})},{}],37:[function(e,t,i){b8e.Toggle=b8e.Object.extends({ctor:function(){this._super(),this.curIndex=-1},init:function(e){if(e){this.toggles=e;for(var t=0,i=this.toggles.length;t<i;t++)this.toggles[t].t.node.active=!1}},onSelectCheck:function(e,t){this._checkCb=e?{func:e,thisArg:t}:null},onSelectChange:function(e,t){this._selectCb=e?{func:e,thisArg:t}:null},select:function(e){if(this.toggles&&0!=this.toggles.length){if(-1!=this.curIndex)var t=this.toggles[this.curIndex];this.curIndex=e;var i=this.toggles[this.curIndex];this._checkCb&&!this._checkCb.func.call(this._checkCb.thisArg,i,t)||(t&&t.t&&(t.t.node.active=!1),i&&i.t&&(i.t.node.active=!0,this._selectCb&&this._selectCb.func.call(this._selectCb.thisArg,i,t)))}else b8e.error("没有初始化toggle")},onHide:function(e,t){this._hideCb=e?{func:e,thisArg:t}:null},hide:function(){if(this.toggles&&0!=this.toggles.length){if(-1!=this.curIndex){var e=this.toggles[this.curIndex];e&&e.t&&(e.t.node.active=!1,this._hideCb&&this._hideCb.func.call(this._hideCb.thisArg,e)),this.curIndex=-1}}else b8e.error("没有初始化toggle")},defaultSelect:function(){this.select(0)}})},{}],38:[function(e,t,i){b8e.Widget=b8e.BaseDisplay.extends({show:function(){},hide:function(){},_setParent:function(e){this._super(e),e?this.__isShow||(this.show(),this.__isShow=!0):this.__isShow&&(this.__isShow=!1,this.hide())}})},{}],39:[function(e,t,i){b8e.BlendMode=b8e.Enum({NORMAL:0,ADD:-1,DARKEN:-1,DIFFERENCE:-1,ERASE:-1,INVERT:-1,LAYER:-1,LIGHTEN:-1,MULTIPLY:-1,OVERLAY:-1,SCREEN:-1,SUBTRACT:-1})},{}],40:[function(e,t,i){b8e.DirectionType=b8e.Enum({nNone:"",nUp:"up",nUpRight:"upright",nRight:"right",nDownRight:"downright",nDown:"down",nDownLeft:"downleft",nLeft:"left",nUpLeft:"upleft"})},{}],41:[function(e,t,i){b8e.HorizontalAlign=b8e.Enum({LEFT:0,CENTER:1,RIGHT:2})},{}],42:[function(e,t,i){b8e.OrientationType=b8e.Enum({AUTO:0,PORTRAIT:1,LANDSCAPE:2,PORTRAIT_UPSIDE_UP:3,PORTRAIT_UPSIDE_DOWN:4})},{}],43:[function(e,t,i){b8e.OverflowType=b8e.Enum({NONE:0,CLAMP:1,SHRINK:2,RESIZE_HEIGHT:3})},{}],44:[function(e,t,i){var n=b8e.PixelFormat={};n.RGB565=0,n.RGB5A1=1,n.RGBA4444=2,n.RGB888=3,n.RGBA8888=4},{}],45:[function(e,t,i){b8e.RenderType=b8e.Enum({CANVAS:1,WEBGL:2,OPENGL:3})},{}],46:[function(e,t,i){b8e.ResolutionPolicy=b8e.Enum({AUTO:0,SHOW_ALL:1})},{}],47:[function(e,t,i){b8e.SpriteStyle=b8e.Enum({SIMPLE:0,SLICED:1,TILED:2,FILLED:3})},{}],48:[function(e,t,i){b8e.VerticalAlign=b8e.Enum({TOP:0,MIDDLE:1,BOTTOM:2})},{}],49:[function(e,t,i){b8e.CameraEvent=b8e.Enum({CAMERA_DISTANCE_CHANGE:"camera_distance_change"})},{}],50:[function(e,t,i){var n=b8e.ErrorEvent=b8e.Event.extends({ctor:function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this._super(e,t,i)}});n.dispatchErrorEvent=function(e){var t=b8e.Event.create(n,n.ERROR),i=e.dispatchEvent(t);return b8e.Event.release(t),i},n.ERROR="error"},{}],51:[function(e,t,i){var a=b8e.Event=b8e.Object.extends({$eventPhase:2,$currentTarget:null,$target:null,$isDefaultPrevented:!1,$isPropagationStopped:!1,$isPropagationImmediateStopped:!1,$type:null,$bubbles:!1,$cancelable:!1,data:null,ctor:function(e,t,i,n){this._super(),this.$eventPhase=2,this.$currentTarget=null,this.$target=null,this.$isDefaultPrevented=!1,this.$isPropagationStopped=!1,this.$isPropagationImmediateStopped=!1,this.$type=e,this.$bubbles=!!t,this.$cancelable=!!i,this.data=n},type:{get:function(){return this.$type}},bubbles:{get:function(){return this.$bubbles}},cancelable:{get:function(){return this.$cancelable}},eventPhase:{get:function(){return this.$eventPhase}},currentTarget:{get:function(){return this.$currentTarget}},target:{get:function(){return this.$target}},$setTarget:function(e){return this.$target=e,!0},isDefaultPrevented:function(){return this.$isDefaultPrevented},preventDefault:function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},stopPropagation:function(){this.$bubbles&&(this.$isPropagationStopped=!0)},stopImmediatePropagation:function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},clean:function(){this.data=this.$currentTarget=null,this.$setTarget(null)}});a.dispatchEvent=function(e,t,i,n){void 0===i&&(i=!1);var s=a.create(a,t,i),r=a._getPropertyData(a);void 0!==n&&(r.data=n);var o=e.dispatchEvent(s);return a.release(s),o},a._getPropertyData=function(e){var t=e._props;return t||(t=e._props={}),t},a.create=function(e,t,i,n){var s=e.eventPool;if(s||(s=e.eventPool=[]),s.length){var r=s.pop();return r.$type=t,r.$bubbles=!!i,r.$cancelable=!!n,r.$isDefaultPrevented=!1,r.$isPropagationStopped=!1,r.$isPropagationImmediateStopped=!1,r.$eventPhase=2,r}return new e(t,i,n)},a.release=function(e){e.clean(),Object.getPrototypeOf(e).constructor.eventPool.push(e)},a.$hashCount=1,a.nextCode=function(){return a.$hashCount++},a.ADDED_TO_STAGE="addedToStage",a.REMOVED_FROM_STAGE="removedFromStage",a.ADDED="added",a.REMOVED="removed",a.ENTER_FRAME="enterFrame",a.RENDER="render",a.STAGE_RESIZE="stageResize",a.RESIZE="resize",a.CHANGE="change",a.CHANGING="changing",a.COMPLETE="complete",a.LOOP_COMPLETE="loopComplete",a.FOCUS_IN="focusIn",a.FOCUS_OUT="focusOut",a.ENDED="ended",a.ACTIVATE="activate",a.DEACTIVATE="deactivate",a.CLOSE="close",a.CONNECT="connect",a.LEAVE_STAGE="leaveStage",a.SOUND_COMPLETE="soundComplete"},{}],52:[function(e,t,i){var l=[];b8e.EventDispatcher=b8e.Object.extends({ctor:function(e){void 0===e&&(e=null),this._super(),this._eventInfo={target:e||this,events:{},eventMap:{},captureEvents:{},captureEventMap:{}}},$getEventMap:function(e){var t=this._eventInfo;return e?t.captureEvents:t.events},addEventListener:function(e,t,i,n,s){this.$addListener(e,t,i,n,s)},once:function(e,t,i,n,s){this.$addListener(e,t,i,n,s,!0)},$addListener:function(e,t,i,n,s,r){if(t){var o=this._eventInfo,a=n?o.captureEvents:o.events,l=n?o.captureEventMap:o.eventMap,h=a[e];h||(h=a[e]=[]);var c=l[e];c||(c=l[e]=b8e.HashMap.get());var u=c.get(t,i);u?b8e.warn("重复注册事件侦听！",e,t):(u=this.$insertEventBin(h,e,t,i,n,s,r),c.set(t,u,i))}},$insertEventBin:function(e,t,i,n,s,r,o){var a={type:t,listener:i,thisObject:n,priority:r=0|+r,target:this,useCapture:s,dispatchOnce:!!o};if(0==r)return e.unshift(a),a;for(var l=e.length,h=0;h<l;h++)if(r<e[h].priority)return e.splice(h,0,a),a;return e.unshift(a),a},removeEventListener:function(e,t,i,n){var s=this._eventInfo,r=n?s.captureEvents:s.events,o=n?s.captureEventMap:s.eventMap,a=r[e],l=o[e];if(a&&l){var h=l.get(t,i);if(h)return l.del(t,i),this.$removeEventBin(a,h),void(0==a.length&&(l.release(),r[e]=null,o[e]=null))}b8e.warn("注意：试图取消不存在的事件侦听！"+e,t)},$removeEventBin:function(e,t){var i=e.indexOf(t);-1<i&&e.splice(i,1)},hasEventListener:function(e){var t=this._eventInfo;return!(!t.events[e]&&!t.captureEvents[e])},willTrigger:function(e){return this.hasEventListener(e)},dispatchEvent:function(e){return e.$currentTarget=this._eventInfo.target,e.$setTarget(e.$currentTarget),this.$notifyListener(e,!1)},$notifyListener:function(e,t){var i=this._eventInfo,n=(t?i.captureEvents:i.events)[e.$type];if(!n)return!0;var s=n.length;if(0==s)return!0;for(var r=l,o=s-1;0<=o;o--){var a=n[o];if(a.listener.call(a.thisObject,e),a.dispatchOnce&&r.push(a),e.$isPropagationImmediateStopped)break}for(;r.length;)(a=r.pop()).target.removeEventListener(a.type,a.listener,a.thisObject,a.useCapture);return!e.$isDefaultPrevented},dispatchEventWith:function(e,t,i,n){if(i||this.hasEventListener(e)){var s=b8e.Event.create(b8e.Event,e,i,n);s.data=t;var r=this.dispatchEvent(s);return b8e.Event.release(s),r}return!0}})},{}],53:[function(e,t,i){var n=b8e.IOErrorEvent=b8e.Event.extends({ctor:function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this._super(e,t,i)}});n.dispatchIOErrorEvent=function(e){var t=b8e.Event.create(n,n.IO_ERROR),i=e.dispatchEvent(t);return b8e.Event.release(t),i},n.IO_ERROR="ioError"},{}],54:[function(e,t,i){function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s,o=b8e.ProgressEvent=b8e.Event.extends((n(s={bytesLoaded:0,bytesTotal:0},"bytesLoaded",0),n(s,"bytesTotal",0),n(s,"ctor",function(e,t,i,n,s){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=0),void 0===s&&(s=0),this._super(e,t,i),this.bytesLoaded=0,this.bytesTotal=0,this.bytesLoaded=n,this.bytesTotal=s}),s));o.dispatchProgressEvent=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var s=b8e.Event.create(o,t);s.bytesLoaded=i,s.bytesTotal=n;var r=e.dispatchEvent(s);return b8e.Event.release(s),r},o.PROGRESS="progress",o.SOCKET_DATA="socketData"},{}],55:[function(e,t,i){b8e.SceneEvent=b8e.Enum({SCENE_MAP_LOAD_COMPLETE:"scene_map_load_complete",SCENE_MAP_CLICK:"scene_map_click",SCENE_ENTITY_CLICK:"scene_entity_click"})},{}],56:[function(e,t,i){var o=b8e.TimerEvent=b8e.Event.extends({ctor:function(e,t,i){this._super(this,e,t,i)}});o.dispatchTimerEvent=function(e,t,i,n){var s=b8e.Event.create(o,t,i,n),r=e.dispatchEvent(s);return b8e.Event.release(s),r},o.TIMER="timer",o.TIMER_COMPLETE="timerComplete"},{}],57:[function(e,t,i){"function"==typeof Symbol&&c(Symbol.iterator),b8e.BinaryLoader=b8e.Object.extends({ctor:function(){var e=window.navigator,t=/msie/i.test(e.userAgent)&&!/opera/i.test(e.userAgent);if(window.Uint8Array=window.Uint8Array||window.Array,t){var i=document.createElement("script");i.type="text/vbscript",i.textContent='\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = ""\r\n   End If\r\nEnd Function\r\n',document.body.appendChild(i)}},load:function(e,t){var i=e.url,n=window.navigator,s=/msie/i.test(n.userAgent)&&!/opera/i.test(n.userAgent),r=b8e.getXHR(),o="Load "+i+" failed!";r.open("GET",i,!0),s?(r.setRequestHeader("Accept-Charset","x-user-defined"),r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=_convertResponseBodyToText(r.responseBody);t(null,b8e.BufferUtil.str2Uint8Array(e))}else t(o);b8e.Logger.res(i,r)}):(r.responseType="arraybuffer",r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.onload=function(){4===r.readyState&&200===r.status?r.response?t(null,new Uint8Array(r.response)):t(null,b8e.BufferUtil.str2Uint8Array(r.responseText)):t(o),b8e.Logger.res(i,r)},r.onerror=function(){t({status:r.status,errorMessage:o}),b8e.Logger.res(i,r)}),r.send(null)}})},{}],58:[function(e,t,i){b8e.TextLoader=b8e.Object.extends({ctor:function(){},load:function(e,t){var i=e.url,n=b8e.getXHR(),s="Load "+i+" failed!",r=window.navigator;n.open("GET",i,!0),/msie/i.test(r.userAgent)&&!/opera/i.test(r.userAgent)?(n.setRequestHeader("Accept-Charset","utf-8"),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||0===n.status?t(null,n.responseText):t({status:n.status,errorMessage:s}),b8e.Logger.res(i,n))}):(n.responseType="text",n.overrideMimeType&&n.overrideMimeType("text/plain; charset=utf-8"),n.onload=function(){4===n.readyState&&(200===n.status||0===n.status?t(null,n.responseText):t({status:n.status,errorMessage:s}),b8e.Logger.res(i,n))},n.onerror=function(){t({status:n.status,errorMessage:s}),b8e.Logger.res(i,n)}),n.send(null)}})},{}],59:[function(e,t,i){b8e.LayerMgr=b8e.Object.extends({ctor:function(){if(b8e.LayerMgr._singleton)throw new Error("只能通过getInstance()来获取LayerManager实例！");this.createLayers()},createLayers:function(){this._sceneLayer=b8e.BaseDisplay.get(),this._sceneLayer.setAnchor(0,0),this._sceneLayer.setPosition(0,0),b8e.stage.addChild(this._sceneLayer),this._guiLayer=b8e.BaseDisplay.get(),this._guiLayer.setAnchor(0,0),this._guiLayer.setPosition(0,0),b8e.stage.addChild(this._guiLayer),this._topLayer=b8e.BaseDisplay.get(),this._topLayer.setAnchor(0,0),this._topLayer.setPosition(0,0),b8e.stage.addChild(this._topLayer)},setSize:function(e,t){this._sceneLayer.setSize(e,t),this._guiLayer.setSize(e,t),this._topLayer.setSize(e,t)},getTopLayer:function(){return this._topLayer},getSceneLayer:function(){return this._sceneLayer},getGuiLayer:function(){return this._guiLayer}}),b8e.LayerMgr._instance=null,b8e.LayerMgr._singleton=!0,b8e.LayerMgr.inst=function(){return b8e.LayerMgr._instance||(b8e.LayerMgr._singleton=!1,b8e.LayerMgr._instance=new b8e.LayerMgr,b8e.LayerMgr._singleton=!0),b8e.LayerMgr._instance}},{}],60:[function(e,t,i){var n="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)},r=b8e.NetMgr=b8e.Object.extends({ctor:function(){this._super()},initSocket:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:b8e.Socket.TYPE_STRING;if(!this._socket){this._inputTotalbytes=0,this._outputTotalbytes=0,this._frameHandlerCount=0,this._currFrameReceiveCount=0,this.maxFrameReceiveCount=0,this._receiveQueue=[],this._msgHandlerByKey=b8e.HashMap.get();var t=new b8e.Socket;(this._socket=t).type=e,t.addEventListener(b8e.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),t.addEventListener(b8e.Event.CONNECT,this.onSocketOpen,this),t.addEventListener(b8e.Event.CLOSE,this.onSocketClose,this),t.addEventListener(b8e.IOErrorEvent.IO_ERROR,this.onSocketError,this)}},connectServer:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null;this._onConnect=i,this._onClose=n,this._onError=s,this._onMessage=r,this._onConnectThis=o,b8e.log("SocketConnect"),0<t?this._socket.connect(e,t):this._socket.connectByUrl(e)},closeConnection:function(){this._socket.close()},onReceiveMessage:function(e){if(this._socket.type==b8e.Socket.TYPE_BINARY){var t=b8e.ByteBuffer.get();this._socket.readBytes(t);var i=t.length;0<i?(this._outputTotalbytes+=i,this._currFrameReceiveCount++,this._receiveQueue.length<1&&this._frameHandlerCount<r.MAX_RECEIVE?(this._onReceiveHandler(t,b8e.getTimer()),t.release(),this._frameHandlerCount++):(this._receiveQueue.push({bytes:t,timeStamp:b8e.getTimer()}),b8e.isActivated?this._isBatch||(this._isBatch=!0,b8e.setTimeout(this._nextReceive,this,10)):this._nextReceive())):t.release()}else{var n=this._socket.readUTF();if(n){var s=b8e.JsUtil.jsonParse(n);this._onMessage&&this._onMessage.call(this._onConnectThis,s)}}},_nextReceive:function(){for(;0<this._receiveQueue.length&&(!b8e.isActivated||this._frameHandlerCount<r.MAX_RECEIVE);){var e=this._receiveQueue.shift(),t=e.bytes,i=e.timeStamp;t instanceof b8e.ByteBuffer?(this._onReceiveHandler(t,i),t.release(),this._frameHandlerCount++):"SocketOpen"===t?this._onConnect&&this._onConnect.call(this._onConnectThis):"SocketClose"===t?this._onClose&&this._onClose.call(this._onConnectThis):"SocketError"===t&&this._onError&&this._onError.call(this._onConnectThis)}this._frameHandlerCount=0,this._currFrameReceiveCount>this.maxFrameReceiveCount&&(this.maxFrameReceiveCount=this._currFrameReceiveCount),this._currFrameReceiveCount=0,this._isBatch=!1,0<this._receiveQueue.length&&(this._isBatch=!0,b8e.setTimeout(this._nextReceive,this,10))},_onReceiveHandler:function(e,t){if(b8e.macro.IS_DEBUG&&r.IS_DEBUG&&b8e.log("++++++++++++++++++++++++++"),this._onMessage)this._onMessage.call(this._onConnectThis,e);else if(0<e.bytesAvailable){var i=e.readUnsignedShort();b8e.macro.IS_DEBUG&&r.IS_DEBUG&&b8e.log("receive message id:"+i+",length:"+e.length);var n=this._msgHandlerByKey.get(i);n?n.handler.call(n.thisArg,e,t):b8e.warn("注意：message id:"+i+"没有注册处理！")}b8e.macro.IS_DEBUG&&r.IS_DEBUG&&(b8e.log(e.dump(r.DUMP_RADIX)),b8e.log("++++++++++++++++++++++++++"))},getBytes:function(){var e=r._byteArray;return e.clear(),e},sendBinary:function(e,t){if(e<1||65535<e)b8e.error("messageId should be between 1 and 0xFFFF");else{var i=r._byteArray,n=b8e.ByteBuffer.get();n.writeUnsignedShort(e),n.writeBytes(t||i);var s=n.length;0<s&&(this._inputTotalbytes+=s,b8e.macro.IS_DEBUG&&r.IS_DEBUG&&(b8e.log("++++++++++++++++++++++++++"),b8e.log("send message id:"+e+",length:"+n.length),b8e.log(n.dump(r.DUMP_RADIX)),b8e.log("++++++++++++++++++++++++++")),this._socket.writeBytes(n),this._socket.flush()),n.release(),i.clear()}},sendString:function(e){"object"===(void 0===e?"undefined":n(e))&&(e=JSON.stringify(e)),e&&(b8e.macro.IS_DEBUG&&r.IS_DEBUG&&b8e.log("send data",e),this._socket.writeUTF(e),this._socket.flush())},addMsgHandler:function(e,t,i){e?t?this._msgHandlerByKey.get(e)?b8e.error("重复的消息注册"+e):this._msgHandlerByKey.set(e,{handler:t,thisArg:i}):b8e.error("handler不能为空！"+t):b8e.error("msgId不能为空！"+e)},subscribe:function(e,t,i){if(i)for(var n in e){var s=t[n];if(s){var r=e[n];r?this.addMsgHandler(s,r,i):b8e.error(n+"处理函数无效！"+r)}else b8e.error(n+"协议无效！"+s)}else b8e.error("thisArg参数非法！"+i)},request:function(e,t,i){if(i){var n=this;for(var s in e){var r=t[s];if(r){var o=e[s];i[s]=function(e,t){return function(){t&&t.apply(i,arguments),n.sendBinary(e)}}(r,o)}else b8e.error(s+"协议无效！"+r)}}else b8e.error("thisArg参数非法！"+i)},onSocketOpen:function(){0<this._receiveQueue.length?this._receiveQueue.push({bytes:"SocketOpen",timeStamp:b8e.getTimer()}):this._onConnect&&this._onConnect.call(this._onConnectThis)},onSocketClose:function(){0<this._receiveQueue.length?this._receiveQueue.push({bytes:"SocketClose",timeStamp:b8e.getTimer()}):this._onClose&&this._onClose.call(this._onConnectThis)},onSocketError:function(){0<this._receiveQueue.length?this._receiveQueue.push({bytes:"SocketError",timeStamp:b8e.getTimer()}):this._onError&&this._onError.call(this._onConnectThis)},requestData:function(e,t,i,n){var s,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,o=5<arguments.length&&void 0!==arguments[5]&&arguments[5],a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:null;s=o?b8e.URLRequestMethod.POST:b8e.URLRequestMethod.GET;var l=null,h=!0,c=!1,u=b8e.URLLoaderDataFormat.JSON;a&&(void 0!==a.stringify&&(h=a.stringify),void 0!==a.isJson&&(c=a.isJson),void 0!==a.dataFormat&&(u=a.dataFormat),void 0!==a.onStatus&&(l=a.onStatus));var d=new b8e.URLLoader;d.context=r,d.dataFormat=u,d.addEventListener(b8e.Event.COMPLETE,this.onDataComplete,this),d.addEventListener(b8e.IOErrorEvent.IO_ERROR,this.onDataError,this),i&&(this._onDataCallbacks||(this._onDataCallbacks=b8e.HashMap.get()),this._onDataCallbacks.set(d,{callback:i,thisArg:n,onStatus:l},this));var f=new b8e.URLRequest(e);f.method=s,t&&(f.data="string"==typeof t?t:h?new b8e.URLVariables(t,c):t),d.load(f)},onDataComplete:function(e){var t=e.target,i=t.data,n=t.context;if(b8e.macro.IS_DEBUG&&r.IS_DEBUG&&b8e.log("receive data:"+i),this._onDataCallbacks){var s=this._onDataCallbacks.get(t,this);s&&s.callback.call(s.thisArg,null,i,n)}},onDataError:function(e){var t=e.target;if("ioError"===e.type){void 0===t.reloadCount&&(t.reloadCount=0);var i=b8e.macro.MAX_REQUEST_RELOAD;if(i<0||t.reloadCount<i){t.reloadCount++,b8e.warn("请求超时，重新请求："+t._request.url);var n=this._onDataCallbacks.get(t,this);return n&&n.onStatus&&n.onStatus.call(n.thisArg,"reload"),void b8e.setTimeout(function(){t.reload()},this,1e3)}}b8e.error("URLLoader onDataError:",e.type,t._request.url);var s=t.context;if(this._onDataCallbacks){var r=this._onDataCallbacks.get(t,this);r&&r.callback.call(r.thisArg,new Error(e.type),null,s)}},getInputTotalbytes:function(){return this._inputTotalbytes},getOutputTotalbytes:function(){return this._outputTotalbytes},debugReset:function(){this.maxFrameReceiveCount=0}});r._instByName=b8e.HashMap.get(),r.createMgr=function(e){var t=r._instByName.get(e);return t||(t=new r,r._instByName.set(e,t)),t},r.getMgr=function(e){return r._instByName.get(e)},r._byteArray=new b8e.ByteBuffer,r.IS_DEBUG=!1,r.MAX_RECEIVE=5,r.DUMP_RADIX=16},{}],61:[function(e,t,i){b8e.ObserverMgr=b8e.Object.extends({ctor:function(){this._obMap=b8e.HashMap.get(),this._notifyList=[],this._super()},addOb:function(e,t,i){if(e&&t&&i){var n=this._obMap.get(e,this);n||(n=b8e.HashMap.get(),this._obMap.set(e,n,this));var s=n.get(i,this);s?b8e.error("b8e.observerMgr.addOb 重复注册"):(s={thisArg:i,cb:t},n.set(i,s,this))}else b8e.error("b8e.observerMgr.addOb Error")},removeOb:function(e,t,i){if(e&&t&&i){var n=this._obMap.get(e,this);n&&n.get(i,this)?(n.del(i,this),0==n.count()&&this.disposeOb(e)):b8e.error("b8e.observerMgr.removeObCb 取消不存在的ObCb")}else b8e.error("b8e.observerMgr.removeObCb Error")},disposeOb:function(e){if(e){var t=this._obMap.get(e,this);t?(b8e.HashMap.put(t),this._obMap.del(e,this)):b8e.error("b8e.observerMgr.disposeOb 取消不存在的Ob")}else b8e.error("b8e.observerMgr.disposeOb Error")},notify:function(e){if(e&&!(-1<this._notifyList.indexOf(e))){var t=this._obMap.get(e,this);t&&0!=t.count()?(this._notifyList.push(e),this._notify()):e.notify()}},_notify:function(){this._notifyTimer?(this._notifyTimer.reset(),this._notifyTimer.start()):this._notifyTimer=b8e.Timer.add(this,this._update,50)},_curUpdateOb:null,_update:function(){if(0!=this._notifyList.length){for(var e,t,i=0,n=5<this._notifyList.length?5:this._notifyList.length;i<n;i++){if(e=this._notifyList.shift(),!(t=this._obMap.get(e,this))||0==t.count())return;e.notify(),this._curUpdateOb=e,t.forEach(this.__updateCb,this)}this._curUpdateOb=null}else this._notifyTimer&&this._notifyTimer.stop()},__updateCb:function(e,t){t.cb.call(t.thisArg,this._curUpdateOb)},count:function(){return this._notifyList.length}}),b8e.ObserverMgr._inst=null,b8e.ObserverMgr.inst=function(){return b8e.ObserverMgr._inst||(b8e.ObserverMgr._inst=new b8e.ObserverMgr),b8e.ObserverMgr._inst},b8e.obMgr=b8e.ObserverMgr.inst()},{}],62:[function(e,t,i){var r="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)},C=b8e.ResMgr=b8e.Object.extends({ctor:function(){if(C._singleton)throw new Error("只能通过getInstance()来获取ResourceManager实例！");if(this._super(),"undefined"!=typeof cc){cc.sys.isBrowser&&(cc.sys.os,cc.sys.OS_ANDROID),cc.macro.DOWNLOAD_MAX_CONCURRENT=8,this._textLoader=new b8e.TextLoader,this._binaryLoader=new b8e.BinaryLoader,this._binaryFormat=["bmc","bac","bvc","bcd","data"],this._jsonFormat=["bpd","bsd"];var e={proto:this._textLoader.load,bgp:this._textLoader.load,bpd:this._textLoader.load,bsd:this._textLoader.load,bcd:this._binaryLoader.load,data:this._binaryLoader.load,bmc:this._binaryLoader.load,bac:this._binaryLoader.load,bvc:this._binaryLoader.load,btfx:this._binaryLoader.load};cc.loader.addDownloadHandlers(e),cc.loader.addLoadHandlers({}),this._requestQueue=b8e.HashMap.get(),this._batchLoadInfos=b8e.HashMap.get(),this._nextLoadQueue=[],this._nextPreloadQueue=[],this._loadingQueue=[],this._parseAssetQueue=[],this._parsingAssetQueue=[],this._parseAssetByUrl=b8e.HashMap.get(),this._preloadingQueue=[],this._cacheResUrls=[],this._sharedResources=[],this._prefabByUuid=b8e.HashMap.get(),this._bundleDataDisableMap=b8e.HashMap.get(),this._resCache=b8e.HashMap.get(),this._recycleRes=new b8e.RecycleBin,this._recycleRes.onDestroyObject(this.onDestroyRes,this),this._info={url:null,raw:!1},this._initVersion=0,this._version=0,this._resVersion=0,this._arrivalIndex=0}},hasReference:function(e,t,i){var n=this._requestQueue.get(e);if(n){var s=n.references.get(t,i);return Boolean(s)}return!1},loadResDir:function(e,t,i,n,s){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,o=!0,a=!0,l=!1,h=0;r&&(void 0!==r.useManifest&&(a=r.useManifest),void 0!==r.preload&&(l=r.preload),void 0!==r.priority&&(h=r.priority),void 0!==r.isPreload&&(o=r.isPreload));var c=[],u=(cc.loader._resources.getUuidArray(e,t,c),[]);c.forEach(function(e){u.push({url:e,type:t,useManifest:a,preload:l,priority:h})},this),this.loadBatchRes(u,i,n,s,o)},loadRes:function(e,t,i,n,s,r){e?"function"==typeof i?(e=e.replace(/\\/g,"/"),"function"!=typeof t||cc.isChildClassOf(t,b8e.Asset)||cc.isChildClassOf(t,cc.RawAsset)||(void 0!==n&&(s=[n].concat(s)),n=i,i=t,t=null),this._addRequest(e,t,i,n,s,r)):b8e.error("回调参数不是一个有效的方法！"):b8e.error("url不能为空！")},unloadRes:function(e,t,i){if(e)if("function"==typeof t){e=e.replace(/\\/g,"/");var n=this._requestQueue.get(e);if(n){var s=n.callbacks.get(t,i);if(s&&n.callbacks.del(t,i),(s=n.references.get(t,i))&&(b8e.CallBackData.put(s),n.references.del(t,i),n.references.count()<1))if(n.isUnused=!0,this._resCache.get(e)instanceof Error)this._recycleRes.recycle(e,[e],-1);else{var r=n.recycleDelay;-1<r&&this._recycleRes.recycle(e,[e],r)}}n&&s||b8e.warn("注意：试图删除不存在的资源请求引用！"+e)}else b8e.error("回调参数不是一个有效的方法！");else b8e.error("url不能为空！")},onDestroyRes:function(e){return!(0<this._loadingQueue.length||0<this._preloadingQueue.length||(this._releaseRes(e),0))},_releaseRes:function(e){b8e.macro.IS_DEBUG&&C.IS_DEBUG&&b8e.log("===========卸载资源："+e);var t=this._requestQueue.get(e);if(t){if(!t.isUnused)return;if(0<t.callbacks.count())return void b8e.warn("注意：试图销毁还处于请求状态的资源！"+e);if(0<t.references.count())return void b8e.warn("注意：试图销毁还存在引用的资源！"+e);var i=this._nextLoadQueue.indexOf(t);-1<i&&this._nextLoadQueue.splice(i,1),-1<(i=this._nextPreloadQueue.indexOf(t))&&this._nextPreloadQueue.splice(i,1),-1<(i=this._parseAssetQueue.indexOf(t))&&this._parseAssetQueue.splice(i,1),-1<(i=this._parsingAssetQueue.indexOf(e))&&this._parsingAssetQueue.splice(i,1),-1<(i=this._loadingQueue.indexOf(e))&&this._loadingQueue.splice(i,1),-1<(i=this._preloadingQueue.indexOf(e))&&this._preloadingQueue.splice(i,1),this._destroyRes(t),this._destroyAsset(e),this._nextRequests()}else b8e.warn("注意：试图销毁不存在的资源请求！"+e)},_destroyAsset:function(e){this._parseAssetByUrl.del(e);var t=this._resCache.get(e);t&&(t instanceof b8e.Asset&&t.destroy(),this._resCache.del(e))},_destroyRes:function(e){var t=e.url,i=e.resUrl;if(b8e.macro.IS_DEBUG&&C.IS_DEBUG){b8e.log("===========销毁资源："+t);var n=cc.loader._getReferenceKey(i);cc.loader.getItem(n)&&b8e.log("===========销毁CC资源："+i+":"+n)}if(e.useManifest&&b8e.macro.IS_COCOS_CREATOR){var s=e.uuid;s?(this._prefabByUuid.del(s),cc.loader.release(s)):b8e.warn("注意：资源uuid丢失！"+t)}else cc.loader.release(i);b8e.ResRequest.put(e),this._requestQueue.del(t)},getRes:function(e){return e=e.replace(/\\/g,"/"),this._resCache.get(e)},getDepends:function(e){e=e.replace(/\\/g,"/");var t=this._requestQueue.get(e);return t?t.dependKeys:null},_addRequest:function(e,t,i,n,s,r){t||(t=null);var o=!0,a=!1,l=!1,h=0,c=0,u=!1,d=!1,f=null;r&&(void 0!==r.useManifest&&(o=r.useManifest),void 0!==r.noCache&&(a=r.noCache),void 0!==r.priority&&(c=r.priority),void 0!==r.preload&&(l=r.preload),void 0!==r.recycleDelay&&(h=r.recycleDelay),void 0!==r.isPreload&&(u=r.isPreload),void 0!==r.isCompress&&(d=r.isCompress),void 0!==r.format&&(f=r.format)),o=!!o,a=!!a,l=!!l,this._recycleRes.restore(e);var g=this._requestQueue.get(e);if(!g){var _=this._arrivalIndex;this._arrivalIndex++;var p=b8e.Texture2D.getResUrl(e);p=this.getResUrl(p,o,a);var m=e.substring(e.lastIndexOf("/")+1),b=m.lastIndexOf("."),v=m.substring(0,b),y=m.substring(b+1);-1<this._binaryFormat.indexOf(y)?f="binary":-1<this._jsonFormat.indexOf(y)&&(f="json"),(g=b8e.ResRequest.get()).url=e,g.name=v,g.ext=y,g.type=t,g.isLoading=!1,g.isLoaded=!1,g.options=r,g.priority=c,g.arrivalOrder=_,g.hasCache=-1<this._cacheResUrls.indexOf(e),g.useManifest=o,g.noCache=a,g.recycleDelay=h,g.resUrl=p,g.isPreload=u,g.isCompress=d,g.format=f,this._requestQueue.set(e,g)}if(g.type==t)if(g.useManifest==o)if(g.noCache==a){u||(g.isPreload=u);var S=!1;if(g.isPreload?(c=-1e8,g.priority!=c&&(g.priority=c,S=!0)):c>g.priority&&(g.priority=c,S=!0),0<=g.recycleDelay&&(h<0?g.recycleDelay=-1:h>g.recycleDelay&&(g.recycleDelay=h)),"function"==typeof i){var E=g.references.get(i,n);if(E)b8e.warn("注意：试图在同一地址重复请求引用资源！"+e);else if((E=b8e.CallBackData.get()).callback=i,E.thisArg=n,E.args=s,g.references.set(i,E,n),g.callbacks.set(i,E,n),g.preload=l,g.isUnused=!1,this._resCache.get(e))b8e.macro.IS_DEBUG&&C.IS_DEBUG&&b8e.log("===========加载缓存："+e),this._invokeCallbacks(e);else if(!g.isLoaded)if(g.isLoading){if(S){var w=void 0;g.isPreload?-1<(w=this._nextLoadQueue.indexOf(g))?(this._nextLoadQueue.splice(w,1),this._nextPreloadQueue.push(g),this.loadQueueSort(this._nextPreloadQueue),this._nextRequests()):-1<(w=this._nextPreloadQueue.indexOf(g))&&this.loadQueueSort(this._nextPreloadQueue):-1<(w=this._nextPreloadQueue.indexOf(g))?(this._nextPreloadQueue.splice(w,1),this._nextLoadQueue.push(g),this.loadQueueSort(this._nextLoadQueue),this._nextRequests()):-1<(w=this._nextLoadQueue.indexOf(g))&&this.loadQueueSort(this._nextLoadQueue)}}else{g.isLoading=!0;var T=void 0;(T=g.isPreload?this._nextPreloadQueue:this._nextLoadQueue).push(g),this.loadQueueSort(T),this._nextRequests()}}else b8e.error("加载资源完成回调类型不是一个方法！")}else b8e.error("加载的资源"+e+"是否缓存定义后不能再修改！");else b8e.error("加载的资源"+e+"使用清单模式定义后不能再修改！");else b8e.error("加载的资源"+e+"类型定义后不能再修改！")},loadQueueSort:function(e){e.sort(this.onQueueSort)},onQueueSort:function(e,t){return e.hasCache&&!t.hasCache?-1:!e.hasCache&&t.hasCache?1:e.priority>t.priority?-1:e.priority<t.priority?1:e.arrivalOrder>t.arrivalOrder?1:e.arrivalOrder<t.arrivalOrder?-1:0},getResUrl:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=null;if(engine.macro.IS_DESKTOP)n="file:///"+e;else if(e.indexOf("://")<0)if(t&&b8e.macro.IS_COCOS_CREATOR){var s=(n=e).lastIndexOf(".");-1<s&&(n=n.substring(0,s))}else n=0==e.indexOf(C.assetsResDir)?e:C.remoteResDir&&0==e.indexOf(C.remoteResDir)?e:C.remoteResDir?C.remoteResDir+"/"+this.versionGetter(e):b8e.macro.IS_COCOS_CREATOR?C.assetsResDir+"/"+this.versionGetter(e):this.versionGetter(e);else n=e;return n+(i?"?_t="+(new Date-0):"")},_nextRequests:function(){for(var e,t,i=C.MAX_CONCURRENT,n=C.PRELOAD_MAX_CONCURRENT;!(this._loadingQueue.length+this._preloadingQueue.length>=i);){if(0<(e=this._nextPreloadQueue).length&&this._preloadingQueue.length<n)t=this._preloadingQueue;else{if((e=this._nextLoadQueue).length<1)break;t=this._loadingQueue}var s=e.shift(),r=s.url;if(!s.isLoaded&&s.isLoading){b8e.macro.IS_DEBUG&&C.IS_DEBUG&&b8e.log("===========加载资源："+r),t.push(r);var o=s.type;o===b8e.FrameAtlas?o=s.useManifest&&b8e.macro.IS_COCOS_CREATOR?cc.SpriteAtlas:null:o===b8e.Prefab?o=s.useManifest&&b8e.macro.IS_COCOS_CREATOR?cc.Prefab:null:o===b8e.Texture2D?o=null:o===b8e.SpriteFrame?o=null:o===b8e.AnimatorResource?o=null:o===b8e.MetaConfig?o=null:o===b8e.ProtobufConfig&&(o=null);var a=s.resUrl;if(s.useManifest&&b8e.macro.IS_COCOS_CREATOR){var l=this._loadRes(r,a,o);s.uuid=l}else this._load(r,a)}}},_load:function(u,d,f,g){if(this._requestQueue.get(u)){var _=this;this._sharedResources.length=0;var p=this._getResWithUrl(u,d),e=cc.loader._cache[p.url];this._sharedResources.push(e||p);var t=cc.LoadingItems.create(cc.loader,f,function(e,t){var i=p.url,n=t.getContent(i);if(n){var s=p.uuid;s&&cc.loader.setAutoReleaseRecursively(s,!1)}var r=t.getError(i);if(t.destroy(),r){var o=_._requestQueue.get(p.key);if(o){void 0===o.reloadCount&&(o.reloadCount=0);var a=b8e.macro.MAX_RES_RELOAD;if(a<0||o.reloadCount<a)return o.reloadCount++,b8e.warn("加载资源超时，重新加载："+p.key),void b8e.setTimeout(function(){_._load(u,d,f,g)},_,1e3)}}if(g)g.call(_,r,n),g=null;else{var l=p.key,h=cc.loader.getDependsRecursively(l);_._addParseAsset(l,r,n,h)}if(b8e.macro.IS_ENGINE_EDITOR)for(var c in cc.loader._cache)cc.loader._cache[c].complete&&cc.loader.removeItem(c)});cc.LoadingItems.initQueueDeps(t),t.append(this._sharedResources),this._sharedResources.length=0}},_loadRes:function(e,t,i){var n=cc.loader._getResUuid(t,i);if(n){var s=this._bundleDataDisableMap.get(e);if(this._prefabBundleData&&!s){var r=[t],o=this._parsePrefab(n,r),a=o.asset,l=o.deps;this._addParseAsset(e,null,a,l)}else this._bundleDataDisableMap.set(e,n),this._load(e,{type:"uuid",uuid:n});return n}return this._urlNotFound(e,t,i),null},_urlNotFound:function(e,t,i){var n=(i?b8e.JsUtil.getClassName(i):"Asset")+' in "resources/'+t+'" does not exist.';this._addParseAsset(e,new Error(n),null,null)},loadPrefabBundleData:function(n,s,r){this.loadRes(n,null,function e(t,i){t||(i=JSON.parse(i),this._prefabBundleData=i),s&&s.call(r,t,i),this.unloadRes(n,e,this)},this,null,{useManifest:!1,format:"ucs2"})},_parsePrefab:function(e,t){var i=this._deserializePrefab(e,t);return i||b8e.error("预制体"+e+"不存在，请检查并重新导出配置！"),{asset:i,deps:t}},_deserializePrefab:function(e,t){var i=this._prefabByUuid.get(e);if(!i){var n,s=null;if(b8e.macro.IS_RELEASE){var r=cc.Pipeline.Downloader.PackDownloader;if(n=r.uuidToPack[e]){Array.isArray(n)&&(n=r._selectLoadedPack(n));var o=r.PackState,a=r.globalUnpackers,l=r.JsonUnpacker,h=a[n];if(h&&h.state===o.Loaded)(s=h.retrieve(e))||b8e.error("Can not retrieve "+e+" from packer "+n);else{h||((h=a[n]=new l).state=o.Downloading);var c=this._prefabBundleData[n];if(c){if((h=a[n]).state!==o.Loaded){var u=r.getPackIndices();h.read(u[n],c),h.state=o.Loaded}(s=h.retrieve(e))||b8e.error("Can not retrieve "+e+" from packer "+n)}else b8e.error("预制体"+n+"不存在，请检查并重新导出配置！")}}else{n=cc.AssetLibrary.decodeUuid(e);var d=this._prefabBundleData[n];d?s=d:b8e.error("预制体"+n+"不存在，请检查并重新导出配置！")}}else{var f=this._prefabBundleData[e];f?s=f:b8e.error("预制体"+e+"不存在，请检查并重新导出配置！")}if(!s)return null;var g=cc.deserialize.Details.pool.get();(i=cc.deserialize(s,g,{classFinder:function(e){return cc.js._getClassById(e)||(cc.warnID(4903,e),Object)}}))._uuid=e,this._prefabByUuid.set(e,i),this._loadDepends(i,g,t)}return i},_loadDepends:function(e,t,i){var n,s,r,o,a,l=t.uuidList;for(n=[],s=[],r=[],o=0;o<l.length;o++){a=l[o];var h=t.uuidObjList[o],c=t.uuidPropList[o],u=cc.AssetLibrary._getAssetInfoInRuntime(a);if(u.raw){var d=u.url;h[c]=d,i.indexOf(d)<0&&i.push(d)}else n.push(h),s.push(c),r.push({type:"uuid",uuid:a,deferredLoadRaw:!0})}for(e._preloadRawFiles,e._uuid,o=0;o<r.length;o++){var f=r[o].uuid,g=(r[o].url,n[o]),_=s[o],p=this._deserializePrefab(f,i);p?(g[_]=p,f!==e._uuid&&i.indexOf(f)<0&&i.push(f)):b8e.error("预制体"+e._uuid+"依赖的"+f+"不存在，请检查并重新导出配置！")}cc.deserialize.Details.pool.put(t)},_getResWithUrl:function(e,t){var i,n,s;if("object"===(void 0===t?"undefined":r(t))){if((n=t).url)return n;i=t.uuid}else n={},i=t;return s=n.type?"uuid"===n.type:cc.AssetLibrary._getAssetUrl(i),cc.AssetLibrary._getAssetInfoInRuntime(i,this._info),n.url=s?this._info.url:i,n.key=e,this._info.url&&"uuid"===n.type&&this._info.raw?(n.type=null,n.isRawAsset=!0):s||(n.isRawAsset=!0),n},_addParseAsset:function(e,t,i,n){var s=this._requestQueue.get(e);if(s){var r=this._loadingQueue.indexOf(e);-1<r&&this._loadingQueue.splice(r,1),-1<(r=this._preloadingQueue.indexOf(e))&&this._preloadingQueue.splice(r,1),(r=this._parseAssetQueue.indexOf(s))<0&&(this._parseAssetQueue.push(s),this._parseAssetQueue.sort(this.onQueueSort),this._parseAssetByUrl.set(e,{err:t,asset:i,deps:n}),this._nextParseAsset()),this._nextRequests()}},_nextParseAsset:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if(0<this._parseAssetQueue.length&&this._parsingAssetQueue.length<1){var t=this._parseAssetQueue.shift().url;this._parsingAssetQueue.indexOf(t)<0&&this._parsingAssetQueue.push(t),e?b8e.setTimeout(this._parseAsset,this,10,t):this._parseAsset(t)}},_parseAsset:function(t){var e=this._parsingAssetQueue.indexOf(t);if(e<0)this._nextParseAsset(!1);else{this._parsingAssetQueue.splice(e,1);var i=this._parseAssetByUrl.get(t);if(i){var n=i.err,s=i.asset,r=i.deps;this._parseAssetByUrl.del(t);var o=this._requestQueue.get(t);if(o){if(n)n instanceof Error||(n=new Error(n)),n.url=t,o.err=n,b8e.error("加载资源错误："+t+":"+n.message),this._invokeRequestCallbacks(t);else if(s){if(o.isCompress&&(s=b8e.Inflate.ungzip(s)),o.format&&("utf8"===o.format?s=b8e.BufferUtil.decodeUTF8(s):"ucs2"===o.format?s=b8e.StringInflate.decompressFromUint8Array(s):"binary"===o.format?"string"==typeof s&&(s=b8e.BufferUtil.str2Uint8Array(s)):"json"===o.format&&(s=JSON.parse(s))),"bpd"===o.ext)b8e.ProtobufUtil.allotProps(s);else if("bcd"===o.ext)if(o.options&&o.options.proto){var a=b8e.proto.ByteBuffer.wrap(s),l=a.readVString(),h=JSON.parse(l),c={};c[o.name]=h,b8e.ProtobufUtil.allotProps(c);for(var u=o.options.proto.split("."),d=u.length,f=game,g=0;g<d;g++)f=f[u[g]];s=f.ctor.decode(a)}else s=null,b8e.error("加载BCD数据需要设置proto选项参数！");if(s){var _=o.resUrl;if(cc.loader.setAutoReleaseRecursively(_,!1),(o.dependKeys=r)&&r.forEach(function(e){cc.loader.setAutoReleaseRecursively(e,!1)},this),this._cacheResUrls.indexOf(t)<0&&this._cacheResUrls.push(t),s instanceof cc.Texture2D&&b8e.TextureCache.handleLoadedTexture(_),o.type===b8e.FrameAtlas){var p=new b8e.FrameAtlas;o.useManifest&&b8e.macro.IS_COCOS_CREATOR?p.parseWithAtlas(s,function(e){o.asset=e,this._invokeRequestCallbacks(t)},this,null,o.options):p.parse(t,s,function(e){o.asset=e,this._invokeRequestCallbacks(t)},this,null,o.options)}else if(o.type===b8e.Prefab){if(s instanceof cc.Prefab){var m=new b8e.Prefab;m.setPrefab(s,r),o.asset=m,this._invokeRequestCallbacks(t)}}else if(o.type===b8e.Texture2D){var b=new b8e.Texture2D;s instanceof cc.Texture2D?(b.setTexture(s),o.asset=b,this._invokeRequestCallbacks(t)):s instanceof Uint8Array&&b.initWithImageData(s,o.options,function(e){o.asset=e,this._invokeRequestCallbacks(t)},this)}else if(o.type===b8e.SpriteFrame){var v=new b8e.SpriteFrame;if(s instanceof cc.Texture2D){var y=o.options?o.options.scale9Inset:null;v.setTexture(s,y),o.asset=v,this._invokeRequestCallbacks(t)}else s instanceof Uint8Array&&v.setImageData(s,o.options,function(e){o.asset=e,this._invokeRequestCallbacks(t)},this)}else if(o.type===b8e.AnimatorResource){var S=new b8e.AnimatorResource;S.setConfig(t,s,o.options),o.preload&&S.loadSubRes(),o.asset=S,this._invokeRequestCallbacks(t)}else if(o.type===b8e.MetaConfig){var E=new b8e.MetaConfig;E.parseMeta(t,s),o.asset=E,this._invokeRequestCallbacks(t)}else if(o.type===b8e.ProtobufConfig){var w=new b8e.ProtobufConfig;w.buildMessage(t,s,o.options),o.asset=w,this._invokeRequestCallbacks(t)}else o.asset=s,this._invokeRequestCallbacks(t)}}s||((n=new Error("无效资源！")).url=t,o.err=n,b8e.error("无效的资源："+t),this._invokeRequestCallbacks(t)),this._nextParseAsset()}else this._nextParseAsset(!1)}else this._nextParseAsset(!1)}},_invokeRequestCallbacks:function(e){var t=this._requestQueue.get(e);if(t&&t.isLoading){var i=t.asset,n=t.err;i?(i instanceof b8e.Asset&&t.preload&&i.loadSubRes(),b8e.macro.IS_DEBUG&&C.IS_DEBUG&&b8e.log("===========加载完成："+e),this._resCache.set(e,i),this._invokeCallbacks(e)):n&&(this._resCache.set(e,n),this._invokeCallbacks(e))}},_invokeCallbacks:function(e){var r=this._requestQueue.get(e);if(r){var o=r.err,a=r.asset;r.isLoading=!1,r.isLoaded=!0,r.callbacks.every(function(e,t,i){var n=t,s=n.args?[o,a].concat(n.args):[o,a];return n.callback.apply(n.thisArg,s),!r.isUnused},this,!0),r.callbacks&&r.callbacks.clear()}},loadBatchRes:function(c,u,d,f){4<arguments.length&&void 0!==arguments[4]&&arguments[4];var g=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(u&&"function"!=typeof u)b8e.error("回调参数不是一个有效的方法！");else{var _=(c=c.slice()).length;if(0<_){var p=0;c.forEach(function(e){var t=e.url,i=e.type,n=this._batchLoadInfos.get(t);n||(n=[],this._batchLoadInfos.set(t,n));var s=null;if(n.every(function(e){return e.onProgress!=u||e.thisArg!=d||(s=e,!1)},this),s)b8e.warn("注意：试图在同一地址重复请求引用批资源！"+t);else{var h=this,r={url:t,onProgress:u,thisArg:d,callback:function(e,t,i){for(var n=c.length,s=0;s<n;s++)if(c[s].url==i){if(p++,u){var r=[e,t,p,_,i];f&&(r=r.concat(f)),u.apply(d,r)}if(g){var o=null,a=h._batchLoadInfos.get(i);if(a){for(s=(n=a.length)-1;0<=s;s--){var l=a[s];if(l.thisArg==d&&l.onProgress==u){o=l,a.splice(s,1);break}}a.length<1&&h._batchLoadInfos.del(i)}o?h.unloadRes(i,o.callback,o):b8e.warn("注意：试图卸载不存在的批量资源！"+i)}break}}};n.push(r),this.loadRes(t,i,r.callback,r,[t],e)}},this)}else if(u){var e=[null,null,0,0,null];f&&(e=e.concat(f)),u.apply(d,e)}}},unloadBatchRes:function(e,o,a){"function"==typeof o?e.forEach(function(e){var t=e.url,i=null,n=this._batchLoadInfos.get(t);if(n){for(var s=n.length-1;0<=s;s--){var r=n[s];if(r.thisArg==a&&r.onProgress==o){i=r,n.splice(s,1);break}}n.length<1&&this._batchLoadInfos.del(t)}i?this.unloadRes(t,i.callback,i):b8e.warn("注意：试图卸载不存在的批量资源！"+t)},this):b8e.error("回调参数不是一个有效的方法！")},versionGetter:function(e){if(this._versionMap){var t=this._versionMap[e];if(!t){var i=e.lastIndexOf(".");t=-1<i?e.slice(0,i)+"_"+this._initVersion+e.slice(i):e+"_"+this._initVersion}return t}return e},setVersionMap:function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;this._version=e,this._resVersion=t,this._versionMap=i,this._initVersion=n},getVersionMap:function(){return this._versionMap},getVersion:function(){return this._version},getResVersion:function(){return this._resVersion},getInitVersion:function(){return this._initVersion},loadSettings:function(r,e,t){this.loadRes(r,null,function e(t,i,n,s){t?(b8e.error(t),n&&n.call(s,t,null)):(b8e.log("load settings finish!"),b8e.params.resVersion=i.resVersion,b8e.params.versionName=i.versionName,b8e.params.wechatVersionName=i.wechatVersionName,b8e.params.debugType=i.debugType,n&&n.call(s,null,i)),this.unloadRes(r,e,this)},this,[e,t],{useManifest:!1,noCache:!0})},loadVersionMap:function(c,e,t){var i=b8e.proto.version.VersionConfigMessage;this.loadRes(c,b8e.ProtobufConfig,function e(t,i,n,s){if(t)b8e.error(t),n&&n.call(s,t,null);else{b8e.log("load version map finish!");var r={},o=i.getProtoData(),a=o.version,l=o.resVersion,h=o.initVersion;o.infos.forEach(function(e){var t=e.source,i=e.dest;r[t]=i},this),this.setVersionMap(a,l,r,h),n&&n.call(s,null,r)}this.unloadRes(c,e,this)},this,[e,t],{useManifest:!1,proto:i})},setRemoteRootDir:function(e){e&&(-1<e.indexOf("://localhost")?e=e.replace("localhost",b8e.getHostName()):-1<e.indexOf("://127.0.0.1")&&(e=e.replace("127.0.0.1",b8e.getHostName()))),C.remoteRootDir=e,b8e.macro.IS_RELEASE?(C.assetsResDir="res/raw-assets/res",C.assetsResourcesDir="res/raw-assets/resources",C.assetsRootDir=e):(C.assetsResDir="res",C.assetsResourcesDir="res/raw-assets/resources",C.assetsRootDir=""),C.remoteResDir=e+"/"+C.assetsResDir},checkRemote:function(i,n,e){!b8e.macro.IS_RELEASE&&C.remoteRootDir?b8e.NetMgr.createMgr("resRemote").requestData(C.remoteRootDir+"/check.remote",null,function(e,t){e&&b8e.error(e),i.call(n,e)},this,null,!1,{onStatus:e}):i.call(n,null)},loadScript:function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s=t.replace(/\\/g,"/");if(b8e.isWeChatGame)wx.loadSubpackage?wx.loadSubpackage({name:s,success:function(e){i&&i.call(n,t,e)},fail:function(e){b8e.error("加载脚本错误："+t),i&&i.call(n,t,null)}}):b8e.error("请更新版本：基础库版本2.1.0及以上，微信客户端版本6.6.7及以上，开发者工具版本1.02.1806120及以上！");else{s=this.getResUrl(s,!1,e);var r=this,o=document.createElement("script");o.language="javascript",o.type="text/javascript",o.async=!0,o.src=s;var a=function e(){o.parentNode&&o.parentNode.removeChild(o),o.removeEventListener("load",e,!1),o.removeEventListener("error",l,!1),i&&i.call(n,t,o)},l=function e(){o.parentNode&&o.parentNode.removeChild(o),o.removeEventListener("load",a,!1),o.removeEventListener("error",e,!1),b8e.warn("加载脚本超时，重新请求："+t),b8e.setTimeout(function(){r.loadScript(t,i,n)},r,1e3)};o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),document.getElementsByTagName("head")[0].appendChild(o)}},parseScript:function(e,t){if(b8e.isWeChatGame)return b8e.error("微信小游戏平台不支持parseScript！"),null;if(t&&!document.getElementById(e)){var i=document.getElementsByTagName("head")[0],n=document.createElement("script");return n.language="javascript",n.type="text/javascript",n.id=e,n.async=!0,n.text=t,i.appendChild(n),n}return null},resCount:{get:function(){return this._resCache.count()}},cacheCount:{get:function(){return this._cacheResUrls.length}},setUseCache:function(e){this._noCache=!e,cc.game.config.noCache=this._noCache},purge:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._recycleRes.purge(e),e&&b8e.ProtobufUtil.clear()}});C.assetsResourcesDir="res/raw-assets/resources",C.assetsResDir="res/raw-assets/res",C.assetsRootDir=null,C.remoteResDir=null,C.remoteRootDir=null,C.ALLOW_SET_DEFAULT_FORMAT=!0,C.DEFAULT_FORMAT="png",C.HIGH_DEFINITION_ENABLED=!1,C.IS_DEBUG=!1,C.MAX_CONCURRENT=4,C.PRELOAD_MAX_CONCURRENT=1,C._instance=null,C._singleton=!0,C.inst=function(){return C._instance||(C._singleton=!1,C._instance=new C,C._singleton=!0),C._instance},b8e.res=C.inst()},{}],63:[function(e,t,i){var n=b8e.SceneMgr=b8e.Object.extends({ctor:function(){if(b8e.SceneMgr._singleton)throw new Error("只能通过getInstance()来获取SceneManager实例！");this._super(),this._sceneMap=b8e.HashMap.get()},init:function(){this.updateStageSize();var e=this;cc.view.setResizeCallback(function(){e.updateStageSize()}),cc.view.resizeWithBrowserSize=this.resizeWithBrowserSize,cc.view.resizeWithBrowserSize(!0)},resizeWithBrowserSize:function(e){var t=cc.view,i=window;e?t.__resizeWithBrowserSize||(t.__resizeWithBrowserSize=!0,i.addEventListener("resize",t._resizeEvent),i.addEventListener("orientationchange",t._orientationChange)):t.__resizeWithBrowserSize&&(t.__resizeWithBrowserSize=!1,i.removeEventListener("resize",t._resizeEvent),i.removeEventListener("orientationchange",t._orientationChange))},setWindowSize:function(e,t){cc.view&&(cc.view._resizeEvent(),cc.view.setCanvasSize(e,t),cc.view.setFrameSize(e,t))},setWindowOrientation:function(e){cc.view&&cc.view._orientationChange()},updateStageSize:function(){if(cc.view){var e,t=b8e.designSize.width,i=b8e.designSize.height,n=b8e.settings.resolutionPolicy?b8e.settings.resolutionPolicy:b8e.ResolutionPolicy.AUTO;e=n===b8e.ResolutionPolicy.SHOW_ALL?cc.ResolutionPolicy.SHOW_ALL:cc.ResolutionPolicy.FIXED_HEIGHT,cc.view.setDesignResolutionSize(t,i,e);var s=cc.director.getWinSize();n===b8e.ResolutionPolicy.AUTO&&t/s.width*i>(b8e.designSize.minHeight?b8e.designSize.minHeight:0)&&s.height>=i&&(e=cc.ResolutionPolicy.FIXED_WIDTH,cc.view.setDesignResolutionSize(t,i,e),s=cc.director.getWinSize());var r,o,a=s.width,l=s.height,h=0,c=0,u=0,d=0,f=0,g=i/t;if(b8e.isIPhoneXDebug||this.isIPhoneX()){u=812/375/g,d=44,f=34,l<a?(r={x:-(d*=u*g),y:0,w:d,h:l},o={x:a-d-(f*=u*g),y:0,w:f,h:l},a-=(h=d)+f):(r={x:0,y:l-(d*=u)-(f*=u),w:a,h:d},o={x:0,y:-f,w:a,h:f},l-=d+(c=f)),b8e.stage.ipxTopMask||(b8e.stage.ipxTopMask=b8e.Graphics.get(),b8e.stage.addChild(b8e.stage.ipxTopMask),b8e.stage.ipxTopMask.setLocalZOrder(2e9));var _=b8e.stage.ipxTopMask;_.setPosition(r.x,r.y),_.clear(),_.fillColor(new cc.Color({r:0,g:0,b:0,a:255})),_.fillRect(0,0,r.w,r.h),b8e.stage.ipxBottomMask||(b8e.stage.ipxBottomMask=b8e.Graphics.get(),b8e.stage.addChild(b8e.stage.ipxBottomMask),b8e.stage.ipxBottomMask.setLocalZOrder(2e9));var p=b8e.stage.ipxBottomMask;p.setPosition(o.x,o.y),p.clear(),p.fillColor(new cc.Color({r:0,g:0,b:0,a:255})),p.fillRect(0,0,o.w,o.h)}else if(b8e.isOpenAndroidDebug||this.isOpenAndroidAdapter()){u=760/360/g,f=d=35,l<a?(r={x:-(d*=u*g),y:0,w:d,h:l},o={x:a-d-(f*=u*g),y:0,w:f,h:l},a-=(h=d)+f):(r={x:0,y:l-(d*=u)-(f*=u),w:a,h:d},o={x:0,y:-f,w:a,h:f},l-=d+(c=f)),b8e.stage.androidTopMask||(b8e.stage.androidTopMask=b8e.Graphics.get(),b8e.stage.addChild(b8e.stage.androidTopMask),b8e.stage.androidTopMask.setLocalZOrder(2e9));var m=b8e.stage.androidTopMask;m.setPosition(r.x,r.y),m.clear(),m.fillColor(new cc.Color({r:0,g:0,b:0,a:255})),m.fillRect(0,0,r.w,r.h),b8e.stage.androidBottomMask||(b8e.stage.androidBottomMask=b8e.Graphics.get(),b8e.stage.addChild(b8e.stage.androidBottomMask),b8e.stage.androidBottomMask.setLocalZOrder(2e9));var b=b8e.stage.androidBottomMask;b.setPosition(o.x,o.y),b.clear(),b.fillColor(new cc.Color({r:0,g:0,b:0,a:255})),b.fillRect(0,0,o.w,o.h)}b8e.stageWidth=a>>0,b8e.stageHeight=l>>0,b8e.stage.x=h,b8e.stage.y=c,b8e.stage.setSize(b8e.stageWidth,b8e.stageHeight),b8e.log("舞台尺寸",b8e.stageWidth,b8e.stageHeight),b8e.layer.setSize(b8e.stageWidth,b8e.stageHeight);var v=this.getScene("main");v&&v.setSize(b8e.stageWidth,b8e.stageHeight),b8e.evt.dptG(b8e.Event.STAGE_RESIZE)}},updateResolution:function(e){e=this.isFullScreen()?document.documentElement.getBoundingClientRect():this.getEmulatedScreenSize(e);var t=document.getElementById("GameDiv");t&&(t.style.width=e.width+"px",t.style.height=e.height+"px"),cc.view.setCanvasSize(e.width,e.height)},isIPhoneX:function(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var e=window.devicePixelRatio||1,t=window.screen.width*e,i=window.screen.height*e;if(1125==t&&2436==i)return!0;if(2436==t&&1125==i)return!0}return!1},isOpenAndroidAdapter:function(){if(-1<navigator.userAgent.indexOf("Android")&&!window.MSStream){var e=window.devicePixelRatio||1,t=window.screen.width*e;if(2<=window.screen.height*e/t)return!0}return!1},isFullScreen:function(){return!1},getEmulatedScreenSize:function(e){return e},setEmulatedScreenSize:function(e){this.updateResolution(e)},createScene:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=this._sceneMap.get(e);return s||(s=new b8e.Scene(t,i,n),this._sceneMap.set(e,s)),s},getScene:function(e){return this._sceneMap.get(e)},removeScene:function(e){var t=this._sceneMap.get(e);t&&(t.destroy(),this._sceneMap.del(e))},activateScene:function(e){return this._activeScene=this._sceneMap.get(e),this._activeScene},getActiveScene:function(){return this._activeScene}});n._instance=null,n._singleton=!0,n.inst=function(){return n._instance||(n._singleton=!1,n._instance=new n,n._singleton=!0),n._instance}},{}],64:[function(e,t,i){var n=b8e.SoundMgr=b8e.Object.extends({ctor:function(){if(b8e.SoundMgr._singleton)throw new Error("只能通过getInstance()来获取SoundManager实例！");this._super(),this._esUrlById={},this._esIdsByUrl={},this._esNameIdMap={},this._currBgmId=-1,this._currEaxId=-1,this._bgmVolume=1,this._eaxVolume=1,this._esVolume=1},preload:function(e,t){var i=b8e.res.getResUrl(e,!1);cc.audioEngine.preload(i,t)},playBackgroundMusic:function(e){this._currBgmUrl!=e&&(this._stopCurrBgm(),this._currBgmUrl=e,this._resumeBgm())},playEnvironmentAudio:function(e){this._currEaxUrl!=e&&(this._stopCurrEax(),this._currEaxUrl=e,this._resumeEax())},stopBackgroundMusic:function(){this._stopCurrBgm()},stopEnvironmentAudio:function(){this._stopCurrEax()},stopAllEffectSound:function(){this._stopAllEs()},pauseBackgroundMusic:function(){this._isBgmPaused||(this._isBgmPaused=!0,this._pauseCurrBgm())},_pauseCurrBgm:function(){-1<this._currBgmId&&(cc.audioEngine.stop(this._currBgmId),this._currBgmId=-1)},pauseEnvironmentAudio:function(){this._isEaxPaused||(this._isEaxPaused=!0,this._pauseCurrEax())},_pauseCurrEax:function(){-1<this._currEaxId&&(cc.audioEngine.stop(this._currEaxId),this._currEaxId=-1)},_stopAllEs:function(){for(var e in this._esUrlById)this._stopEsById(e);this._esUrlById={},this._esNameIdMap={}},_stopEsById:function(e){e=parseInt(e),cc.audioEngine.stop(e);var t=this._esUrlById[e];if(t){var i=this._esIdsByUrl[t];if(i){var n=i.indexOf(e);-1<n&&i.splice(n,1),i.length<1&&(delete this._esIdsByUrl[t],cc.audioEngine.uncache(t))}}},resumeBackgroundMusic:function(){this._isBgmPaused&&(this._isBgmPaused=!1,this._resumeBgm())},_resumeBgm:function(){if(-1<this._currBgmId&&(cc.audioEngine.stop(this._currBgmId),this._currBgmId=-1),this._isActivated&&this._currBgmUrl&&!this._isBgmPaused){var e=b8e.res.getResUrl(this._currBgmUrl,!1);this._currBgmId=cc.audioEngine.play(e,!0),cc.audioEngine.setVolume(this._currBgmId,this._bgmVolume)}},resumeEnvironmentAudio:function(){this._isEaxPaused&&(this._isEaxPaused=!1,this._resumeEax())},_resumeEax:function(){if(-1<this._currEaxId&&(cc.audioEngine.stop(this._currEaxId),this._currEaxId=-1),this._isActivated&&this._currEaxUrl&&!this._isEaxPaused){var e=b8e.res.getResUrl(this._currEaxUrl,!1);this._currEaxId=cc.audioEngine.play(e,!0),cc.audioEngine.setVolume(this._currEaxId,this._eaxVolume)}},backgroundMusicmPaused:function(){return this._isBgmPaused},environmentAudioPaused:function(){return this._isEaxPaused},_stopCurrBgm:function(){-1<this._currBgmId&&(cc.audioEngine.stop(this._currBgmId),this._currBgmId=-1),this._currBgmUrl&&(cc.audioEngine.uncache(this._currBgmUrl),this._currBgmUrl=null)},_stopCurrEax:function(){-1<this._currEaxId&&(cc.audioEngine.stop(this._currEaxId),this._currEaxId=-1),this._currEaxUrl&&(cc.audioEngine.uncache(this._currEaxUrl),this._currEaxUrl=null)},setBackgroundMusicVolume:function(e){this._bgmVolume=e,-1<this._currBgmId&&cc.audioEngine.setVolume(this._currBgmId,e)},setEnvironmentAudioVolume:function(e){this._eaxVolume=e,-1<this._currEaxId&&cc.audioEngine.setVolume(this._currEaxId,e)},getBackgroundMusicVolume:function(){return this._bgmVolume},getEnvironmentAudioVolume:function(){return this._eaxVolume},playEffectSound:function(e){var t=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(this._isActivated&&e&&!this._isEsPaused){var s,r;i?(r=this._esNameIdMap[i])&&(this._stopEsById(r),delete this._esUrlById[r],delete this._esNameIdMap[i],delete this._esNameIdMap[r]):(s=this._esIdsByUrl[e])&&(s.forEach(function(e){e=parseInt(e),cc.audioEngine.stop(e),delete t._esUrlById[e]},this),s.length=0,delete this._esIdsByUrl[e],cc.audioEngine.uncache(e));var o=b8e.res.getResUrl(e,!1);r=cc.audioEngine.play(o,n),(s=this._esIdsByUrl[e])||(s=[],this._esIdsByUrl[e]=s),s.push(r),this._esUrlById[r]=e,i&&(this._esNameIdMap[i]=r,this._esNameIdMap[r]=i),cc.audioEngine.setVolume(r,this._esVolume);var a=this;cc.audioEngine.setFinishCallback(r,function(){a._stopEsById(r),delete a._esUrlById[r];var e=a._esNameIdMap[r];e&&(delete a._esNameIdMap[e],delete a._esNameIdMap[r])})}},stopEffectSound:function(e){var t=this._esNameIdMap[e];t&&(this._stopEsById(t),delete this._esNameIdMap[e],delete this._esNameIdMap[t],delete this._esUrlById[t])},setEffectSoundVolume:function(e){this._esVolume=e},getEffectSoundVolume:function(){return this._esVolume},pauseEffectSound:function(){this._isEsPaused||(this._stopAllEs(),this._isEsPaused=!0)},resumeEffectSound:function(){this._isEsPaused&&(this._isEsPaused=!1)},effectSoundPaused:function(){return this._isEsPaused},init:function(){n.AUTOPLAY&&!n._emptyPlayed&&this.preload(n.EFFECT_SOUND_DIR+"/empty.mp3")},activate:function(){this._isActivated||(this._isActivated=!0,cc.audioEngine._restore(),this._resumeBgm(),this._resumeEax())},deactivate:function(){this._isActivated&&(this._isActivated=!1,this._pauseCurrBgm(),this._pauseCurrEax(),this._stopAllEs(),cc.audioEngine._break(),n._emptyPlayed=!1)}});n.BACKGROUND_MUSIC_DIR="sound",n.ENVIRONMENT_AUDIO_DIR="sound",n.EFFECT_SOUND_DIR="sound",n.AUTOPLAY=!1,n._emptyPlayed=!1,n._instance=null,n._singleton=!0,n.inst=function(){return n._instance||(n._singleton=!1,n._instance=new n,n._singleton=!0),n._instance}},{}],65:[function(e,t,i){b8e.BaseControl=b8e.EventDispatcher.extends({init:function(){},ipc:function(){},sendToView:function(){b8e.warn("建议改用 send 方法"),b8e.module.sendToView(this.moduleEnum,arguments)},send:function(){b8e.module.sendToView(this.moduleEnum,arguments)},notify:function(){},addG:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length&&void 0!==arguments[4]&&arguments[4];b8e.evt.addG(this,e,t,i,n,s)},rmvG:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];b8e.evt.rmvG(this,e,t,i)},addGO:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length&&void 0!==arguments[4]&&arguments[4];b8e.evt.addGO(this,e,t,i,n,s)},dptG:function(e,t,i,n){b8e.evt.dptG(e,t,i,n)},dpt:function(e,t,i,n){this.dispatchEventWith(e,t,i,n)},getData:function(e){return null}})},{}],66:[function(e,t,i){var n=b8e.Object.extends({ctor:function(){this._viewsClass={},this._controlsClass={},this._views={},this._controls={},this._controlEvts=b8e.HashMap.get(),this._waitInit=[]},registerView:function(e,t){e?this._viewsClass[e]?b8e.error("b8e.module registerView 重复注册",e):(this._viewsClass[e]=t,this.initModule(e)):b8e.error("registerView moduleEnum null||undefined")},registerControl:function(e,t,i,n){e?this._controlsClass[e]?b8e.error("b8e.module registerControl 重复注册",e):(this._controlsClass[e]={cls:t,evts:i,sender:n},this.initModule(e)):b8e.error("registerControl moduleEnum null||undefined")},initWait:function(){for(var e=0,t=this._waitInit.length;e<t;e++)this.initModule(this._waitInit[e]);this._waitInit.length=0},initModule:function(e){if(b8e.startup&&b8e.startup.isInited())if(e){var t,i,n,s=this._viewsClass[e],r=this._controlsClass[e];if(r&&!(t=this._controls[e])){if(!(i=r.cls))return void b8e.error("注册control不存在",e);(t=new i).moduleEnum=e,(this._controls[e]=t).ipc(),t.Evts=r.evts,(n=r.sender)&&(t.sender=new n),this.__bindCEvts(t),this.__bindGEvts(t),this.__bindHandel(t),t.init()}if(t&&s){var o=this._views[e];o||((o=new s).moduleEnum=e,o.Evts=t.Evts,this._views[e]=o)}}else b8e.error("initModule moduleEnum null||undefined");else this._waitInit.push(e)},__bindCEvts:function(e){var t,i,n,s,r,o,a,l,h,c=e.evts;if(c)for(i in c)if(t=this.ME[i])if(s=this._controls[t],l=c[i],s){if(!l){b8e.error("注册了一个空的evts",e.moduleEnum,i);continue}if(!(a=s.Evts)){b8e.error("control没有启用事件",s.moduleEnum);continue}for(n in l)r=a[n],o=l[n],r?o?s.addEventListener(r,o,e):b8e.error("control中没有指定回掉",e.moduleEnum,i,n):b8e.error("control中没有指定事件",i,n)}else(h=this._controlEvts.get(t,this))||(h=[],this._controlEvts.set(t,h,this)),h.push({rstEvt:l,target:e});else b8e.error("注册模块事件失败，不存在指定枚举",e.moduleEnum,i);if((h=this._controlEvts.get(e.moduleEnum))&&0!=h.length)if(e.Evts){for(var u,d=0;d<h.length;d++)for(n in l=(u=h[d]).rstEvt)r=e.Evts[n],o=l[n],r?o?e.addEventListener(r,o,u.target):b8e.error("等待control中没有指定回掉",n):b8e.error("当前control中没有指定事件",e.moduleEnum,i,n);h.length=0}else b8e.error("模块不存在事件枚举，但是有其他模块注册了",e.moduleEnum)},__bindGEvts:function(e){var t,i,n,s,r,o,a=e.gevts;if(a)for(t in a)if(i=a[t],n=game[t])for(s in i)(r=n[s])?(o=i[s],b8e.evt.addG(e,r,o)):b8e.error("game.",t,"不存在事件",s);else b8e.error("game 下不存在",t,"全局事件")},__bindHandel:function(e){if(e.handels){var t=e.handelNS();b8e.net.sub(e.handels,t,e)}},sendToView:function(e,t){if(e){var i=this._views[e];i&&i.getHierarchyVisible()&&i.waitNotify(t)}else b8e.error("sendToView moduleEnum null||undefined")},sendToControl:function(e,t){if(e){var i=this._controls[e];i&&i.notify&&i.notify.apply(i,t)}else b8e.error("sendToControl moduleEnum null||undefined")},showView:function(e,t){var i,n;if(e){if((n=this._views[e])&&!n.parent){if(t&&t instanceof b8e.Event&&(t=t.data),"number"==typeof t){if(!(i=this._views[t])||!i.parent)return void b8e.error("parent Module 没有初始化或未在显示队列中")}else t instanceof b8e.BaseDisplay&&(i=t);i||(i=b8e.LayerMgr.inst().getGuiLayer()),i.addChild(n)}}else b8e.error("showView moduleEnum null||undefined")},hideView:function(e){if(e){var t=this._views[e];t&&t.parent&&t.removeFromParent()}else b8e.error("hideView moduleEnum null||undefined")},isShowView:function(e){if(e){var t=this._views[e];return!(!t||!t.getHierarchyVisible())}b8e.error("isShowView moduleEnum null||undefined")},bindViewToControl:function(e){if(e){var t=this._views[e],i=this._controls[e];if(t&&i)if(t.__bind)b8e.error("view 已经完成bind");else{var n,s,r,o,a=t.getEvts();if(a&&0<a.length)for(n=0,s=a.length;n<s;n++)(r=a[n])&&""!==r.name?(o=i[r.name])&&"function"==typeof o?b8e.evt.onC(r,o,i):b8e.error("view bind事件在control中不存在",r.name):b8e.error("bind事件node不存在");t.__bind=!0}else b8e.error("b8e.module.bindViewToControl view || control null")}else b8e.error("bindViewToControl moduleEnum null||undefined")},getView:function(e){return this._views[e]},getControl:function(e){return this._controls[e]},isInited:function(e){return!!this._controls[e]}});n._inst=null,n.inst=function(){return n._inst||(n._inst=new n),n._inst},b8e.module=n.inst()},{}],67:[function(e,t,i){var n=b8e.WebHttpRequest=b8e.EventDispatcher.extends({ctor:function(){this._super(),this._url="",this._method="",this.responseType="",this.withCredentials=!1},response:{get:function(){return this._xhr?void 0!==this._xhr.response?this._xhr.response:"text"==this.responseType?this._xhr.responseText:"arraybuffer"==this.responseType&&/msie 9.0/i.test(navigator.userAgent)?window.convertResponseBodyToText(this._xhr.responseBody):"document"==this.responseType?this._xhr.responseXML:null:null}},open:function(e,t){void 0===t&&(t="GET"),this._url=e,this._method=t,this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=b8e.getXHR(),this._xhr.onreadystatechange=this.onReadyStateChange.bind(this),this._xhr.onprogress=this.updateProgress.bind(this),this._xhr.open(this._method,this._url,!0)},send:function(e){if(e||(e=null),this._xhr.responseType=this.responseType,this._xhr.withCredentials=!!this.withCredentials,this.headerObj)for(var t in this.headerObj)this._xhr.setRequestHeader(t,this.headerObj[t]);this._xhr.send(e)},abort:function(){this._xhr&&this._xhr.abort()},getAllResponseHeaders:function(){return this._xhr?this._xhr.getAllResponseHeaders()||"":null},setRequestHeader:function(e,t){this.headerObj||(this.headerObj={}),this.headerObj[e]=t},getResponseHeader:function(e){return this._xhr?this._xhr.getResponseHeader(e)||"":null},onReadyStateChange:function(){var e=this._xhr;if(4==e.readyState){var t=400<=e.status||0==e.status,i=this._url,n=this;window.setTimeout(function(){t?(n.hasEventListener(b8e.IOErrorEvent.IO_ERROR)||b8e.error("未处理的IO错误",i),n.dispatchEventWith(b8e.IOErrorEvent.IO_ERROR)):n.dispatchEventWith(b8e.Event.COMPLETE)},0)}},updateProgress:function(e){e.lengthComputable&&b8e.ProgressEvent.dispatchProgressEvent(this,b8e.ProgressEvent.PROGRESS,e.loaded,e.total)}});b8e.HttpRequest=n},{}],68:[function(e,t,i){b8e.$getUrl=function(e){var t=e.url;return-1==t.indexOf("?")&&e.method==b8e.URLRequestMethod.GET&&e.data&&e.data instanceof b8e.URLVariables&&(t=t+"?"+e.data.toGetMethodString()),t};var n=b8e.WebNetContext=b8e.Object.extends({ctor:function(){if(b8e.WebNetContext._singleton)throw new Error("只能通过getInstance()来获取WebNetContext实例！");this._super()},proceed:function(t){function e(e){t.dispatchEvent(e)}function i(e){s(),t.dispatchEvent(e)}function n(){switch(s(),t.dataFormat){case b8e.URLLoaderDataFormat.VARIABLES:t.data=new b8e.URLVariables(l.response);break;case b8e.URLLoaderDataFormat.TEXT:t.data=l.response.toString();break;case b8e.URLLoaderDataFormat.JSON:t.data=b8e.JsUtil.jsonParse(l.response.toString());break;case b8e.URLLoaderDataFormat.BINARY:default:t.data=l.response}window.setTimeout(function(){b8e.Event.dispatchEvent(t,b8e.Event.COMPLETE)},0)}function s(){l.removeEventListener(b8e.Event.COMPLETE,n,r),l.removeEventListener(b8e.IOErrorEvent.IO_ERROR,i,r),l.removeEventListener(b8e.ProgressEvent.PROGRESS,e,r)}var r=this;if(t.dataFormat!=b8e.URLLoaderDataFormat.TEXTURE)if(t.dataFormat!=b8e.URLLoaderDataFormat.SOUND){var o=t._request,a=r.getVirtualUrl(b8e.$getUrl(o)),l=new b8e.HttpRequest;if(l.addEventListener(b8e.Event.COMPLETE,n,this),l.addEventListener(b8e.IOErrorEvent.IO_ERROR,i,this),l.addEventListener(b8e.ProgressEvent.PROGRESS,e,this),l.open(a,o.method),l.responseType=this.getResponseType(t.dataFormat),o.method!=b8e.URLRequestMethod.GET&&o.data)if(o.data instanceof b8e.URLVariables){l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var h=o.data;l.send(h.toString())}else l.setRequestHeader("Content-Type","multipart/form-data"),l.send(o.data);else l.send()}else this.loadSound(t);else this.loadTexture(t)},getResponseType:function(e){switch(e){case b8e.URLLoaderDataFormat.TEXT:case b8e.URLLoaderDataFormat.JSON:case b8e.URLLoaderDataFormat.VARIABLES:return b8e.URLLoaderDataFormat.TEXT;case b8e.URLLoaderDataFormat.BINARY:return"arraybuffer";default:return e}},loadSound:function(t){function e(e){t.dispatchEvent(e)}function i(e){s(),t.dispatchEvent(e)}function n(e){s(),t.data=a,window.setTimeout(function(){t.dispatchEventWith(b8e.Event.COMPLETE)},0)}function s(){a.removeEventListener(b8e.Event.COMPLETE,n,r),a.removeEventListener(b8e.IOErrorEvent.IO_ERROR,i,r),a.removeEventListener(b8e.ProgressEvent.PROGRESS,e,r)}var r=this,o=this.getVirtualUrl(t._request.url),a=new b8e.Sound;a.addEventListener(b8e.Event.COMPLETE,n,r),a.addEventListener(b8e.IOErrorEvent.IO_ERROR,i,r),a.addEventListener(b8e.ProgressEvent.PROGRESS,e,r),a.load(o)},loadTexture:function(n){function e(e){n.dispatchEvent(e)}function t(e){s(),n.dispatchEvent(e)}function i(e){s();var t=a.data;t.source.setAttribute("bitmapSrc",o);var i=new b8e.Texture;i._setBitmapData(t),n.data=i,window.setTimeout(function(){n.dispatchEventWith(b8e.Event.COMPLETE)},r)}function s(){a.removeEventListener(b8e.Event.COMPLETE,i,r),a.removeEventListener(b8e.IOErrorEvent.IO_ERROR,t,r),a.removeEventListener(b8e.ProgressEvent.PROGRESS,e,r)}var r=this,o=this.getVirtualUrl(n._request.url),a=new b8e.ImageLoader;a.addEventListener(b8e.Event.COMPLETE,i,r),a.addEventListener(b8e.IOErrorEvent.IO_ERROR,t,r),a.addEventListener(b8e.ProgressEvent.PROGRESS,e,r),a.load(o)},getChangeList:function(){return[]},getVirtualUrl:function(e){return e}});n._instance=null,n._singleton=!0,n.inst=function(){return n._instance||(n._singleton=!1,n._instance=new n,n._singleton=!0),n._instance},b8e.NetContext=n},{}],69:[function(e,t,i){var n=b8e.NetHandler=function(){};b8e.addNH=n.addHandler=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"main";b8e.NetMgr.getMgr(n).addMsgHandler(e,t,i)}},{}],70:[function(e,t,i){var n=b8e.NetSender=function(){};b8e.sendN=n.send=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"main";b8e.NetMgr.getMgr(t).sendBinary(e)},n.getBytes=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"main";return b8e.NetMgr.getMgr(e).getBytes()}},{}],71:[function(e,t,i){var n=b8e.ResRequest=b8e.Object.extends({_isRecycled:!1,_isDisposed:!1,ctor:function(){this._super(),this.constructor===n&&(n.poolCall||b8e.warn("强烈建议用engine.ResRequest.get代替new操作！")),this.callbacks=b8e.HashMap.get(),this.references=b8e.HashMap.get(),this._isRecycled=!1,this._isDisposed=!1,this.clear()},usable:{get:function(){return!this._isRecycled&&!this._isDisposed}},isRecycled:{get:function(){return this._isRecycled}},isDisposed:{get:function(){return this._isDisposed}},clear:function(){this.url=null,this.name=null,this.ext=null,this.resUrl=null,this.type=null,this.priority=0,this.arrivalOrder=0,this.recycleDelay=0,this.options=null,this.useManifest=!1,this.noCache=!1,this.isPreload=!1,this.hasCache=!1,this.isLoading=!1,this.isLoaded=!1,this.isUnused=!1,this.isCompress=!1,this.callbacks.clear(),this.references.clear(),this.err=null,this.asset=null,this.format=null,this.dependKeys=null},restore:function(){this._isRecycled=!1,this.clear()},recycle:function(){this.clear(),this._isRecycled=!0},release:function(){this.constructor===n?n.put(this):this.destroy()},dispose:function(){this.callbacks.release(),this.callbacks=null,this.references.release(),this.references=null,this._isRecycled=!1,this._isDisposed=!0},destroy:function(){this.constructor===n&&(n.poolCall||b8e.warn("强烈建议用engine.ResRequest.put或release代替destroy操作！")),this.recycle(),this.dispose()}});n.pool=new b8e.Pool(n,1024),n.get=function(){return n.pool.get()},n.put=function(e){return n.pool.put(e)}},{}],72:[function(e,t,i){b8e.ISocket=b8e.WebSocket,b8e.Socket=b8e.EventDispatcher.extends({ctor:function(e,t){void 0===e&&(e=""),void 0===t&&(t=0),this._super(this),this._writeMessage="",this._readMessage="",this._connected=!1,this._connecting=!1,this._bytesWrite=!1,this._type=b8e.Socket.TYPE_STRING,this.socket=new b8e.ISocket,this.socket.addCallBacks(this.onConnect,this.onClose,this.onSocketData,this.onError,this)},connect:function(e,t){this._connecting||this._connected||(this._connecting=!0,this.socket.connect(e,t))},connectByUrl:function(e){this._connecting||this._connected||(this._connecting=!0,this.socket.connectByUrl(e))},close:function(){this._connected&&this.socket.close()},onConnect:function(){this._connected=!0,this._connecting=!1,this.dispatchEventWith(b8e.Event.CONNECT)},onClose:function(){this._connected=!1,this.dispatchEventWith(b8e.Event.CLOSE)},onError:function(){this._connecting&&(this._connecting=!1),this.dispatchEventWith(b8e.IOErrorEvent.IO_ERROR)},onSocketData:function(e){"string"==typeof e?this._readMessage+=e:this._readByte.writeUint8Array(new Uint8Array(e)),b8e.ProgressEvent.dispatchProgressEvent(this,b8e.ProgressEvent.SOCKET_DATA)},flush:function(){this._connected&&(this._writeMessage&&(this.socket.send(this._writeMessage),this._writeMessage=""),this._bytesWrite&&(this.socket.send(this._writeByte.buffer),this._bytesWrite=!1,this._writeByte.clear()))},writeUTF:function(e){this._connected&&(this._type==b8e.Socket.TYPE_BINARY?(this._bytesWrite=!0,this._writeByte.writeUTF(e)):this._writeMessage+=e)},readUTF:function(){var e;return this._type==b8e.Socket.TYPE_BINARY?(this._readByte.position=0,e=this._readByte.readUTF(),this._readByte.clear()):(e=this._readMessage,this._readMessage=""),e},writeBytes:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this._connected&&this._writeByte&&(this._bytesWrite=!0,this._writeByte.writeBytes(e,t,i))},readBytes:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this._readByte&&(this._readByte.position=0,this._readByte.readBytes(e,t,i),this._readByte.clear())},connected:{get:function(){return this._connected}},type:{get:function(){return this._type},set:function(e){(this._type=e)!=b8e.Socket.TYPE_BINARY||this._writeByte||(this._readByte=new b8e.ByteArray,this._writeByte=new b8e.ByteArray)}}}),b8e.Socket.TYPE_STRING="SocketTypeString",b8e.Socket.TYPE_BINARY="SocketTypeBinary"},{}],73:[function(e,t,i){b8e.URLLoader=b8e.EventDispatcher.extends({ctor:function(e){void 0===e&&(e=null),this._super(),this.dataFormat=b8e.URLLoaderDataFormat.TEXT,this.data=null,this.context=null,this._request=null,this._status=-1,e&&this.load(e)},load:function(e){this._request=e,this.data=null,b8e.NetContext.inst().proceed(this)},reload:function(){this._request&&this.load(this._request)},__recycle:function(){this._request=null,this.context=null,this.data=null}})},{}],74:[function(e,t,i){var n=b8e.URLLoaderDataFormat=function(){};n.BINARY="binary",n.TEXT="text",n.JSON="json",n.VARIABLES="variables",n.TEXTURE="texture",n.SOUND="sound"},{}],75:[function(e,t,i){b8e.URLRequest=b8e.Object.extends({ctor:function(e){void 0===e&&(e=null),this._super(this),this.data=null,this.method=b8e.URLRequestMethod.GET,this.requestHeaders=[],this.url=e}})},{}],76:[function(e,t,i){var n=b8e.URLRequestMethod=function(){};n.GET="get",n.POST="post"},{}],77:[function(e,t,i){b8e.URLVariables=b8e.Object.extends({ctor:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];void 0===e&&(e=null),this._super(this),this._isJson=t,(this.variables=null)!==e&&this.decode(e)},decode:function(e){if("string"==typeof e){this.variables||(this.variables={});var t=this.variables;e=e.split("+").join(" ");for(var i,n=/[?&]?([^=]+)=([^&]*)/g;i=n.exec(e);){var s=decodeURIComponent(i[1]),r=decodeURIComponent(i[2]);if(s in t!=0){var o=t[s];o instanceof Array?o.push(r):t[s]=[o,r]}else t[s]=r}}else this.variables=e},toGetMethodString:function(){if(!this.variables)return"";var e=this.variables,t=[];for(var i in e)t.push(this.encodeValue(i,e[i]));return t.join("&")},toString:function(){if(!this.variables)return"";var e=this.variables;if(this._isJson)return JSON.stringify(e);var t=[];for(var i in e)t.push(this.encodeValue(i,e[i]));return t.join("&")},encodeValue:function(e,t){return t instanceof Array?this.encodeArray(e,t):encodeURIComponent(e)+"="+encodeURIComponent(t)},encodeArray:function(t,e){return t?0==e.length?encodeURIComponent(t)+"=":e.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):""}})},{}],78:[function(e,t,i){b8e.WebSocket=b8e.Object.extends({ctor:function(){this.host="",this.port=0,window.WebSocket||b8e.error("不支持WebSocket")},addCallBacks:function(e,t,i,n,s){this.onConnect=e,this.onClose=t,this.onSocketData=i,this.onError=n,this.thisObject=s},connect:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.host=e,this.port=t;var n=(i?"wss://":"ws://")+this.host+":"+this.port;this.socket=new window.WebSocket(n),this.socket.binaryType="arraybuffer",this._bindEvent()},connectByUrl:function(e){this.socket=new window.WebSocket(e),this.socket.binaryType="arraybuffer",this._bindEvent()},_bindEvent:function(){var t=this,e=this.socket;e.onopen=function(){t.onConnect&&t.onConnect.call(t.thisObject)},e.onclose=function(e){t.onClose&&t.onClose.call(t.thisObject)},e.onerror=function(e){t.onError&&t.onError.call(t.thisObject)},e.onmessage=function(e){t.onSocketData&&t.onSocketData.call(t.thisObject,e.data)}},send:function(e){this.socket.send(e)},close:function(){this.socket.close()}})},{}],79:[function(e,t,i){function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s;b8e.BaseProcess=b8e.Object.extends((n(s={ctor:function(){this._super(),this._fromPercent=0,this._toPercent=1,this._currPercent=0,this._processPercent=0},parallelism:{get:function(){return this._parallelism}},isProcessing:{get:function(){return this._isProcessing}},isProcessed:{get:function(){return this._isProcessed}},group:{get:function(){return this._group}},fromPercent:{set:function(e){this._fromPercent=e}},toPercent:{set:function(e){this._toPercent=e}}},"parallelism",{set:function(e){this._parallelism=e}}),n(s,"group",{set:function(e){this._group=e}}),n(s,"getState",function(){return null}),n(s,"processPercent",{set:function(e){this._processPercent=e,this.processHandler(e)},get:function(){return this._processPercent}}),n(s,"processHandler",function(e){}),n(s,"setProcessPercent",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(e=1<(e=e<0?0:e)?1:e,this._currPercent=e,b8e.Tween.kill(this),!this._group||this._group.isHangUpMaster(this)){var i=this._fromPercent+(this._toPercent-this._fromPercent)*e;0<t?b8e.Tween.get(this).to({processPercent:i},t):this.processPercent=i}}),n(s,"switchMaster",function(){this.setProcessPercent(this._currPercent)}),n(s,"setOnCompleteNotify",function(e,t){this._onCompleteNotify=e,this._onCompleteThis=t}),n(s,"startProcess",function(){this._isProcessing=!0,this.setProcessPercent(0)}),n(s,"completeProcess",function(){this.setProcessPercent(1),this._onCompleteNotify&&this._onCompleteNotify.call(this._onCompleteThis,this),this._isProcessing=!1,this._isProcessed=!0,this._parallelism=!1}),n(s,"holdOnProcess",function(){this._holdOnNotify&&this._holdOnNotify(this)}),n(s,"setHoldOnNotify",function(e){this._holdOnNotify=e}),n(s,"dispose",function(){this._currPercent=0,this._processPercent=0,this._group=null,this._onCompleteNotify=null,this._onCompleteThis=null,this._holdOnNotify=null,this._fromPercent=0,this._toPercent=0,this._isProcessing=!1,this._parallelism=!1,b8e.Tween.kill(this)}),s))},{}],80:[function(e,t,i){function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s;b8e.ProcessGroup=b8e.Object.extends((n(s={ctor:function(){this._super(),this._preSet=[],this._fromPercent=0,this._toPercent=1,this._currPercent=0},parallelism:{get:function(){return this._parallelism}},isProcessing:{get:function(){return this._isProcessing}},isProcessed:{get:function(){return this._isProcessed}},group:{get:function(){return this._group}},processSet:{get:function(){return this._processSet}},fromPercent:{set:function(e){this._fromPercent=e}},toPercent:{set:function(e){this._toPercent=e}}},"parallelism",{set:function(e){this._parallelism=e}}),n(s,"group",{set:function(e){this._group=e}}),n(s,"setHoldOnNotify",function(e){this._holdOnNotify=e}),n(s,"setOnCompleteNotify",function(e,t){this._onCompleteNotify=e,this._onCompleteThis=t}),n(s,"getState",function(){var t=[];return this._preSet.forEach(function(e){t.push(e.getState())}),t.join("|")}),n(s,"startProcess",function(){if(!this._isProcessing)if(this._isProcessing=!0,this._isProcessed=!1,this.setProcessPercent(0),0<this._preSet.length){this._processSet=this._preSet.slice();var t=!1;this._preSet.slice().every(function(e){if(e.parallelism)t=!0,this._masterProcess||(this._masterProcess=e,this._masterProcess.switchMaster()),e.setOnCompleteNotify(this.onCompleteNotify,this),e.setHoldOnNotify(this.onHoldOnNotify),e.isProcessing||e.startProcess();else if(!t)return this._masterProcess=e,this._masterProcess.switchMaster(),e.setOnCompleteNotify(this.onCompleteNotify,this),e.setHoldOnNotify(this.onHoldOnNotify),e.isProcessing||e.startProcess(),!1;return!0})}else this.free(),this.completeProcess()}),n(s,"completeProcess",function(){this.setProcessPercent(1),null!=this._onCompleteNotify&&this._onCompleteNotify.call(this._onCompleteThis,this),this._isProcessing=!1,this._isProcessed=!0,this._parallelism=!1}),n(s,"holdOnProcess",function(){null!=this._holdOnNotify&&this._holdOnNotify(this)}),n(s,"processHandler",function(e){}),n(s,"setProcessPercent",function(e){e=1<(e=(this._currPercent=e)<0?0:e)?1:e,this.processHandler(this._fromPercent+(this._toPercent-this._fromPercent)*e)}),n(s,"addPreGroup",function(e){-1==this._preSet.indexOf(e)?this._preSet.push(e):b8e.error("预流程已存在！")}),n(s,"addPreProcess",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s=this.getProcess(e);s?-1==this._preSet.indexOf(s)?(s.fromPercent=t,s.toPercent=i,s.group=this,s.parallelism=n,this._preSet.push(s)):b8e.error("预流程"+e+"已存在！"):b8e.error("试图访问不存在的流程"+e+"！")}),n(s,"onHoldOnNotify",function(e){this._masterProcess==e&&!e.parallelism&&this._processSet.slice().forEach(function(e){e.parallelism&&(e.setOnCompleteNotify(this.onCompleteNotify,this),e.setHoldOnNotify(this.onHoldOnNotify),e.isProcessing||e.startProcess())})}),n(s,"onCompleteNotify",function(e){var t=this._masterProcess==e;t&&(this._masterProcess=null);var i=!e.parallelism,n=this._processSet.indexOf(e);if(-1!=n&&this._processSet.splice(n,1),e.dispose(),e=null,0<this._processSet.length){var s=!1,r=this._processSet.slice();i?r.every(function(e){if(e.parallelism)s=!0,this._masterProcess||(this._masterProcess=e,this._masterProcess.switchMaster()),e.setOnCompleteNotify(this.onCompleteNotify,this),e.setHoldOnNotify(this.onHoldOnNotify),e.isProcessing||e.startProcess();else if(!s)return this._masterProcess=e,this._masterProcess.switchMaster(),e.setOnCompleteNotify(this.onCompleteNotify,this),e.setHoldOnNotify(this.onHoldOnNotify),e.isProcessing||e.startProcess(),!1;return!0}):t&&(r.every(function(e){return!e.parallelism||(s=!0,this._masterProcess=e,this._masterProcess.switchMaster(),!1)}),s||(e=r[0],this._masterProcess=e,this._masterProcess.switchMaster(),this._masterProcess.setOnCompleteNotify(this.onCompleteNotify,this),this._masterProcess.setHoldOnNotify(this.onHoldOnNotify),this._masterProcess.isProcessing||this._masterProcess.startProcess()))}else this.free(),this.completeProcess()}),n(s,"free",function(){this._masterProcess=null,this._preSet.length=0,this._processSet&&(this._processSet.length=0),this._isProcessing=!1}),n(s,"isHangUpMaster",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return t||(t=this._processSet),this.getIsHangUpMaster(e,t)}),n(s,"getIsHangUpMaster",function(e,t){var i=!1,n=t&&0<t.length?t[0]:null;return n&&(n==e?i=!0:n instanceof b8e.ProcessGroup&&(i=this.getIsHangUpMaster(e,e._processSet))),i}),n(s,"preProcessIsHangUp",function(e){return this.getPreProcessIsHangUp(e,this._processSet)}),n(s,"getPreProcessIsHangUp",function(t,e){var i=null;return e&&e.every(function(e){return e instanceof ProcessGroup?i=this.getPreProcessIsHangUp(t,e._processSet):e.getState()==t&&(i=e),!i},this),i}),n(s,"switchMaster",function(){this.setProcessPercent(this._currPercent)}),n(s,"dispose",function(){this.free(),this._currPercent=0,this._group=null,this._onCompleteNotify=null,this._onCompleteThis=null,this._holdOnNotify=null,this._fromPercent=0,this._toPercent=0,this._isProcessing=!1,this._isProcessed=!1,this._parallelism=!1,this._preSet=null,this._processSet=null}),s))},{}],81:[function(e,t,i){b8e.ProcessStateMachine=b8e.ProcessGroup.extends({ctor:function(){this._super(),this._processDic={}},currState:{get:function(){return this._currProcess?this._currProcess.getState():null}},currProcess:{get:function(){return this._currProcess}},pushProcess:function(e){this._processDic[e.getState()]&&b8e.error("流程已存在！"),this._processDic[e.getState()]=e},insertPreProcess:function(e){var t=this.getProcess(e);if(t)if(-1==this._preSet.indexOf(t)){var i=this._preSet.indexOf(this._currProcess);this._preSet.splice(i+1,0,t)}else b8e.error("预流程"+e+"已存在！");else b8e.error("试图访问不存在的流程"+e+"！")},getProcess:function(e){return this._processDic[e]},completeHangUpProcess:function(e){this._currProcess&&this._currProcess.getState()==e&&this._currProcess.completeProcess()},run:function(){if(this._isProcessing)throw new Error("流程状态机运行时不可再次运行！");if(!(0<this._preSet.length))throw new Error("状态机没有可运行流程！");this._isProcessing=!0,this._processSet=this._preSet.slice(),this.nextProcess()},free:function(){this._super(),this._currProcess&&(this._currProcess.dispose(),this._currProcess=null)},nextProcess:function(){var e=this._preSet.indexOf(this._currProcess);this._currProcess&&(this._currProcess.dispose(),this._currProcess=null);var t=this._preSet[e+1];if(!t)throw new Error("流程异常！");this._currProcess=t,b8e.log(this._currProcess.getState()+"开始..."),this._currProcess.setOnCompleteNotify(this.onCompleteNotify,this),this._startTime=b8e.timeStamp,this._currProcess.isProcessing||this._currProcess.startProcess()},rollback:function(){var e=this._preSet.indexOf(this._currProcess);this._currProcess&&(this._currProcess.dispose(),this._currProcess=null);var t=this._preSet[e-1];if(!t)throw new Error("流程异常！");this._currProcess=t,b8e.log(this._currProcess.getState()+"开始..."),this._currProcess.setOnCompleteNotify(this.onCompleteNotify,this),this._startTime=b8e.timeStamp,this._currProcess.isProcessing||this._currProcess.startProcess()},gotoProcess:function(e){this._currProcess&&(this._currProcess.dispose(),this._currProcess=null);var t=this.getProcess(e);t?(this._currProcess=t,b8e.log(this._currProcess.getState()+"开始..."),this._currProcess.setOnCompleteNotify(this.onCompleteNotify,this),this._startTime=b8e.timeStamp,this._currProcess.isProcessing||this._currProcess.startProcess()):b8e.error("试图访问不存在的流程"+e+"！")},onCompleteNotify:function(e){if(this._currProcess){b8e.log(this._currProcess.getState(),"结束 耗时："+(b8e.timeStamp-this._startTime)+"ms");var t=this._processSet.indexOf(e);-1!=t&&this._processSet.splice(t,1),0<this._processSet.length?this.nextProcess():(this.free(),this.completeProcess())}}})},{}],82:[function(e,t,i){b8e.protobuf=e("./protobuf")},{"./protobuf":85}],83:[function(e,t,i){var f="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)},n=e("./long");t.exports=function(l){function a(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function h(){var e=[],t=[];return function(){if(0===arguments.length)return t.join("")+i.apply(String,e);1024<e.length+arguments.length&&(t.push(i.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}function n(e,t,i,n,s){var r,o,a=8*s-n-1,l=(1<<a)-1,h=l>>1,c=-7,u=i?s-1:0,d=i?-1:1,f=e[t+u];for(u+=d,r=f&(1<<-c)-1,f>>=-c,c+=a;0<c;r=256*r+e[t+u],u+=d,c-=8);for(o=r&(1<<-c)-1,r>>=-c,c+=n;0<c;o=256*o+e[t+u],u+=d,c-=8);if(0===r)r=1-h;else{if(r===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),r-=h}return(f?-1:1)*o*Math.pow(2,r-n)}function s(e,t,i,n,s,r){var o,a,l,h=8*r-s-1,c=(1<<h)-1,u=c>>1,d=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:r-1,g=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),2<=(t+=1<=o+u?d/l:d*Math.pow(2,1-u))*l&&(o++,l/=2),c<=o+u?(a=0,o=c):1<=o+u?(a=(t*l-1)*Math.pow(2,s),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,s),o=0));8<=s;e[i+f]=255&a,f+=g,a/=256,s-=8);for(o=o<<s|a,h+=s;0<h;e[i+f]=255&o,f+=g,o/=256,h-=8);e[i+f-g]|=128*_}var g=function e(t,i,n){if(void 0===t&&(t=e.DEFAULT_CAPACITY),void 0===i&&(i=e.DEFAULT_ENDIAN),void 0===n&&(n=e.DEFAULT_NOASSERT),!n){if((t|=0)<0)throw RangeError("Illegal capacity");i=!!i,n=!!n}this.buffer=0===t?r:new ArrayBuffer(t),this.view=0===t?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=t,this.littleEndian=i,this.noAssert=n};g.VERSION="5.0.1",g.LITTLE_ENDIAN=!0,g.BIG_ENDIAN=!1,g.DEFAULT_CAPACITY=16,g.DEFAULT_ENDIAN=g.BIG_ENDIAN,g.DEFAULT_NOASSERT=!1,g.Long=l||null;var o=g.prototype;o.__isByteBuffer__,Object.defineProperty(o,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var r=new ArrayBuffer(0),i=String.fromCharCode;g.accessor=function(){return Uint8Array},g.allocate=function(e,t,i){return new g(e,t,i)},g.concat=function(e,t,i,n){"boolean"!=typeof t&&"string"==typeof t||(n=i,i=t,t=void 0);for(var s,r=0,o=0,a=e.length;o<a;++o)g.isByteBuffer(e[o])||(e[o]=g.wrap(e[o],t)),0<(s=e[o].limit-e[o].offset)&&(r+=s);if(0===r)return new g(0,i,n);var l,h=new g(r,i,n);for(o=0;o<a;)(s=(l=e[o++]).limit-l.offset)<=0||(h.view.set(l.view.subarray(l.offset,l.limit),h.offset),h.offset+=s);return h.limit=h.offset,h.offset=0,h},g.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},g.type=function(){return ArrayBuffer},g.wrap=function(e,t,i,n){if("string"!=typeof t&&(n=i,i=t,t=void 0),"string"==typeof e)switch(void 0===t&&(t="utf8"),t){case"base64":return g.fromBase64(e,i);case"hex":return g.fromHex(e,i);case"binary":return g.fromBinary(e,i);case"utf8":return g.fromUTF8(e,i);case"debug":return g.fromDebug(e,i);default:throw Error("Unsupported encoding: "+t)}if(null===e||"object"!==(void 0===e?"undefined":f(e)))throw TypeError("Illegal buffer");var s;if(g.isByteBuffer(e))return(s=o.clone.call(e)).markedOffset=-1,s;if(e instanceof Uint8Array)s=new g(0,i,n),0<e.length&&(s.buffer=e.buffer,s.offset=e.byteOffset,s.limit=e.byteOffset+e.byteLength,s.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)s=new g(0,i,n),0<e.byteLength&&(s.buffer=e,s.offset=0,s.limit=e.byteLength,s.view=0<e.byteLength?new Uint8Array(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");(s=new g(e.length,i,n)).limit=e.length;for(var r=0;r<e.length;++r)s.view[r]=e[r]}return s},o.writeBitSet=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var n,s=t,r=e.length,o=r>>3,a=0;for(t+=this.writeVarint32(r,t);o--;)n=1&!!e[a++]|(1&!!e[a++])<<1|(1&!!e[a++])<<2|(1&!!e[a++])<<3|(1&!!e[a++])<<4|(1&!!e[a++])<<5|(1&!!e[a++])<<6|(1&!!e[a++])<<7,this.writeByte(n,t++);if(a<r){var l=0;for(n=0;a<r;)n|=(1&!!e[a++])<<l++;this.writeByte(n,t++)}return i?(this.offset=t,this):t-s},o.readBitSet=function(e){var t=void 0===e;t&&(e=this.offset);var i,n=this.readVarint32(e),s=n.value,r=s>>3,o=0,a=[];for(e+=n.length;r--;)i=this.readByte(e++),a[o++]=!!(1&i),a[o++]=!!(2&i),a[o++]=!!(4&i),a[o++]=!!(8&i),a[o++]=!!(16&i),a[o++]=!!(32&i),a[o++]=!!(64&i),a[o++]=!!(128&i);if(o<s){var l=0;for(i=this.readByte(e++);o<s;)a[o++]=!!(i>>l++&1)}return t&&(this.offset=e),a},o.readBytes=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}var n=this.slice(t,t+e);return i&&(this.offset+=e),n},o.writeBytes=o.append,o.writeInt8=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var n=this.buffer.byteLength;return n<t&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},o.writeByte=o.writeInt8,o.readInt8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i=this.view[e];return 128==(128&i)&&(i=-(255-i+1)),t&&(this.offset+=1),i},o.readByte=o.readInt8,o.writeUint8=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var n=this.buffer.byteLength;return n<t&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},o.writeUInt8=o.writeUint8,o.readUint8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i=this.view[e];return t&&(this.offset+=1),i},o.readUInt8=o.readUint8,o.writeInt16=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var n=this.buffer.byteLength;return n<t&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},o.writeShort=o.writeInt16,o.readInt16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[e],i|=this.view[e+1]<<8):(i=this.view[e]<<8,i|=this.view[e+1]),32768==(32768&i)&&(i=-(65535-i+1)),t&&(this.offset+=2),i},o.readShort=o.readInt16,o.writeUint16=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var n=this.buffer.byteLength;return n<t&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},o.writeUInt16=o.writeUint16,o.readUint16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[e],i|=this.view[e+1]<<8):(i=this.view[e]<<8,i|=this.view[e+1]),t&&(this.offset+=2),i},o.readUInt16=o.readUint16,o.writeInt32=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var n=this.buffer.byteLength;return n<t&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),i&&(this.offset+=4),this},o.writeInt=o.writeInt32,o.readInt32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[e+2]<<16,i|=this.view[e+1]<<8,i|=this.view[e],i+=this.view[e+3]<<24>>>0):(i=this.view[e+1]<<16,i|=this.view[e+2]<<8,i|=this.view[e+3],i+=this.view[e]<<24>>>0),i|=0,t&&(this.offset+=4),i},o.readInt=o.readInt32,o.writeUint32=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var n=this.buffer.byteLength;return n<t&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),i&&(this.offset+=4),this},o.writeUInt32=o.writeUint32,o.readUint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var i=0;return this.littleEndian?(i=this.view[e+2]<<16,i|=this.view[e+1]<<8,i|=this.view[e],i+=this.view[e+3]<<24>>>0):(i=this.view[e+1]<<16,i|=this.view[e+2]<<8,i|=this.view[e+3],i+=this.view[e]<<24>>>0),t&&(this.offset+=4),i},o.readUInt32=o.readUint32,l&&(o.writeInt64=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"==typeof e)e=l.fromNumber(e);else if("string"==typeof e)e=l.fromString(e);else if(!(e&&e instanceof l))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=l.fromNumber(e):"string"==typeof e&&(e=l.fromString(e)),t+=8;var n=this.buffer.byteLength;n<t&&this.resize((n*=2)>t?n:t),t-=8;var s=e.low,r=e.high;return this.littleEndian?(this.view[t+3]=s>>>24&255,this.view[t+2]=s>>>16&255,this.view[t+1]=s>>>8&255,this.view[t]=255&s,t+=4,this.view[t+3]=r>>>24&255,this.view[t+2]=r>>>16&255,this.view[t+1]=r>>>8&255,this.view[t]=255&r):(this.view[t]=r>>>24&255,this.view[t+1]=r>>>16&255,this.view[t+2]=r>>>8&255,this.view[t+3]=255&r,t+=4,this.view[t]=s>>>24&255,this.view[t+1]=s>>>16&255,this.view[t+2]=s>>>8&255,this.view[t+3]=255&s),i&&(this.offset+=8),this},o.writeLong=o.writeInt64,o.readInt64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var i=0,n=0;this.littleEndian?(i=this.view[e+2]<<16,i|=this.view[e+1]<<8,i|=this.view[e],i+=this.view[e+3]<<24>>>0,e+=4,n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0,e+=4,i=this.view[e+1]<<16,i|=this.view[e+2]<<8,i|=this.view[e+3],i+=this.view[e]<<24>>>0);var s=new l(i,n,!1);return t&&(this.offset+=8),s},o.readLong=o.readInt64,o.writeUint64=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"==typeof e)e=l.fromNumber(e);else if("string"==typeof e)e=l.fromString(e);else if(!(e&&e instanceof l))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=l.fromNumber(e):"string"==typeof e&&(e=l.fromString(e)),t+=8;var n=this.buffer.byteLength;n<t&&this.resize((n*=2)>t?n:t),t-=8;var s=e.low,r=e.high;return this.littleEndian?(this.view[t+3]=s>>>24&255,this.view[t+2]=s>>>16&255,this.view[t+1]=s>>>8&255,this.view[t]=255&s,t+=4,this.view[t+3]=r>>>24&255,this.view[t+2]=r>>>16&255,this.view[t+1]=r>>>8&255,this.view[t]=255&r):(this.view[t]=r>>>24&255,this.view[t+1]=r>>>16&255,this.view[t+2]=r>>>8&255,this.view[t+3]=255&r,t+=4,this.view[t]=s>>>24&255,this.view[t+1]=s>>>16&255,this.view[t+2]=s>>>8&255,this.view[t+3]=255&s),i&&(this.offset+=8),this},o.writeUInt64=o.writeUint64,o.readUint64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var i=0,n=0;this.littleEndian?(i=this.view[e+2]<<16,i|=this.view[e+1]<<8,i|=this.view[e],i+=this.view[e+3]<<24>>>0,e+=4,n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0,e+=4,i=this.view[e+1]<<16,i|=this.view[e+2]<<8,i|=this.view[e+3],i+=this.view[e]<<24>>>0);var s=new l(i,n,!0);return t&&(this.offset+=8),s},o.readUInt64=o.readUint64),o.writeFloat32=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var n=this.buffer.byteLength;return n<t&&this.resize((n*=2)>t?n:t),t-=4,s(this.view,e,t,this.littleEndian,23,4),i&&(this.offset+=4),this},o.writeFloat=o.writeFloat32,o.readFloat32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var i=n(this.view,e,this.littleEndian,23,4);return t&&(this.offset+=4),i},o.readFloat=o.readFloat32,o.writeFloat64=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var n=this.buffer.byteLength;return n<t&&this.resize((n*=2)>t?n:t),t-=8,s(this.view,e,t,this.littleEndian,52,8),i&&(this.offset+=8),this},o.writeDouble=o.writeFloat64,o.readFloat64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var i=n(this.view,e,this.littleEndian,52,8);return t&&(this.offset+=8),i},o.readDouble=o.readFloat64,g.MAX_VARINT32_BYTES=5,g.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},g.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},g.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},o.writeVarint32=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var n,s=g.calculateVarint32(e);t+=s;var r=this.buffer.byteLength;for(r<t&&this.resize((r*=2)>t?r:t),t-=s,e>>>=0;128<=e;)n=127&e|128,this.view[t++]=n,e>>>=7;return this.view[t++]=e,i?(this.offset=t,this):s},o.writeVarint32ZigZag=function(e,t){return this.writeVarint32(g.zigZagEncode32(e),t)},o.readVarint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,n=0,s=0;do{if(!this.noAssert&&e>this.limit){var r=Error("Truncated");throw r.truncated=!0,r}i=this.view[e++],n<5&&(s|=(127&i)<<7*n),++n}while(0!=(128&i));return s|=0,t?(this.offset=e,s):{value:s,length:n}},o.readVarint32ZigZag=function(e){var t=this.readVarint32(e);return"object"===(void 0===t?"undefined":f(t))?t.value=g.zigZagDecode32(t.value):t=g.zigZagDecode32(t),t},l&&(g.MAX_VARINT64_BYTES=10,g.calculateVarint64=function(e){"number"==typeof e?e=l.fromNumber(e):"string"==typeof e&&(e=l.fromString(e));var t=e.toInt()>>>0,i=e.shiftRightUnsigned(28).toInt()>>>0,n=e.shiftRightUnsigned(56).toInt()>>>0;return 0==n?0==i?t<16384?t<128?1:2:t<1<<21?3:4:i<16384?i<128?5:6:i<1<<21?7:8:n<128?9:10},g.zigZagEncode64=function(e){return"number"==typeof e?e=l.fromNumber(e,!1):"string"==typeof e?e=l.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftLeft(1).xor(e.shiftRight(63)).toUnsigned()},g.zigZagDecode64=function(e){return"number"==typeof e?e=l.fromNumber(e,!1):"string"==typeof e?e=l.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftRightUnsigned(1).xor(e.and(l.ONE).toSigned().negate()).toSigned()},o.writeVarint64=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"==typeof e)e=l.fromNumber(e);else if("string"==typeof e)e=l.fromString(e);else if(!(e&&e instanceof l))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=l.fromNumber(e,!1):"string"==typeof e?e=l.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned());var n=g.calculateVarint64(e),s=e.toInt()>>>0,r=e.shiftRightUnsigned(28).toInt()>>>0,o=e.shiftRightUnsigned(56).toInt()>>>0;t+=n;var a=this.buffer.byteLength;switch(a<t&&this.resize((a*=2)>t?a:t),t-=n,n){case 10:this.view[t+9]=o>>>7&1;case 9:this.view[t+8]=9!==n?128|o:127&o;case 8:this.view[t+7]=8!==n?r>>>21|128:r>>>21&127;case 7:this.view[t+6]=7!==n?r>>>14|128:r>>>14&127;case 6:this.view[t+5]=6!==n?r>>>7|128:r>>>7&127;case 5:this.view[t+4]=5!==n?128|r:127&r;case 4:this.view[t+3]=4!==n?s>>>21|128:s>>>21&127;case 3:this.view[t+2]=3!==n?s>>>14|128:s>>>14&127;case 2:this.view[t+1]=2!==n?s>>>7|128:s>>>7&127;case 1:this.view[t]=1!==n?128|s:127&s}return i?(this.offset+=n,this):n},o.writeVarint64ZigZag=function(e,t){return this.writeVarint64(g.zigZagEncode64(e),t)},o.readVarint64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i=e,n=0,s=0,r=0,o=0;if(o=this.view[e++],n=127&o,128&o&&(o=this.view[e++],n|=(127&o)<<7,(128&o||this.noAssert&&void 0===o)&&(o=this.view[e++],n|=(127&o)<<14,(128&o||this.noAssert&&void 0===o)&&(o=this.view[e++],n|=(127&o)<<21,(128&o||this.noAssert&&void 0===o)&&(o=this.view[e++],s=127&o,(128&o||this.noAssert&&void 0===o)&&(o=this.view[e++],s|=(127&o)<<7,(128&o||this.noAssert&&void 0===o)&&(o=this.view[e++],s|=(127&o)<<14,(128&o||this.noAssert&&void 0===o)&&(o=this.view[e++],s|=(127&o)<<21,(128&o||this.noAssert&&void 0===o)&&(o=this.view[e++],r=127&o,(128&o||this.noAssert&&void 0===o)&&(o=this.view[e++],r|=(127&o)<<7,128&o||this.noAssert&&void 0===o))))))))))throw Error("Buffer overrun");var a=l.fromBits(n|s<<28,s>>>4|r<<24,!1);return t?(this.offset=e,a):{value:a,length:e-i}},o.readVarint64ZigZag=function(e){var t=this.readVarint64(e);return t&&t.value instanceof l?t.value=g.zigZagDecode64(t.value):t=g.zigZagDecode64(t),t}),o.writeCString=function(e,t){var i=void 0===t;i&&(t=this.offset);var n,s=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(n=0;n<s;++n)if(0===e.charCodeAt(n))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}s=d.calculateUTF16asUTF8(a(e))[1],t+=s+1;var r=this.buffer.byteLength;return r<t&&this.resize((r*=2)>t?r:t),t-=s+1,d.encodeUTF16toUTF8(a(e),function(e){this.view[t++]=e}.bind(this)),this.view[t++]=0,i?(this.offset=t,this):s},o.readCString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i,n=e,s=-1;return d.decodeUTF8toUTF16(function(){if(0===s)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(s=this.view[e++])?null:s}.bind(this),i=h(),!0),t?(this.offset=e,i()):{string:i(),length:e-n}},o.writeIString=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var n,s=t;n=d.calculateUTF16asUTF8(a(e),this.noAssert)[1],t+=4+n;var r=this.buffer.byteLength;if(r<t&&this.resize((r*=2)>t?r:t),t-=4+n,this.littleEndian?(this.view[t+3]=n>>>24&255,this.view[t+2]=n>>>16&255,this.view[t+1]=n>>>8&255,this.view[t]=255&n):(this.view[t]=n>>>24&255,this.view[t+1]=n>>>16&255,this.view[t+2]=n>>>8&255,this.view[t+3]=255&n),t+=4,d.encodeUTF16toUTF8(a(e),function(e){this.view[t++]=e}.bind(this)),t!==s+4+n)throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+4+n));return i?(this.offset=t,this):t-s},o.readIString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var i=e,n=this.readUint32(e),s=this.readUTF8String(n,g.METRICS_BYTES,e+=4);return e+=s.length,t?(this.offset=e,s.string):{string:s.string,length:e-i}},g.METRICS_CHARS="c",g.METRICS_BYTES="b",o.writeUTF8String=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var n,s=t;n=d.calculateUTF16asUTF8(a(e))[1],t+=n;var r=this.buffer.byteLength;return r<t&&this.resize((r*=2)>t?r:t),t-=n,d.encodeUTF16toUTF8(a(e),function(e){this.view[t++]=e}.bind(this)),i?(this.offset=t,this):t-s},o.writeString=o.writeUTF8String,g.calculateUTF8Chars=function(e){return d.calculateUTF16asUTF8(a(e))[0]},g.calculateString=g.calculateUTF8Bytes=function(e){return d.calculateUTF16asUTF8(a(e))[1]},o.readUTF8String=function(e,t,i){"number"==typeof t&&(i=t,t=void 0);var n=void 0===i;if(n&&(i=this.offset),void 0===t&&(t=g.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var s,r=0,o=i;if(t===g.METRICS_CHARS){if(s=h(),d.decodeUTF8(function(){return r<e&&i<this.limit?this.view[i++]:null}.bind(this),function(e){++r,d.UTF8toUTF16(e,s)}),r!==e)throw RangeError("Illegal range: Truncated data, "+r+" == "+e);return n?(this.offset=i,s()):{string:s(),length:i-o}}if(t===g.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+e+") <= "+this.buffer.byteLength)}var a=i+e;if(d.decodeUTF8toUTF16(function(){return i<a?this.view[i++]:null}.bind(this),s=h(),this.noAssert),i!==a)throw RangeError("Illegal range: Truncated data, "+i+" == "+a);return n?(this.offset=i,s()):{string:s(),length:i-o}}throw TypeError("Unsupported metrics: "+t)},o.readString=o.readUTF8String,o.writeVString=function(e,t){var i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var n,s,r=t;n=d.calculateUTF16asUTF8(a(e),this.noAssert)[1],s=g.calculateVarint32(n),t+=s+n;var o=this.buffer.byteLength;if(o<t&&this.resize((o*=2)>t?o:t),t-=s+n,t+=this.writeVarint32(n,t),d.encodeUTF16toUTF8(a(e),function(e){this.view[t++]=e}.bind(this)),t!==r+n+s)throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+n+s));return i?(this.offset=t,this):t-r},o.readVString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i=e,n=this.readVarint32(e),s=this.readUTF8String(n.value,g.METRICS_BYTES,e+=n.length);return e+=s.length,t?(this.offset=e,s.string):{string:s.string,length:e-i}},o.append=function(e,t,i){"number"!=typeof t&&"string"==typeof t||(i=t,t=void 0);var n=void 0===i;if(n&&(i=this.offset),!this.noAssert){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}e instanceof g||(e=g.wrap(e,t));var s=e.limit-e.offset;if(s<=0)return this;i+=s;var r=this.buffer.byteLength;return r<i&&this.resize((r*=2)>i?r:i),i-=s,this.view.set(e.view.subarray(e.offset,e.limit),i),e.offset+=s,n&&(this.offset+=s),this},o.appendTo=function(e,t){return e.append(this,t),this},o.assert=function(e){return this.noAssert=!e,this},o.capacity=function(){return this.buffer.byteLength},o.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},o.clone=function(e){var t=new g(0,this.littleEndian,this.noAssert);return e?(t.buffer=new ArrayBuffer(this.buffer.byteLength),t.view=new Uint8Array(t.buffer)):(t.buffer=this.buffer,t.view=this.view),t.offset=this.offset,t.markedOffset=this.markedOffset,t.limit=this.limit,t},o.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||t<e||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var i=t-e;if(0===i)return this.buffer=r,this.view=null,0<=this.markedOffset&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var n=new ArrayBuffer(i),s=new Uint8Array(n);return s.set(this.view.subarray(e,t)),this.buffer=n,this.view=s,0<=this.markedOffset&&(this.markedOffset-=e),this.offset=0,this.limit=i,this},o.copy=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||t<e||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return new g(0,this.littleEndian,this.noAssert);var i=t-e,n=new g(i,this.littleEndian,this.noAssert);return n.offset=0,n.limit=i,0<=n.markedOffset&&(n.markedOffset-=e),this.copyTo(n,0,e,t),n},o.copyTo=function(e,t,i,n){var s,r;if(!this.noAssert&&!g.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(t=(r=void 0===t)?e.offset:0|t,i=(s=void 0===i)?this.offset:0|i,n=void 0===n?this.limit:0|n,t<0||t>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+t+" <= "+e.buffer.byteLength);if(i<0||n>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+i+" <= "+this.buffer.byteLength);var o=n-i;return 0===o?e:(e.ensureCapacity(t+o),e.view.set(this.view.subarray(i,n),t),s&&(this.offset+=o),r&&(e.offset+=o),this)},o.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},o.fill=function(e,t,i){var n=void 0===t;if(n&&(t=this.offset),"string"==typeof e&&0<e.length&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===i&&(i=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal end: Not an integer");if(i>>>=0,t<0||i<t||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+i+" <= "+this.buffer.byteLength)}if(i<=t)return this;for(;t<i;)this.view[t++]=e;return n&&(this.offset=t),this},o.flip=function(){return this.limit=this.offset,this.offset=0,this},o.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},o.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},o.LE=function(e){return this.littleEndian=void 0===e||!!e,this},o.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},o.prepend=function(e,t,i){"number"!=typeof t&&"string"==typeof t||(i=t,t=void 0);var n=void 0===i;if(n&&(i=this.offset),!this.noAssert){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}e instanceof g||(e=g.wrap(e,t));var s=e.limit-e.offset;if(s<=0)return this;var r=s-i;if(0<r){var o=new ArrayBuffer(this.buffer.byteLength+r),a=new Uint8Array(o);a.set(this.view.subarray(i,this.buffer.byteLength),s),this.buffer=o,this.view=a,this.offset+=r,0<=this.markedOffset&&(this.markedOffset+=r),this.limit+=r,i+=r}else new Uint8Array(this.buffer);return this.view.set(e.view.subarray(e.offset,e.limit),i-s),e.offset=e.limit,n&&(this.offset-=s),this},o.prependTo=function(e,t){return e.prepend(this,t),this},o.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},o.remaining=function(){return this.limit-this.offset},o.reset=function(){return 0<=this.markedOffset?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},o.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e),i=new Uint8Array(t);i.set(this.view),this.buffer=t,this.view=i}return this},o.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||t<e||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t||Array.prototype.reverse.call(this.view.subarray(e,t)),this},o.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},o.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||t<e||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i=this.clone();return i.offset=e,i.limit=t,i},o.toBuffer=function(e){var t=this.offset,i=this.limit;if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,t<0||i<t||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+i+" <= "+this.buffer.byteLength)}if(!e&&0===t&&i===this.buffer.byteLength)return this.buffer;if(t===i)return r;var n=new ArrayBuffer(i-t);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(t,i),0),n},o.toArrayBuffer=o.toBuffer,o.toString=function(e,t,i){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(i=t=e="utf8"),e){case"utf8":return this.toUTF8(t,i);case"base64":return this.toBase64(t,i);case"hex":return this.toHex(t,i);case"binary":return this.toBinary(t,i);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var c=function(){for(var e={},s=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],o=[],t=0,i=s.length;t<i;++t)o[s[t]]=t;return e.encode=function(e,t){for(var i,n;null!==(i=e());)t(s[i>>2&63]),n=(3&i)<<4,null!==(i=e())?(t(s[63&((n|=i>>4&15)|i>>4&15)]),n=(15&i)<<2,null!==(i=e())?(t(s[63&(n|i>>6&3)]),t(s[63&i])):(t(s[63&n]),t(61))):(t(s[63&n]),t(61),t(61))},e.decode=function(e,t){function i(e){throw Error("Illegal character code: "+e)}for(var n,s,r;null!==(n=e());)if(void 0===(s=o[n])&&i(n),null!==(n=e())&&(void 0===(r=o[n])&&i(n),t(s<<2>>>0|(48&r)>>4),null!==(n=e()))){if(void 0===(s=o[n])){if(61===n)break;i(n)}if(t((15&r)<<4>>>0|(60&s)>>2),null!==(n=e())){if(void 0===(r=o[n])){if(61===n)break;i(n)}t((3&s)<<6>>>0|r)}}},e.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},e}();o.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||t<e)throw RangeError("begin, end");var i;return c.encode(function(){return e<t?this.view[e++]:null}.bind(this),i=h()),i()},g.fromBase64=function(e,t){if("string"!=typeof e)throw TypeError("str");var i=new g(e.length/4*3,t),n=0;return c.decode(a(e),function(e){i.view[n++]=e}),i.limit=n,i},g.btoa=function(e){return g.fromBinary(e).toBase64()},g.atob=function(e){return g.fromBase64(e).toBinary()},o.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||t<e)throw RangeError("begin, end");if(e===t)return"";for(var i=[],n=[];e<t;)i.push(this.view[e++]),1024<=i.length&&(n.push(String.fromCharCode.apply(String,i)),i=[]);return n.join("")+String.fromCharCode.apply(String,i)},g.fromBinary=function(e,t){if("string"!=typeof e)throw TypeError("str");for(var i,n=0,s=e.length,r=new g(s,t);n<s;){if(255<(i=e.charCodeAt(n)))throw RangeError("illegal char code: "+i);r.view[n++]=i}return r.limit=s,r},o.toDebug=function(e){for(var t,i=-1,n=this.buffer.byteLength,s="",r="",o="";i<n;){if(-1!==i&&(s+=(t=this.view[i])<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(r+=32<t&&t<127?String.fromCharCode(t):".")),++i,e&&0<i&&i%16==0&&i!==n){for(;s.length<51;)s+=" ";o+=s+r+"\n",s=r=""}i===this.offset&&i===this.limit?s+=i===this.markedOffset?"!":"|":i===this.offset?s+=i===this.markedOffset?"[":"<":i===this.limit?s+=i===this.markedOffset?"]":">":s+=i===this.markedOffset?"'":e||0!==i&&i!==n?" ":""}if(e&&" "!==s){for(;s.length<51;)s+=" ";o+=s+r+"\n"}return e?o:s},g.fromDebug=function(e,t,i){for(var n,s,r=e.length,o=new g((r+1)/3|0,t,i),a=0,l=0,h=!1,c=!1,u=!1,d=!1,f=!1;a<r;){switch(n=e.charAt(a++)){case"!":if(!i){if(c||u||d){f=!0;break}c=u=d=!0}o.offset=o.markedOffset=o.limit=l,h=!1;break;case"|":if(!i){if(c||d){f=!0;break}c=d=!0}o.offset=o.limit=l,h=!1;break;case"[":if(!i){if(c||u){f=!0;break}c=u=!0}o.offset=o.markedOffset=l,h=!1;break;case"<":if(!i){if(c){f=!0;break}c=!0}o.offset=l,h=!1;break;case"]":if(!i){if(d||u){f=!0;break}d=u=!0}o.limit=o.markedOffset=l,h=!1;break;case">":if(!i){if(d){f=!0;break}d=!0}o.limit=l,h=!1;break;case"'":if(!i){if(u){f=!0;break}u=!0}o.markedOffset=l,h=!1;break;case" ":h=!1;break;default:if(!i&&h){f=!0;break}if(s=parseInt(n+e.charAt(a++),16),!i&&(isNaN(s)||s<0||255<s))throw TypeError("Illegal str: Not a debug encoded string");o.view[l++]=s,h=!0}if(f)throw TypeError("Illegal str: Invalid symbol at "+a)}if(!i){if(!c||!d)throw TypeError("Illegal str: Missing offset or limit");if(l<o.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+l+" < "+r)}return o},o.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||t<e||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var i,n=new Array(t-e);e<t;)(i=this.view[e++])<16?n.push("0",i.toString(16)):n.push(i.toString(16));return n.join("")},g.fromHex=function(e,t,i){if(!i){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var n,s=e.length,r=new g(s/2|0,t),o=0,a=0;o<s;o+=2){if(n=parseInt(e.substring(o,o+2),16),!i&&(!isFinite(n)||n<0||255<n))throw TypeError("Illegal str: Contains non-hex characters");r.view[a++]=n}return r.limit=a,r};var u,d=u={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var i=null;for("number"==typeof e&&(i=e,e=function(){return null});null!==i||null!==(i=e());)i<128?t(127&i):(i<2048?t(i>>6&31|192):(i<65536?t(i>>12&15|224):(t(i>>18&7|240),t(i>>12&63|128)),t(i>>6&63|128)),t(63&i|128)),i=null},decodeUTF8:function(e,t){for(var i,n,s,r,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(i=e());)if(0==(128&i))t(i);else if(192==(224&i))null===(n=e())&&o([i,n]),t((31&i)<<6|63&n);else if(224==(240&i))(null===(n=e())||null===(s=e()))&&o([i,n,s]),t((15&i)<<12|(63&n)<<6|63&s);else{if(240!=(248&i))throw RangeError("Illegal starting byte: "+i);(null===(n=e())||null===(s=e())||null===(r=e()))&&o([i,n,s,r]),t((7&i)<<18|(63&n)<<12|(63&s)<<6|63&r)}},UTF16toUTF8:function(e,t){for(var i,n=null;null!==(i=null!==n?n:e());)55296<=i&&i<=57343&&null!==(n=e())&&56320<=n&&n<=57343?(t(1024*(i-55296)+n-56320+65536),n=null):t(i);null!==n&&t(n)},UTF8toUTF16:function(e,t){var i=null;for("number"==typeof e&&(i=e,e=function(){return null});null!==i||null!==(i=e());)i<=65535?t(i):(t(55296+((i-=65536)>>10)),t(i%1024+56320)),i=null},encodeUTF16toUTF8:function(e,t){u.UTF16toUTF8(e,function(e){u.encodeUTF8(e,t)})},decodeUTF8toUTF16:function(e,t){u.decodeUTF8(e,function(e){u.UTF8toUTF16(e,t)})},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,i=0;null!==(t=e());)i+=t<128?1:t<2048?2:t<65536?3:4;return i},calculateUTF16asUTF8:function(e){var t=0,i=0;return u.UTF16toUTF8(e,function(e){++t,i+=e<128?1:e<2048?2:e<65536?3:4}),[t,i]}};return o.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||t<e||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t);return d.decodeUTF8toUTF16(function(){return e<t?this.view[e++]:null}.bind(this),i=h()),i()},g.fromUTF8=function(e,t,i){if(!i&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var n=new g(d.calculateUTF16asUTF8(a(e),!0)[1],t,i),s=0;return d.encodeUTF16toUTF8(a(e),function(e){n.view[s++]=e}),n.limit=s,n},g}(n)},{"./long":84}],84:[function(e,t,i){t.exports=function(){function n(e,t,i){this.low=0|e,this.high=0|t,this.unsigned=!!i}function f(e){return!0===(e&&e.__isLong__)}function e(e,t){var i,n,s;return t?(s=0<=(e>>>=0)&&e<256)&&(n=o[e])?n:(i=_(e,(0|e)<0?-1:0,!0),s&&(o[e]=i),i):(s=-128<=(e|=0)&&e<128)&&(n=r[e])?n:(i=_(e,e<0?-1:0,!1),s&&(r[e]=i),i)}function g(e,t){if(isNaN(e)||!isFinite(e))return t?l:b;if(t){if(e<0)return l;if(s<=e)return S}else{if(e<=-a)return E;if(a<=e+1)return y}return e<0?g(-e,t).neg():_(e%i|0,e/i|0,t)}function _(e,t,i){return new n(e,t,i)}function c(e,t,i){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return b;if("number"==typeof t?(i=t,t=!1):t=!!t,(i=i||10)<2||36<i)throw RangeError("radix");var n;if(0<(n=e.indexOf("-")))throw Error("interior hyphen");if(0===n)return c(e.substring(1),t,i).neg();for(var s=g(u(i,8)),r=b,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),l=parseInt(e.substring(o,o+a),i);if(a<8){var h=g(u(i,a));r=r.mul(h).add(g(l))}else r=(r=r.mul(s)).add(g(l))}return r.unsigned=t,r}function p(e){return e instanceof n?e:"number"==typeof e?g(e):"string"==typeof e?c(e):_(e.low,e.high,e.unsigned)}Object.defineProperty(n.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),n.isLong=f;var r={},o={};n.fromInt=e,n.fromNumber=g,n.fromBits=_;var u=Math.pow;n.fromString=c,n.fromValue=p;var i=4294967296,s=i*i,a=s/2,m=e(1<<24),b=e(0);n.ZERO=b;var l=e(0,!0);n.UZERO=l;var h=e(1);n.ONE=h;var d=e(1,!0);n.UONE=d;var v=e(-1);n.NEG_ONE=v;var y=_(-1,2147483647,!1);n.MAX_VALUE=y;var S=_(-1,-1,!0);n.MAX_UNSIGNED_VALUE=S;var E=_(0,-2147483648,!1);n.MIN_VALUE=E;var t=n.prototype;return t.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.toNumber=function(){return this.unsigned?(this.high>>>0)*i+(this.low>>>0):this.high*i+(this.low>>>0)},t.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var t=g(e),i=this.div(t),n=i.mul(t).sub(this);return i.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=g(u(e,6),this.unsigned),r=this,o="";;){var a=r.div(s),l=(r.sub(a.mul(s)).toInt()>>>0).toString(e);if((r=a).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},t.getHighBits=function(){return this.high},t.getHighBitsUnsigned=function(){return this.high>>>0},t.getLowBits=function(){return this.low},t.getLowBitsUnsigned=function(){return this.low>>>0},t.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},t.isZero=function(){return 0===this.high&&0===this.low},t.isNegative=function(){return!this.unsigned&&this.high<0},t.isPositive=function(){return this.unsigned||0<=this.high},t.isOdd=function(){return 1==(1&this.low)},t.isEven=function(){return 0==(1&this.low)},t.equals=function(e){return f(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},t.eq=t.equals,t.notEquals=function(e){return!this.eq(e)},t.neq=t.notEquals,t.lessThan=function(e){return this.comp(e)<0},t.lt=t.lessThan,t.lessThanOrEqual=function(e){return this.comp(e)<=0},t.lte=t.lessThanOrEqual,t.greaterThan=function(e){return 0<this.comp(e)},t.gt=t.greaterThan,t.greaterThanOrEqual=function(e){return 0<=this.comp(e)},t.gte=t.greaterThanOrEqual,t.compare=function(e){if(f(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.comp=t.compare,t.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(h)},t.neg=t.negate,t.add=function(e){f(e)||(e=p(e));var t=this.high>>>16,i=65535&this.high,n=this.low>>>16,s=65535&this.low,r=e.high>>>16,o=65535&e.high,a=e.low>>>16,l=0,h=0,c=0,u=0;return u+=s+(65535&e.low),c+=u>>>16,h+=(c+=n+a)>>>16,l+=(h+=i+o)>>>16,l+=t+r,_((c&=65535)<<16|(u&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},t.subtract=function(e){return f(e)||(e=p(e)),this.add(e.neg())},t.sub=t.subtract,t.multiply=function(e){if(this.isZero())return b;if(f(e)||(e=p(e)),e.isZero())return b;if(this.eq(E))return e.isOdd()?E:b;if(e.eq(E))return this.isOdd()?E:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return g(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,i=65535&this.high,n=this.low>>>16,s=65535&this.low,r=e.high>>>16,o=65535&e.high,a=e.low>>>16,l=65535&e.low,h=0,c=0,u=0,d=0;return u+=(d+=s*l)>>>16,c+=(u+=n*l)>>>16,u&=65535,c+=(u+=s*a)>>>16,h+=(c+=i*l)>>>16,c&=65535,h+=(c+=n*a)>>>16,c&=65535,h+=(c+=s*o)>>>16,h+=t*l+i*a+n*o+s*r,_((u&=65535)<<16|(d&=65535),(h&=65535)<<16|(c&=65535),this.unsigned)},t.mul=t.multiply,t.divide=function(e){if(f(e)||(e=p(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?l:b;var t,i,n;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return l;if(e.gt(this.shru(1)))return d;n=l}else{if(this.eq(E))return e.eq(h)||e.eq(v)?E:e.eq(E)?h:(t=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?h:v:(i=this.sub(e.mul(t)),n=t.add(i.div(e)));if(e.eq(E))return this.unsigned?l:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=b}for(i=this;i.gte(e);){t=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),r=s<=48?1:u(2,s-48),o=g(t),a=o.mul(e);a.isNegative()||a.gt(i);)a=(o=g(t-=r,this.unsigned)).mul(e);o.isZero()&&(o=h),n=n.add(o),i=i.sub(a)}return n},t.div=t.divide,t.modulo=function(e){return f(e)||(e=p(e)),this.sub(this.div(e).mul(e))},t.mod=t.modulo,t.not=function(){return _(~this.low,~this.high,this.unsigned)},t.and=function(e){return f(e)||(e=p(e)),_(this.low&e.low,this.high&e.high,this.unsigned)},t.or=function(e){return f(e)||(e=p(e)),_(this.low|e.low,this.high|e.high,this.unsigned)},t.xor=function(e){return f(e)||(e=p(e)),_(this.low^e.low,this.high^e.high,this.unsigned)},t.shiftLeft=function(e){return f(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?_(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):_(0,this.low<<e-32,this.unsigned)},t.shl=t.shiftLeft,t.shiftRight=function(e){return f(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?_(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):_(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},t.shr=t.shiftRight,t.shiftRightUnsigned=function(e){if(f(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?_(this.low>>>e|t<<32-e,t>>>e,this.unsigned):_(32===e?t:t>>>e-32,0,this.unsigned)},t.shru=t.shiftRightUnsigned,t.toSigned=function(){return this.unsigned?_(this.low,this.high,!1):this},t.toUnsigned=function(){return this.unsigned?this:_(this.low,this.high,!0)},t.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},t.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},t.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},n}()},{}],85:[function(e,t,i){var y,n,o,s,a,l,r,S="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)},h=e("./bytebuffer");b8e.proto.ByteBuffer=h,t.exports=((n={}).ByteBuffer=y=h,n.Long=y.Long||null,n.VERSION="5.0.3",n.WIRE_TYPES={},n.WIRE_TYPES.VARINT=0,n.WIRE_TYPES.BITS64=1,n.WIRE_TYPES.LDELIM=2,n.WIRE_TYPES.STARTGROUP=3,n.WIRE_TYPES.ENDGROUP=4,n.WIRE_TYPES.BITS32=5,n.PACKABLE_WIRE_TYPES=[n.WIRE_TYPES.VARINT,n.WIRE_TYPES.BITS64,n.WIRE_TYPES.BITS32],n.TYPES={int32:{name:"int32",wireType:n.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:n.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:n.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:n.WIRE_TYPES.VARINT,defaultValue:0},uint64:{name:"uint64",wireType:n.WIRE_TYPES.VARINT,defaultValue:0},sint64:{name:"sint64",wireType:n.WIRE_TYPES.VARINT,defaultValue:0},bool:{name:"bool",wireType:n.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:n.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:n.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:n.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:n.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:n.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:n.WIRE_TYPES.BITS64,defaultValue:0},sfixed64:{name:"sfixed64",wireType:n.WIRE_TYPES.BITS64,defaultValue:0},float:{name:"float",wireType:n.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:n.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:n.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:n.WIRE_TYPES.STARTGROUP,defaultValue:null}},n.MAP_KEY_TYPES=[n.TYPES.int32,n.TYPES.sint32,n.TYPES.sfixed32,n.TYPES.uint32,n.TYPES.fixed32,n.TYPES.int64,n.TYPES.sint64,n.TYPES.sfixed64,n.TYPES.uint64,n.TYPES.fixed64,n.TYPES.bool,n.TYPES.string,n.TYPES.bytes],n.ID_MIN=1,n.ID_MAX=536870911,n.convertFieldsToCamelCase=!0,n.populateAccessors=!0,n.populateDefaults=!0,n.Util={toCamelCase:function(e){return e.replace(/_([a-zA-Z])/g,function(e,t){return t.toUpperCase()})}},n.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,FQTYPEREF:/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},n.DotProto=function(s,o){function a(e,t){var i=-1,n=1;if("-"==e.charAt(0)&&(n=-1,e=e.substring(1)),o.NUMBER_DEC.test(e))i=parseInt(e);else if(o.NUMBER_HEX.test(e))i=parseInt(e.substring(2),16);else{if(!o.NUMBER_OCT.test(e))throw Error("illegal id value: "+(n<0?"-":"")+e);i=parseInt(e.substring(1),8)}if(i=n*i|0,!t&&i<0)throw Error("illegal id value: "+(n<0?"-":"")+e);return i}function r(e){var t=1;if("-"==e.charAt(0)&&(t=-1,e=e.substring(1)),o.NUMBER_DEC.test(e))return t*parseInt(e,10);if(o.NUMBER_HEX.test(e))return t*parseInt(e.substring(2),16);if(o.NUMBER_OCT.test(e))return t*parseInt(e.substring(1),8);if("inf"===e)return t*(1/0);if("nan"===e)return NaN;if(o.NUMBER_FLT.test(e))return t*parseFloat(e);throw Error("illegal number value: "+(t<0?"-":"")+e)}function n(e,t,i){void 0===e[t]?e[t]=i:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(i))}var e={},t=function(e){this.source=e+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},i=t.prototype;i._readString=function(){var e='"'===this._stringOpen?o.STRING_DQ:o.STRING_SQ;e.lastIndex=this.index-1;var t=e.exec(this.source);if(!t)throw Error("unterminated string");return this.index=e.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,t[1]},i.next=function(){if(0<this.stack.length)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();var e,t,i;do{for(e=!1;o.WHITESPACE.test(i=this.source.charAt(this.index));)if("\n"===i&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if("*"!==(i=this.source.charAt(this.index)))return"/";do{if("\n"===i&&++this.line,++this.index===this.source.length)return null;t=i,i=this.source.charAt(this.index)}while("*"!==t||"/"!==i);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;var n=this.index;if(o.DELIM.lastIndex=0,!o.DELIM.test(this.source.charAt(n++)))for(;n<this.source.length&&!o.DELIM.test(this.source.charAt(n));)++n;var s=this.source.substring(this.index,this.index=n);return'"'!==s&&"'"!==s||(this._stringOpen=s),s},i.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},i.skip=function(e){var t=this.next();if(t!==e)throw Error("illegal '"+t+"', '"+e+"' expected")},i.omit=function(e){return this.peek()===e&&(this.next(),!0)},i.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},e.Tokenizer=t;var l=function(e){this.tn=new t(e),this.proto3=!1},h=l.prototype;return h.parse=function(){for(var e,t,i={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},n=!0;e=this.tn.next();)switch(e){case"package":if(!n||null!==i.package)throw Error("unexpected 'package'");if(e=this.tn.next(),!o.TYPEREF.test(e))throw Error("illegal package name: "+e);this.tn.skip(";"),i.package=e;break;case"import":if(!n)throw Error("unexpected 'import'");("public"===(e=this.tn.peek())||(t="weak"===e))&&this.tn.next(),e=this._readString(),this.tn.skip(";"),t||i.imports.push(e);break;case"syntax":if(!n)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(i.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(i,null),n=!1;break;case"enum":this._parseEnum(i),n=!1;break;case"option":this._parseOption(i);break;case"service":this._parseService(i);break;case"extend":this._parseExtend(i);break;default:throw Error("unexpected "+this.tn.line+": '"+e+"'")}return delete i.name,i},l.parse=function(e){return new l(e).parse()},h._readString=function(){var e,t,i="";do{if("'"!==(t=this.tn.next())&&'"'!==t)throw Error("illegal string delimiter: "+t);i+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while('"'===e||'"'===e);return i},h._readValue=function(e){var t=this.tn.peek();if('"'===t||"'"===t)return this._readString();if(this.tn.next(),o.NUMBER.test(t))return r(t);if(o.BOOL.test(t))return"true"===t.toLowerCase();if(e&&o.TYPEREF.test(t))return t;throw Error("illegal value: "+t)},h._parseOption=function(e,t){var i=this.tn.next(),n=!1;if("("===i&&(n=!0,i=this.tn.next()),!o.TYPEREF.test(i))throw Error("illegal option name: "+i);var s=i;n&&(this.tn.skip(")"),s="("+s+")",i=this.tn.peek(),o.FQTYPEREF.test(i)&&(s+=i,this.tn.next())),this.tn.skip("="),this._parseOptionValue(e,s),t||this.tn.skip(";")},h._parseOptionValue=function(e,t){var i=this.tn.peek();if("{"!==i)n(e.options,t,this._readValue(!0));else for(this.tn.skip("{");"}"!==(i=this.tn.next());){if(!o.NAME.test(i))throw Error("illegal option name: "+t+"."+i);this.tn.omit(":")?n(e.options,t+"."+i,this._readValue(!0)):this._parseOptionValue(e,t+"."+i)}},h._parseService=function(e){var t=this.tn.next();if(!o.NAME.test(t))throw Error("illegal service name at line "+this.tn.line+": "+t);var i={name:t,rpc:{},options:{}};for(this.tn.skip("{");"}"!==(t=this.tn.next());)if("option"===t)this._parseOption(i);else{if("rpc"!==t)throw Error("illegal service token: "+t);this._parseServiceRPC(i)}this.tn.omit(";"),e.services.push(i)},h._parseServiceRPC=function(e){var t=this.tn.next();if(!o.NAME.test(t))throw Error("illegal rpc service method name: "+t);var i=t,n={request:null,response:null,request_stream:!1,response_stream:!1,options:{}};if(this.tn.skip("("),"stream"===(t=this.tn.next()).toLowerCase()&&(n.request_stream=!0,t=this.tn.next()),!o.TYPEREF.test(t))throw Error("illegal rpc service request type: "+t);if(n.request=t,this.tn.skip(")"),"returns"!==(t=this.tn.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+t);if(this.tn.skip("("),"stream"===(t=this.tn.next()).toLowerCase()&&(n.response_stream=!0,t=this.tn.next()),n.response=t,this.tn.skip(")"),"{"===(t=this.tn.peek())){for(this.tn.next();"}"!==(t=this.tn.next());){if("option"!==t)throw Error("illegal rpc service token: "+t);this._parseOption(n)}this.tn.omit(";")}else this.tn.skip(";");void 0===e.rpc&&(e.rpc={}),e.rpc[i]=n},h._parseMessage=function(e,t){var i=!!t,n=this.tn.next(),s={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!o.NAME.test(n))throw Error("illegal "+(i?"group":"message")+" name: "+n);for(s.name=n,i&&(this.tn.skip("="),t.id=a(this.tn.next()),s.isGroup=!0),"["===(n=this.tn.peek())&&t&&this._parseFieldOptions(t),this.tn.skip("{");"}"!==(n=this.tn.next());)if(o.RULE.test(n))this._parseMessageField(s,n);else if("oneof"===n)this._parseMessageOneOf(s);else if("enum"===n)this._parseEnum(s);else if("message"===n)this._parseMessage(s);else if("option"===n)this._parseOption(s);else if("service"===n)this._parseService(s);else if("extensions"===n)s.hasOwnProperty("extensions")?s.extensions=s.extensions.concat(this._parseExtensionRanges()):s.extensions=this._parseExtensionRanges();else if("reserved"===n)this._parseIgnored();else if("extend"===n)this._parseExtend(s);else{if(!o.TYPEREF.test(n))throw Error("illegal message token: "+n);if(!this.proto3)throw Error("illegal field rule: "+n);this._parseMessageField(s,"optional",n)}return this.tn.omit(";"),e.messages.push(s),s},h._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},h._parseMessageField=function(e,t,i){if(!o.RULE.test(t))throw Error("illegal message field rule: "+t);var n,s={rule:t,type:"",name:"",options:{},id:0};if("map"===t){if(i)throw Error("illegal type: "+i);if(this.tn.skip("<"),n=this.tn.next(),!o.TYPE.test(n)&&!o.TYPEREF.test(n))throw Error("illegal message field type: "+n);if(s.keytype=n,this.tn.skip(","),n=this.tn.next(),!o.TYPE.test(n)&&!o.TYPEREF.test(n))throw Error("illegal message field: "+n);if(s.type=n,this.tn.skip(">"),n=this.tn.next(),!o.NAME.test(n))throw Error("illegal message field name: "+n);s.name=n,this.tn.skip("="),s.id=a(this.tn.next()),"["===(n=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(";")}else if("group"===(i=void 0!==i?i:this.tn.next())){var r=this._parseMessage(e,s);if(!/^[A-Z]/.test(r.name))throw Error("illegal group name: "+r.name);s.type=r.name,s.name=r.name.toLowerCase(),this.tn.omit(";")}else{if(!o.TYPE.test(i)&&!o.TYPEREF.test(i))throw Error("illegal message field type: "+i);if(s.type=i,n=this.tn.next(),!o.NAME.test(n))throw Error("illegal message field name: "+n);s.name=n,this.tn.skip("="),s.id=a(this.tn.next()),"["===(n=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(";")}return e.fields.push(s),s},h._parseMessageOneOf=function(e){var t=this.tn.next();if(!o.NAME.test(t))throw Error("illegal oneof name: "+t);var i,n=t,s=[];for(this.tn.skip("{");"}"!==(t=this.tn.next());)(i=this._parseMessageField(e,"optional",t)).oneof=n,s.push(i.id);this.tn.omit(";"),e.oneofs[n]=s},h._parseFieldOptions=function(e){this.tn.skip("[");for(var t=!0;"]"!==this.tn.peek();)t||this.tn.skip(","),this._parseOption(e,!0),t=!1;this.tn.next()},h._parseEnum=function(e){var t={name:"",values:[],options:{}},i=this.tn.next();if(!o.NAME.test(i))throw Error("illegal name: "+i);for(t.name=i,this.tn.skip("{");"}"!==(i=this.tn.next());)if("option"===i)this._parseOption(t);else{if(!o.NAME.test(i))throw Error("illegal name: "+i);this.tn.skip("=");var n={name:i,id:a(this.tn.next(),!0)};"["===(i=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),t.values.push(n)}this.tn.omit(";"),e.enums.push(t)},h._parseExtensionRanges=function(){var e,t,i,n=[];do{for(t=[];;){switch(e=this.tn.next()){case"min":i=s.ID_MIN;break;case"max":i=s.ID_MAX;break;default:i=r(e)}if(t.push(i),2===t.length)break;if("to"!==this.tn.peek()){t.push(i);break}this.tn.next()}n.push(t)}while(this.tn.omit(","));return this.tn.skip(";"),n},h._parseExtend=function(e){var t=this.tn.next();if(!o.TYPEREF.test(t))throw Error("illegal extend reference: "+t);var i={ref:t,fields:[]};for(this.tn.skip("{");"}"!==(t=this.tn.next());)if(o.RULE.test(t))this._parseMessageField(i,t);else{if(!o.TYPEREF.test(t))throw Error("illegal extend token: "+t);if(!this.proto3)throw Error("illegal field rule: "+t);this._parseMessageField(i,"optional",t)}return this.tn.omit(";"),e.messages.push(i),i},h.toString=function(){return"Parser at line "+this.tn.line},e.Parser=l,e}(n,n.Lang),n.Reflect=function(_){function p(e,t){var i=t.readVarint32(),n=7&i,s=i>>>3;switch(n){case _.WIRE_TYPES.VARINT:for(;128==(128&(i=t.readUint8())););break;case _.WIRE_TYPES.BITS64:t.offset+=8;break;case _.WIRE_TYPES.LDELIM:i=t.readVarint32(),t.offset+=i;break;case _.WIRE_TYPES.STARTGROUP:p(s,t);break;case _.WIRE_TYPES.ENDGROUP:if(s===e)return!1;throw Error("Illegal GROUPEND after unknown group: "+s+" ("+e+" expected)");case _.WIRE_TYPES.BITS32:t.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+e+": "+n)}return!0}var o={},c=function(e,t,i){this.builder=e,this.parent=t,this.name=i,this.className},e=c.prototype;e.fqn=function(){for(var e=this.name,t=this;null!=(t=t.parent);)e=t.name+"."+e;return e},e.toString=function(e){return(e?this.className+" ":"")+this.fqn()},e.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},o.T=c;var a=function(e,t,i,n,s){c.call(this,e,t,i),this.className="Namespace",this.children=[],this.options=n||{},this.syntax=s||"proto2"},t=a.prototype=Object.create(c.prototype);t.getChildren=function(e){if(null==(e=e||null))return this.children.slice();for(var t=[],i=0,n=this.children.length;i<n;++i)this.children[i]instanceof e&&t.push(this.children[i]);return t},t.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof d.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof d.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},t.getChild=function(e){for(var t="number"==typeof e?"id":"name",i=0,n=this.children.length;i<n;++i)if(this.children[i][t]===e)return this.children[i];return null},t.resolve=function(e,t){var i,n="string"==typeof e?e.split("."):e,s=this,r=0;if(""===n[r]){for(;null!==s.parent;)s=s.parent;r++}do{do{if(!(s instanceof o.Namespace)){s=null;break}if(!(i=s.getChild(n[r]))||!(i instanceof o.T)||t&&!(i instanceof o.Namespace)){s=null;break}s=i,r++}while(r<n.length);if(null!=s)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=s);return s},t.qn=function(e){for(var t=[],i=e;t.unshift(i.name),null!==(i=i.parent););for(var n=1;n<=t.length;n++){var s=t.slice(t.length-n);if(e===this.resolve(s,e instanceof o.Namespace))return s.join(".")}return e.fqn()},t.build=function(){for(var e,t={},i=this.children,n=0,s=i.length;n<s;++n)(e=i[n])instanceof a&&(t[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.buildOpt()}),t},t.buildOpt=function(){for(var e={},t=Object.keys(this.options),i=0,n=t.length;i<n;++i){var s=t[i],r=this.options[t[i]];e[s]=r}return e},t.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},o.Namespace=a;var u=function(e,t,i,n,s){if(this.type=e,this.resolvedType=t,this.isMapKey=i,this.syntax=n,this.name=s,i&&_.MAP_KEY_TYPES.indexOf(e)<0)throw Error("Invalid map key type: "+e.name)},i=u.prototype;u.defaultFieldValue=function(e){if("string"==typeof e&&(e=_.TYPES[e]),void 0===e.defaultValue)throw Error("default value for type "+e.name+" is not supported");return e==_.TYPES.bytes?new y(0):e.defaultValue},i.toString=function(){return(this.name||"")+(this.isMapKey?"map":"value")+" element"},i.verifyValue=function(e){function t(e,t){b8e.warn("Illegal value for "+i.toString(!0)+" of type "+i.type.name+": "+e+" ("+t+")")}var i=this;switch(this.type){case _.TYPES.int32:case _.TYPES.sint32:case _.TYPES.sfixed32:return("number"!=typeof e||e==e&&e%1!=0)&&(t(void 0===e?"undefined":S(e),"not an integer"),e=parseInt(e)),4294967295<e?0|e:e;case _.TYPES.uint32:case _.TYPES.fixed32:return("number"!=typeof e||e==e&&e%1!=0)&&(t(void 0===e?"undefined":S(e),"not an integer"),e=parseInt(e)),e<0?e>>>0:e;case _.TYPES.int64:case _.TYPES.sint64:case _.TYPES.sfixed64:return("number"!=typeof e||e==e&&e%1!=0)&&(t(void 0===e?"undefined":S(e),"not an integer"),e=parseFloat(e)),e;case _.TYPES.uint64:case _.TYPES.fixed64:return("number"!=typeof e||e==e&&e%1!=0)&&(t(void 0===e?"undefined":S(e),"not an integer"),e=parseFloat(e)),e;case _.TYPES.bool:return"boolean"!=typeof e&&t(void 0===e?"undefined":S(e),"not a boolean"),e;case _.TYPES.float:case _.TYPES.double:return"number"!=typeof e&&t(void 0===e?"undefined":S(e),"not a number"),e;case _.TYPES.string:return"string"==typeof e||e&&e instanceof String||t(void 0===e?"undefined":S(e),"not a string"),""+e;case _.TYPES.bytes:return y.isByteBuffer(e)?e:y.wrap(e,"base64");case _.TYPES.enum:var n=this.resolvedType.getChildren(_.Reflect.Enum.Value);for(r=0;r<n.length;r++){if(n[r].name==e)return n[r].id;if(n[r].id==e)return n[r].id}if("proto3"===this.syntax)return("number"!=typeof e||e==e&&e%1!=0)&&(t(void 0===e?"undefined":S(e),"not an integer"),e=parseInt(e)),(4294967295<e||e<0)&&t(void 0===e?"undefined":S(e),"not in range for uint32"),e;t(e,"not a valid enum value");case _.TYPES.group:case _.TYPES.message:if(e&&"object"===(void 0===e?"undefined":S(e))||t(void 0===e?"undefined":S(e),"object expected"),e instanceof this.resolvedType.clazz)return e;if(e instanceof _.Builder.Message){var s={};for(var r in e)e.hasOwnProperty(r)&&(s[r]=e[r]);e=s}return new this.resolvedType.clazz(e)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+e+" (undefined type "+this.type+")")},i.calculateLength=function(e,t){if(null===t)return 0;var i;switch(this.type){case _.TYPES.int32:return t<0?y.calculateVarint64(t):y.calculateVarint32(t);case _.TYPES.uint32:return y.calculateVarint32(t);case _.TYPES.sint32:return y.calculateVarint32(y.zigZagEncode32(t));case _.TYPES.fixed32:case _.TYPES.sfixed32:case _.TYPES.float:return 4;case _.TYPES.int64:case _.TYPES.uint64:return y.calculateVarint64(t);case _.TYPES.sint64:return y.calculateVarint64(y.zigZagEncode64(t));case _.TYPES.fixed64:case _.TYPES.sfixed64:return 8;case _.TYPES.bool:return 1;case _.TYPES.enum:return y.calculateVarint32(t);case _.TYPES.double:return 8;case _.TYPES.string:return i=y.calculateUTF8Bytes(t),y.calculateVarint32(i)+i;case _.TYPES.bytes:if(t.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+t.remaining()+" bytes remaining");return y.calculateVarint32(t.remaining())+t.remaining();case _.TYPES.message:return i=this.resolvedType.calculate(t),y.calculateVarint32(i)+i;case _.TYPES.group:return(i=this.resolvedType.calculate(t))+y.calculateVarint32(e<<3|_.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+t+" (unknown type)")},i.encodeValue=function(e,t,i){if(null===t)return i;switch(this.type){case _.TYPES.int32:t<0?i.writeVarint64(t):i.writeVarint32(t);break;case _.TYPES.uint32:i.writeVarint32(t);break;case _.TYPES.sint32:i.writeVarint32ZigZag(t);break;case _.TYPES.fixed32:i.writeUint32(t);break;case _.TYPES.sfixed32:i.writeInt32(t);break;case _.TYPES.int64:case _.TYPES.uint64:i.writeVarint64(t);break;case _.TYPES.sint64:i.writeVarint64ZigZag(t);break;case _.TYPES.fixed64:i.writeUint64(t);break;case _.TYPES.sfixed64:i.writeInt64(t);break;case _.TYPES.bool:"string"==typeof t?i.writeVarint32("false"===t.toLowerCase()?0:!!t):i.writeVarint32(t?1:0);break;case _.TYPES.enum:i.writeVarint32(t);break;case _.TYPES.float:i.writeFloat32(t);break;case _.TYPES.double:i.writeFloat64(t);break;case _.TYPES.string:i.writeVString(t);break;case _.TYPES.bytes:if(t.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+t.remaining()+" bytes remaining");var n=t.offset;i.writeVarint32(t.remaining()),i.append(t),t.offset=n;break;case _.TYPES.message:var s=(new y).LE();this.resolvedType.encode(t,s),i.writeVarint32(s.offset),i.append(s.flip());break;case _.TYPES.group:this.resolvedType.encode(t,i),i.writeVarint32(e<<3|_.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+t+" (unknown type)")}return i},i.decode=function(e,t,i){if(t!=this.type.wireType)throw Error("Unexpected wire type for element");var n,s;switch(this.type){case _.TYPES.int32:return 0|e.readVarint32();case _.TYPES.uint32:return e.readVarint32()>>>0;case _.TYPES.sint32:return 0|e.readVarint32ZigZag();case _.TYPES.fixed32:return e.readUint32()>>>0;case _.TYPES.sfixed32:return 0|e.readInt32();case _.TYPES.int64:return e.readVarint64().toNumber();case _.TYPES.uint64:return e.readVarint64().toUnsigned().toNumber();case _.TYPES.sint64:return e.readVarint64ZigZag().toNumber();case _.TYPES.fixed64:return e.readUint64().toNumber();case _.TYPES.sfixed64:return e.readInt64().toNumber();case _.TYPES.bool:return!!e.readVarint32();case _.TYPES.enum:return e.readVarint32();case _.TYPES.float:return e.readFloat();case _.TYPES.double:return e.readDouble();case _.TYPES.string:return e.readVString();case _.TYPES.bytes:if(s=e.readVarint32(),e.remaining()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+e.remaining());return(n=e.clone()).limit=n.offset+s,e.offset+=s,n;case _.TYPES.message:return s=e.readVarint32(),this.resolvedType.decode(e,s);case _.TYPES.group:return this.resolvedType.decode(e,-1,i)}throw Error("[INTERNAL] Illegal decode type")},i.valueFromString=function(e){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case _.TYPES.int32:case _.TYPES.sint32:case _.TYPES.sfixed32:case _.TYPES.uint32:case _.TYPES.fixed32:return this.verifyValue(parseInt(e));case _.TYPES.int64:case _.TYPES.sint64:case _.TYPES.sfixed64:case _.TYPES.uint64:case _.TYPES.fixed64:return this.verifyValue(parseFloat(e));case _.TYPES.bool:return"true"===e;case _.TYPES.string:return this.verifyValue(e);case _.TYPES.bytes:return y.fromBinary(e)}},i.valueToString=function(e){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===_.TYPES.bytes?e.toString("binary"):e.toString()},o.Element=u;var d=function(e,t,i,n,s,r){a.call(this,e,t,i,n,r),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!s,this._fields=null,this._fieldsById=null,this._fieldsByName=null},n=d.prototype=Object.create(a.prototype);n.build=function(e){if(this.clazz&&!e)return this.clazz;var t=function(u,a){function d(e,i,n,s){if(null===e||"object"!==(void 0===e?"undefined":S(e))){if(s&&s instanceof u.Reflect.Enum){var t=u.Reflect.Enum.getName(s.object,e);if(null!==t)return t}return e}if(y.isByteBuffer(e))return i?e.toBase64():e.toBuffer();if(u.Long.isLong(e))return n?e.toString():u.Long.fromValue(e);var r;if(Array.isArray(e))return r=[],e.forEach(function(e,t){r[t]=d(e,i,n,s)}),r;if(r={},e instanceof u.Map){for(var o=e.entries(),a=o.next();!a.done;a=o.next())r[e.keyElem.valueToString(a.value[0])]=d(a.value[1],i,n,e.valueElem.resolvedType);return r}var l=e.$type,h=void 0;for(var c in e)e.hasOwnProperty(c)&&(l&&(h=l.getChild(c))?r[c]=d(e[c],i,n,h.resolvedType):r[c]=d(e[c],i,n));return r}var l=a.getChildren(u.Reflect.Message.Field),h=a.getChildren(u.Reflect.Message.OneOf),n=function e(t,i){u.Builder.Message.call(this);for(var n=0,s=h.length;n<s;++n)this[h[n].name]=null;for(n=0,s=l.length;n<s;++n){var r=l[n];this[r.name]=r.repeated?[]:r.map?new u.Map(r):null,!r.required&&"proto3"!==a.syntax||null===r.defaultValue||(this[r.name]=r.defaultValue)}var o;if(0<arguments.length)if(1!==arguments.length||null===t||"object"!==(void 0===t?"undefined":S(t))||!("function"!=typeof t.encode||t instanceof e)||Array.isArray(t)||t instanceof u.Map||y.isByteBuffer(t)||t instanceof ArrayBuffer||u.Long&&t instanceof u.Long)for(n=0,s=arguments.length;n<s;++n)void 0!==(o=arguments[n])&&this.$set(l[n].name,o);else this.$set(t)},r=n.prototype=Object.create(u.Builder.Message.prototype);r.add=function(e,t,i){var n=a._fieldsByName[e];if(!i){if(!n)throw Error(this+"#"+e+" is undefined");if(!(n instanceof u.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+n.toString(!0));if(!n.repeated)throw Error(this+"#"+e+" is not a repeated field");t=n.verifyValue(t,!0)}return null===this[e]&&(this[e]=[]),this[e].push(t),this},r.$add=r.add,r.set=function(e,t,i){if(e&&"object"===(void 0===e?"undefined":S(e))){for(var n in i=t,e)e.hasOwnProperty(n)&&void 0!==(t=e[n])&&void 0===a._oneofsByName[n]&&this.$set(n,t,i);return this}var s=a._fieldsByName[e];if(i)this[e]=t;else{if(!s)throw Error(this+"#"+e+" is not a field: undefined");if(!(s instanceof u.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+s.toString(!0));this[s.name]=t=s.verifyValue(t)}if(s&&s.oneof){var r=this[s.oneof.name];null!==t?(null!==r&&r!==s.name&&(this[r]=null),this[s.oneof.name]=s.name):r===e&&(this[s.oneof.name]=null)}return this},r.$set=r.set,r.get=function(e,t){if(t)return this[e];var i=a._fieldsByName[e];if(!(i&&i instanceof u.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: undefined");if(!(i instanceof u.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+i.toString(!0));return this[i.name]},r.$get=r.get;for(var e=0;e<l.length;e++){var t=l[e];t instanceof u.Reflect.Message.ExtensionField||a.builder.options.populateAccessors&&function(i){var e=i.originalName.replace(/(_[a-zA-Z])/g,function(e){return e.toUpperCase().replace("_","")});e=e.substring(0,1).toUpperCase()+e.substring(1);var t=i.originalName.replace(/([A-Z])/g,function(e){return"_"+e}),n=function(e,t){return this[i.name]=t?e:i.verifyValue(e),this},s=function(){return this[i.name]};null===a.getChild("set"+e)&&(r["set"+e]=n),null===a.getChild("set_"+t)&&(r["set_"+t]=n),null===a.getChild("get"+e)&&(r["get"+e]=s),null===a.getChild("get_"+t)&&(r["get_"+t]=s)}(t)}return r.encode=function(e,t){"boolean"==typeof e&&(t=e,e=void 0);var i=!1;e||(e=new y,i=!0);var n=e.littleEndian;return a.encode(this,e.LE(),t),(i?e.flip():e).LE(n)},n.encode=function(e,t,i){return new n(e).encode(t,i)},r.calculate=function(){return a.calculate(this)},r.encodeDelimited=function(e,t){var i=!1;e||(e=new y,i=!0);var n=(new y).LE();return a.encode(this,n,t).flip(),e.writeVarint32(n.remaining()),e.append(n),i?e.flip():e},r.encodeAB=function(){return this.encode().toArrayBuffer()},r.toArrayBuffer=r.encodeAB,r.encodeNB=function(){return this.encode().toBuffer()},r.toBuffer=r.encodeNB,r.encode64=function(){return this.encode().toBase64()},r.toBase64=r.encode64,r.encodeHex=function(){return this.encode().toHex()},r.toHex=r.encodeHex,r.toRaw=function(e,t){return d(this,!!e,!!t,this.$type)},r.encodeJSON=function(){return JSON.stringify(d(this,!0,!0,this.$type))},n.decode=function(e,t,i){"string"==typeof t&&(i=t,t=-1),"string"==typeof e?e=y.wrap(e,i||"base64"):y.isByteBuffer(e)||(e=y.wrap(e));var n=e.littleEndian,s=a.decode(e.LE(),t);return e.LE(n),s},n.decodeDelimited=function(e,t){if("string"==typeof e?e=y.wrap(e,t||"base64"):y.isByteBuffer(e)||(e=y.wrap(e)),e.remaining()<1)return null;var i=e.offset,n=e.readVarint32();if(e.remaining()<n)return e.offset=i,null;var s=a.decode(e.slice(e.offset,e.offset+n).LE());return e.offset+=n,s},n.decode64=function(e){return n.decode(e,"base64")},n.decodeHex=function(e){return n.decode(e,"hex")},n.decodeJSON=function(e){return new n(JSON.parse(e))},r.toString=function(){return a.toString()},Object.defineProperty&&(Object.defineProperty(n,"$options",{value:a.buildOpt()}),Object.defineProperty(r,"$options",{value:n.$options}),Object.defineProperty(n,"$type",{value:a}),Object.defineProperty(r,"$type",{value:a})),n}(_,this);this._fields=[],this._fieldsById={},this._fieldsByName={},this._oneofsByName={};for(var i,n=0,s=this.children.length;n<s;n++)if((i=this.children[n])instanceof h||i instanceof d||i instanceof m){if(t.hasOwnProperty(i.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+i.toString(!0)+" cannot override static property '"+i.name+"'");t[i.name]=i.build()}else if(i instanceof d.Field)i.build(),this._fields.push(i),this._fieldsById[i.id]=i,this._fieldsByName[i.name]=i;else if(i instanceof d.OneOf)this._oneofsByName[i.name]=i;else if(!(i instanceof d.OneOf||i instanceof g))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[n].toString(!0));return this.clazz=t},n.encode=function(e,t,i){for(var n,s,r=null,o=0,a=this._fields.length;o<a;++o)s=e[(n=this._fields[o]).name],n.required&&null===s?null===r&&(r=n):n.encode(i?s:n.verifyValue(s),t,e);if(null!==r){var l=Error("Missing at least one required field for "+this.toString(!0)+": "+r);throw l.encoded=t,l}return t},n.calculate=function(e){for(var t,i,n=0,s=0,r=this._fields.length;s<r;++s){if(t=this._fields[s],i=e[t.name],t.required&&null===i)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);n+=t.calculate(i,e)}return n},n.decode=function(e,t,i){"number"!=typeof t&&(t=-1);for(var n,s,r,o,a=e.offset,l=new this.clazz;e.offset<a+t||-1===t&&0<e.remaining();){if(n=e.readVarint32(),r=n>>>3,(s=7&n)===_.WIRE_TYPES.ENDGROUP){if(r!==i)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+r+" ("+(i?i+" expected":"not a group")+")");break}if(o=this._fieldsById[r]){if(o.repeated&&!o.options.packed)l[o.name].push(o.decode(s,e));else if(o.map){var h=o.decode(s,e);l[o.name].set(h[0],h[1])}else if(l[o.name]=o.decode(s,e),o.oneof){var c=l[o.oneof.name];null!==c&&c!==o.name&&(l[c]=null),l[o.oneof.name]=o.name}}else switch(s){case _.WIRE_TYPES.VARINT:e.readVarint32();break;case _.WIRE_TYPES.BITS32:e.offset+=4;break;case _.WIRE_TYPES.BITS64:e.offset+=8;break;case _.WIRE_TYPES.LDELIM:var u=e.readVarint32();e.offset+=u;break;case _.WIRE_TYPES.STARTGROUP:for(;p(r,e););break;default:throw Error("Illegal wire type for unknown field "+r+" in "+this.toString(!0)+"#decode: "+s)}}for(var d=0,f=this._fields.length;d<f;++d)if(o=this._fields[d],null===l[o.name])if("proto3"===this.syntax)l[o.name]=o.defaultValue;else{if(o.required){var g=Error("Missing at least one required field for "+this.toString(!0)+": "+o.name);throw g.decoded=l,g}_.populateDefaults&&null!==o.defaultValue&&(l[o.name]=o.defaultValue)}return l},o.Message=d;var l=function(e,t,i,n,s,r,o,a,l,h){c.call(this,e,t,r),this.className="Message.Field",this.required="required"===i,this.repeated="repeated"===i,this.map="map"===i,this.keyType=n||null,this.type=s,this.resolvedType=null,this.id=o,this.options=a||{},this.defaultValue=null,this.oneof=l||null,this.syntax=h||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof d.ExtensionField||(this.name=_.Util.toCamelCase(this.name))},s=l.prototype=Object.create(c.prototype);s.build=function(){this.element=new u(this.type,this.resolvedType,!1,this.syntax,this.name),this.map&&(this.keyElement=new u(this.keyType,void 0,!0,this.syntax,this.name)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=u.defaultFieldValue(this.type)},s.verifyValue=function(e,t){function i(e,t){throw Error("Illegal value for "+s.toString(!0)+" of type "+s.type.name+": "+e+" ("+t+")")}t=t||!1;var n,s=this;if(null===e)return this.required&&i(void 0===e?"undefined":S(e),"required"),"proto3"===this.syntax&&this.type!==_.TYPES.message&&i(void 0===e?"undefined":S(e),"proto3 field without field presence cannot be null"),null;if(this.repeated&&!t){Array.isArray(e)||(e=[e]);var r=[];for(n=0;n<e.length;n++)r.push(this.element.verifyValue(e[n]));return r}return this.map&&!t?e instanceof _.Map?e:(e instanceof Object||i(void 0===e?"undefined":S(e),"expected ProtoBuf.Map or raw object for map field"),new _.Map(this,e)):(!this.repeated&&Array.isArray(e)&&i(void 0===e?"undefined":S(e),"no array expected"),this.element.verifyValue(e))},s.encode=function(e,s,t){if(null===this.type||"object"!==S(this.type))throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===e||this.repeated&&0==e.length)return s;var i;if(this.repeated)if(this.options.packed&&0<=_.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)){s.writeVarint32(this.id<<3|_.WIRE_TYPES.LDELIM),s.ensureCapacity(s.offset+=1);var n=s.offset;for(i=0;i<e.length;i++)this.element.encodeValue(this.id,e[i],s);var r=s.offset-n,o=y.calculateVarint32(r);if(1<o){var a=s.slice(n,s.offset);n+=o-1,s.offset=n,s.append(a)}s.writeVarint32(r,n-o)}else for(i=0;i<e.length;i++)s.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e[i],s);else this.map?e.forEach(function(e,t,i){var n=y.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,t)+y.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,e);s.writeVarint32(this.id<<3|_.WIRE_TYPES.LDELIM),s.writeVarint32(n),s.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,t,s),s.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,e,s)},this):(s.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e,s));return s},s.calculate=function(e,t){if(e=this.verifyValue(e),null===this.type||"object"!==S(this.type))throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===e||this.repeated&&0==e.length)return 0;var i,n,s=0;if(this.repeated)if(this.options.packed&&0<=_.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)){for(s+=y.calculateVarint32(this.id<<3|_.WIRE_TYPES.LDELIM),i=n=0;i<e.length;i++)n+=this.element.calculateLength(this.id,e[i]);s+=y.calculateVarint32(n),s+=n}else for(i=0;i<e.length;i++)s+=y.calculateVarint32(this.id<<3|this.type.wireType),s+=this.element.calculateLength(this.id,e[i]);else this.map?e.forEach(function(e,t,i){var n=y.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,t)+y.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,e);s+=y.calculateVarint32(this.id<<3|_.WIRE_TYPES.LDELIM),s+=y.calculateVarint32(n),s+=n},this):(s+=y.calculateVarint32(this.id<<3|this.type.wireType),s+=this.element.calculateLength(this.id,e));return s},s.decode=function(e,t,i){var n,s;if(!(!this.map&&e==this.type.wireType||!i&&this.repeated&&this.options.packed&&e==_.WIRE_TYPES.LDELIM||this.map&&e==_.WIRE_TYPES.LDELIM))throw Error("Illegal wire type for field "+this.toString(!0)+": "+e+" ("+this.type.wireType+" expected)");if(e==_.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&0<=_.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)&&!i){s=t.readVarint32(),s=t.offset+s;for(var r=[];t.offset<s;)r.push(this.decode(this.type.wireType,t,!0));return r}if(this.map){var o=u.defaultFieldValue(this.keyType);if(n=u.defaultFieldValue(this.type),s=t.readVarint32(),t.remaining()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+t.remaining());var a=t.clone();for(a.limit=a.offset+s,t.offset+=s;0<a.remaining();){var l=a.readVarint32();e=7&l;var h=l>>>3;if(1===h)o=this.keyElement.decode(a,e,h);else{if(2!==h)throw Error("Unexpected tag in map field key/value submessage");n=this.element.decode(a,e,h)}}return[o,n]}return this.element.decode(t,e,this.id)},o.Message.Field=l;var r=function(e,t,i,n,s,r,o){l.call(this,e,t,i,null,n,s,r,o),this.extension};r.prototype=Object.create(l.prototype),o.Message.ExtensionField=r,o.Message.OneOf=function(e,t,i){c.call(this,e,t,i),this.fields=[]};var h=function(e,t,i,n,s){a.call(this,e,t,i,n,s),this.className="Enum",this.object=null};h.getName=function(e,t){for(var i,n=Object.keys(e),s=0;s<n.length;++s)if(e[i=n[s]]===t)return i;return null},(h.prototype=Object.create(a.prototype)).build=function(e){if(this.object&&!e)return this.object;for(var t=new _.Builder.Enum,i=this.getChildren(h.Value),n=0,s=i.length;n<s;++n)t[i[n].name]=i[n].id;return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=t},o.Enum=h;var f=function(e,t,i,n){c.call(this,e,t,i),this.className="Enum.Value",this.id=n};f.prototype=Object.create(c.prototype),o.Enum.Value=f;var g=function(e,t,i,n){c.call(this,e,t,i),this.field=n};g.prototype=Object.create(c.prototype),o.Extension=g;var m=function(e,t,i,n){a.call(this,e,t,i,n),this.className="Service",this.clazz=null};(m.prototype=Object.create(a.prototype)).build=function(e){return this.clazz&&!e?this.clazz:this.clazz=function(t,s){for(var r=function(e){t.Builder.Service.call(this),this.rpcImpl=e||function(e,t,i){setTimeout(i.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},e=r.prototype=Object.create(t.Builder.Service.prototype),i=s.getChildren(t.Reflect.Service.RPCMethod),n=0;n<i.length;n++)!function(n){e[n.name]=function(e,i){if(null===(e=n.resolvedRequestType.clazz.decode(y.wrap(e)))||"object"!==(void 0===e?"undefined":S(e)))throw Error("Illegal arguments");e instanceof n.resolvedRequestType.clazz||(e=new n.resolvedRequestType.clazz(e)),this.rpcImpl(n.fqn(),e,function(e,t){e?i(e):(null===t&&(t=""),(t=n.resolvedResponseType.clazz.decode(t))&&t instanceof n.resolvedResponseType.clazz?i(null,t):i(Error("Illegal response type received in service method "+s.name+"#"+n.name)))})},r[n.name]=function(e,t,i){new r(e)[n.name](t,i)},Object.defineProperty&&(Object.defineProperty(r[n.name],"$options",{value:n.buildOpt()}),Object.defineProperty(e[n.name],"$options",{value:r[n.name].$options}))}(i[n]);return Object.defineProperty&&(Object.defineProperty(r,"$options",{value:s.buildOpt()}),Object.defineProperty(e,"$options",{value:r.$options}),Object.defineProperty(r,"$type",{value:s}),Object.defineProperty(e,"$type",{value:s})),r}(_,this)},o.Service=m;var b=function(e,t,i,n){c.call(this,e,t,i),this.className="Service.Method",this.options=n||{}};(b.prototype=Object.create(c.prototype)).buildOpt=t.buildOpt,o.Service.Method=b;var v=function(e,t,i,n,s,r,o,a){b.call(this,e,t,i,a),this.className="Service.RPCMethod",this.requestName=n,this.responseName=s,this.requestStream=r,this.responseStream=o,this.resolvedRequestType=null,this.resolvedResponseType=null};return v.prototype=Object.create(b.prototype),o.Service.RPCMethod=v,o}(n),n.Builder=(s=(o=n).Lang,a=n.Reflect,r=(l=function(e){this.ns=new a.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}}).prototype,l.isMessage=function(e){return"string"==typeof e.name&&void 0===e.values&&void 0===e.rpc},l.isMessageField=function(e){return"string"==typeof e.rule&&"string"==typeof e.name&&"string"==typeof e.type&&void 0!==e.id},l.isEnum=function(e){return"string"==typeof e.name&&!(void 0===e.values||!Array.isArray(e.values)||0===e.values.length)},l.isService=function(e){return!("string"!=typeof e.name||"object"!==S(e.rpc)||!e.rpc)},l.isExtend=function(e){return"string"==typeof e.ref},r.reset=function(){return this.ptr=this.ns,this},r.define=function(e){if("string"!=typeof e||!s.TYPEREF.test(e))throw Error("illegal namespace: "+e);return e.split(".").forEach(function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new a.Namespace(this,this.ptr,e)),this.ptr=t},this),this},r.create=function(e){if(!e)return this;if(Array.isArray(e)){if(0===e.length)return this;e=e.slice()}else e=[e];for(var t=[e];0<t.length;){if(e=t.pop(),!Array.isArray(e))throw Error("not a valid namespace: "+JSON.stringify(e));for(;0<e.length;){var i=e.shift();if(l.isMessage(i)){var r=new a.Message(this,this.ptr,i.name,i.options,i.isGroup,i.syntax),n={};i.oneofs&&Object.keys(i.oneofs).forEach(function(e){r.addChild(n[e]=new a.Message.OneOf(this,r,e))},this),i.fields&&i.fields.forEach(function(e){if(null!==r.getChild(0|e.id))throw Error("duplicate or invalid field id in "+r.name+": "+e.id);if(e.options&&"object"!==S(e.options))throw Error("illegal field options in "+r.name+"#"+e.name);var t=null;if("string"==typeof e.oneof&&!(t=n[e.oneof]))throw Error("illegal oneof in "+r.name+"#"+e.name+": "+e.oneof);e=new a.Message.Field(this,r,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,i.syntax),t&&t.fields.push(e),r.addChild(e)},this);var s=[];if(i.enums&&i.enums.forEach(function(e){s.push(e)}),i.messages&&i.messages.forEach(function(e){s.push(e)}),i.services&&i.services.forEach(function(e){s.push(e)}),i.extensions&&("number"==typeof i.extensions[0]?r.extensions=[i.extensions]:r.extensions=i.extensions),this.ptr.addChild(r),0<s.length){t.push(e),e=s,s=null,this.ptr=r,r=null;continue}s=null}else if(l.isEnum(i))r=new a.Enum(this,this.ptr,i.name,i.options,i.syntax),i.values.forEach(function(e){r.addChild(new a.Enum.Value(this,r,e.name,e.id))},this),this.ptr.addChild(r);else if(l.isService(i))r=new a.Service(this,this.ptr,i.name,i.options),Object.keys(i.rpc).forEach(function(e){var t=i.rpc[e];r.addChild(new a.Service.RPCMethod(this,r,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))},this),this.ptr.addChild(r);else{if(!l.isExtend(i))throw Error("not a valid definition: "+JSON.stringify(i));if(r=this.ptr.resolve(i.ref,!0))i.fields.forEach(function(t){if(null!==r.getChild(0|t.id))throw Error("duplicate extended field id in "+r.name+": "+t.id);if(r.extensions){var i=!1;if(r.extensions.forEach(function(e){t.id>=e[0]&&t.id<=e[1]&&(i=!0)}),!i)throw Error("illegal extended field id in "+r.name+": "+t.id+" (not within valid ranges)")}var e=t.name;this.options.convertFieldsToCamelCase&&(e=o.Util.toCamelCase(e));var n=new a.Message.ExtensionField(this,r,t.rule,t.type,this.ptr.fqn()+"."+e,t.id,t.options),s=new a.Extension(this,this.ptr,t.name,n);n.extension=s,this.ptr.addChild(s),r.addChild(n)},this);else if(!/\.?google\.protobuf\./.test(i.ref))throw Error("extended message "+i.ref+" is not defined")}r=i=null}e=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},r.import=function(t,e){var i="/";if("string"==typeof e){if(!0===this.files[e])return this.reset();this.files[e]=!0}else if("object"===(void 0===e?"undefined":S(e))){var n,s=e.root;if((0<=s.indexOf("\\")||0<=e.file.indexOf("\\"))&&(i="\\"),n=s+i+e.file,!0===this.files[n])return this.reset();this.files[n]=!0}if(t.imports&&0<t.imports.length){var r,o=!1;"object"===(void 0===e?"undefined":S(e))?(this.importRoot=e.root,o=!0,r=this.importRoot,e=e.file,(0<=r.indexOf("\\")||0<=e.indexOf("\\"))&&(i="\\")):"string"==typeof e?this.importRoot?r=this.importRoot:0<=e.indexOf("/")?""===(r=e.replace(/\/[^\/]*$/,""))&&(r="/"):0<=e.indexOf("\\")?(r=e.replace(/\\[^\\]*$/,""),i="\\"):r=".":r=null;for(var a=0;a<t.imports.length;a++)if("string"==typeof t.imports[a]){if(!r)throw Error("cannot determine import root");var l=t.imports[a],h=l.replace(/\.proto$/,""),c=this.datas[h];if(!c)throw Error("failed to import '"+l+"' in '"+e+"': file not found");this.import(c,l)}else e?/\.(\w+)$/.test(e)?this.import(t.imports[a],e.replace(/^(.+)\.(\w+)$/,function(e,t,i){return t+"_import"+a+"."+i})):this.import(t.imports[a],e+"_import"+a):this.import(t.imports[a]);o&&(this.importRoot=null)}t.package&&this.define(t.package),t.syntax&&function t(i){i.messages&&i.messages.forEach(function(e){e.syntax=i.syntax,t(e)}),i.enums&&i.enums.forEach(function(e){e.syntax=i.syntax})}(t);var u=this.ptr;return t.options&&Object.keys(t.options).forEach(function(e){u.options[e]=t.options[e]}),t.messages&&(this.create(t.messages),this.ptr=u),t.enums&&(this.create(t.enums),this.ptr=u),t.services&&(this.create(t.services),this.ptr=u),t.extends&&this.create(t.extends),this.reset()},r.resolveAll=function(){var e;if(null==this.ptr||"object"===S(this.ptr.type))return this;if(this.ptr instanceof a.Namespace)this.ptr.children.forEach(function(e){this.ptr=e,this.resolveAll()},this);else if(this.ptr instanceof a.Message.Field){if(s.TYPE.test(this.ptr.type))this.ptr.type=o.TYPES[this.ptr.type];else{if(!s.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(e=(this.ptr instanceof a.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if((this.ptr.resolvedType=e)instanceof a.Enum){if(this.ptr.type=o.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==e.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(e instanceof a.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=e.isGroup?o.TYPES.group:o.TYPES.message}}if(this.ptr.map){if(!s.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=o.TYPES[this.ptr.keyType]}"proto3"===this.ptr.syntax&&this.ptr.repeated&&void 0===this.ptr.options.packed&&-1!==o.PACKABLE_WIRE_TYPES.indexOf(this.ptr.type.wireType)&&(this.ptr.options.packed=!0)}else if(this.ptr instanceof o.Reflect.Service.Method){if(!(this.ptr instanceof o.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(!((e=this.ptr.parent.resolve(this.ptr.requestName,!0))&&e instanceof o.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=e,!((e=this.ptr.parent.resolve(this.ptr.responseName,!0))&&e instanceof o.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=e}else if(!(this.ptr instanceof o.Reflect.Message.OneOf||this.ptr instanceof o.Reflect.Extension||this.ptr instanceof o.Reflect.Enum.Value))throw Error("illegal object in namespace: "+S(this.ptr)+": "+this.ptr);return this.reset()},r.build=function(e){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(var t="string"==typeof e?e.split("."):e,i=this.result,n=0;n<t.length;n++){if(!i[t[n]]){i=null;break}i=i[t[n]]}return i},r.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},r.toString=function(){return"Builder"},l.Message=function(){},l.Enum=function(){},l.Service=function(){},l),n.Map=function(e,o){function s(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}var t=function(e,t){if(!e.map)throw Error("field is not a map");if(this.field=e,this.keyElem=new o.Element(e.keyType,null,!0,e.syntax),this.valueElem=new o.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),t)for(var i=Object.keys(t),n=0;n<i.length;n++){var s=this.keyElem.valueFromString(i[n]),r=this.valueElem.verifyValue(t[i[n]]);this.map[this.keyElem.valueToString(s)]={key:s,value:r}}},i=t.prototype;return i.clear=function(){this.map={}},i.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),i=t in this.map;return delete this.map[t],i},i.entries=function(){for(var e,t=[],i=Object.keys(this.map),n=0;n<i.length;n++)t.push([(e=this.map[i[n]]).key,e.value]);return s(t)},i.keys=function(){for(var e=[],t=Object.keys(this.map),i=0;i<t.length;i++)e.push(this.map[t[i]].key);return s(e)},i.values=function(){for(var e=[],t=Object.keys(this.map),i=0;i<t.length;i++)e.push(this.map[t[i]].value);return s(e)},i.forEach=function(e,t){for(var i,n=Object.keys(this.map),s=0;s<n.length;s++)e.call(t,(i=this.map[n[s]]).value,i.key,this)},i.set=function(e,t){var i=this.keyElem.verifyValue(e),n=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(i)]={key:i,value:n},this},i.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));if(t in this.map)return this.map[t].value},i.has=function(e){return this.keyElem.valueToString(this.keyElem.verifyValue(e))in this.map},t}(0,n.Reflect),n.loadProto=function(e,t,i){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(i=t,t=void 0),n.loadJson(n.DotProto.Parser.parse(e),t,i)},n.protoFromString=n.loadProto,n.protoFromFile=n.loadProtoFile,n.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=n.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=n.populateAccessors),new n.Builder(e)},n.loadJson=function(e,t,i){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(i=t,t=null),t&&"object"===(void 0===t?"undefined":S(t))||(t=n.newBuilder()),"string"==typeof e&&(e=JSON.parse(e)),t.import(e,i),t.resolveAll(),t},n)},{"./bytebuffer":83}],86:[function(e,t,i){b8e.ColorTransfrom=b8e.Object.extends({_redMultiplier:1,_greenMultiplier:1,_blueMultiplier:1,_alphaMultiplier:1,_redOffset:0,_greenOffset:0,_blueOffset:0,_alphaOffset:0,_key:null,ctor:function(e){this.setData(e)},setData:function(e){!e||e.length<8||(this._key=null,this._redMultiplier=e[0],this._greenMultiplier=e[1],this._blueMultiplier=e[2],this._alphaMultiplier=e[3],this._redOffset=e[4],this._greenOffset=e[5],this._blueOffset=e[6],this._alphaOffset=e[7])},getData:function(){return[this._redMultiplier,this._greenMultiplier,this._blueMultiplier,this._alphaMultiplier,this._redOffset,this._greenOffset,this._blueOffset,this._alphaOffset]},setMultiplier:function(e){e&&4==e.length&&(this._key=null,this._redMultiplier=e[0],this._greenMultiplier=e[1],this._blueMultiplier=e[2],this._alphaMultiplier=e[3])},setOffset:function(e){e&&4==e.length&&(this._redOffset=e[0],this._greenOffset=e[1],this._blueOffset=e[2],this._alphaOffset=e[3])},getMultiplierArray:function(){return[this._redMultiplier,this._greenMultiplier,this._blueMultiplier,this._alphaMultiplier]},getOffsetArray:function(){return[this._redOffset,this._greenOffset,this._blueOffset,this._alphaOffset]},equals:function(e){return this._redMultiplier==e._redMultiplier&&this._greenMultiplier==e._greenMultiplier&&this._blueMultiplier==e._blueMultiplier&&this._alphaMultiplier==e._alphaMultiplier&&this._redOffset==e._redOffset&&this._greenOffset==e._greenOffset&&this._blueOffset==e._blueOffset&&this._alphaOffset==e._alphaOffset},toString:function(){return this._key||(this._key=this._redMultiplier+"_"+this._greenMultiplier+"_"+this._blueMultiplier+"_"+this._alphaMultiplier+"_"+this._redOffset+"_"+this._greenOffset+"_"+this._blueOffset+"_"+this._alphaOffset),this._key},clear:function(){this._key=null,this._redMultiplier=1,this._greenMultiplier=1,this._blueMultiplier=1,this._alphaMultiplier=1,this._redOffset=0,this._greenOffset=0,this._blueOffset=0,this._alphaOffset=0}})},{}],87:[function(e,t,i){var a=b8e.ShaderProgram=b8e.Object.extends({_sprite:null,_lastColorTransfrom:null,_colorTransfrom:null,_lastGamma:1,_gamma:1,_lastIsMix:!1,_isMix:!1,_lastIsBtf:!1,_isBtf:!1,_key:null,_glProgram:null,ctor:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;this._super(),this._sprite=e,this._lastColorTransfrom=new b8e.ColorTransfrom,this._colorTransfrom=new b8e.ColorTransfrom},reset:function(){this._colorTransfrom.clear(),this._gamma=1,this._isMix=!1,this._isBtf=!1},getColorTransfrom:function(){return this._colorTransfrom},setGamma:function(e){this._gamma=e},setIsMix:function(e){this._isMix=e},setIsBtf:function(e){this._isBtf=e},glProgram:{get:function(){return this._glProgram}},update:function(){var e=!1;0<arguments.length&&void 0!==arguments[0]&&arguments[0]&&(e=!0),e||this._lastColorTransfrom.equals(this._colorTransfrom)||(e=!0),e||this._lastGamma==this._gamma||(e=!0),e||this._lastIsMix==this._isMix||(e=!0),e||this._lastIsBtf==this._isBtf||(e=!0),e&&(this._key=this._colorTransfrom.toString()+"_"+this._gamma+"_"+this._isMix+"_"+this._isBtf,b8e.renderType===b8e.RenderType.WEBGL&&(this._glProgram=a.applyGlProgram(this),this._sprite&&this._glProgram&&this._sprite._sgNode.setShaderProgram(this._glProgram)),this._lastGamma=this._gamma,this._lastIsMix=this._isMix,this._lastIsBtf=this._isBtf,this._lastColorTransfrom.setData(this._colorTransfrom.getData()))},dispose:function(){this._key=null,this._glProgram=null,this._sprite=null,this._lastColorTransfrom=null,this._colorTransfrom=null,this._lastGamma=0,this._gamma=0,this._lastIsMix=!1,this._isMix=!1,this._lastIsBtf=!1,this._isBtf=!1}});a.U_MULTIPLIER="u_multiplier",a.U_OFFSETCOLOR="u_offsetColor",a.U_GAMMA="u_gamma",a.U_IS_MIX="u_isMix",a.U_IS_BTF="u_isBtf",a.DEFAULT_SPRITE_VERT_SHADER=e("./default/sprite/SSprite.vsh"),a.DEFAULT_SPRITE_FRAG_SHADER=e("./default/sprite/SSprite.fsh");var l=a.programCache=b8e.HashMap.get();a.applyGlProgram=function(e){if(b8e.renderType===b8e.RenderType.WEBGL){var t=e._key,i=l.get(t);if(!i){var n=e._colorTransfrom,s=e._gamma,r=e._isMix?1:0,o=e._isBtf?1:0;(i=a.createDefaultSpriteProgram()).setUniformLocationWith4fv(a.U_MULTIPLIER,n.getMultiplierArray()),i.setUniformLocationWith4fv(a.U_OFFSETCOLOR,n.getOffsetArray()),i.setUniformLocationWith1f(a.U_GAMMA,s),i.setUniformLocationWith1f(a.U_IS_MIX,r),i.setUniformLocationWith1f(a.U_IS_BTF,o),l.set(t,i)}return i}return null},a.createProgram=function(e,t){var i=new cc.GLProgram;return cc.sys.isNative?i.initWithString(e,t):(i.initWithVertexShaderByteArray(e,t),i.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION,cc.macro.VERTEX_ATTRIB_POSITION),i.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR,cc.macro.VERTEX_ATTRIB_COLOR),i.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD,cc.macro.VERTEX_ATTRIB_TEX_COORDS)),i.link(),i.updateUniforms(),i},a.createDefaultSpriteProgram=function(){var e=a.DEFAULT_SPRITE_VERT_SHADER,t=a.DEFAULT_SPRITE_FRAG_SHADER;return a.createProgram(e,t)},a.getCount=function(){return l.count()}},{"./default/sprite/SSprite.fsh":88,"./default/sprite/SSprite.vsh":89}],88:[function(e,t,i){t.exports="\n#ifdef GL_ES\nprecision lowp float;\n#endif\n\nvarying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nvarying vec2 v_alphaCoord;\nvarying vec4 v_offsetColor;  \nvarying vec4 v_multiplier;\nvarying float v_gamma;\nvarying float v_isMix;\nvarying float v_isBtf;\n\nvec3 gammaCorrect(vec3 color, float gamma){\n    return pow(color, vec3(1.0 / gamma));\n}\n\nvoid main()\n{\n    vec4 rgba = texture2D(CC_Texture0, v_texCoord);\n    vec3 rgb = rgba.xyz;\n    if(v_gamma != 1.0){\n        rgb = gammaCorrect(rgb, v_gamma);\n    }\n    lowp float r, g, b, a;\n    r = rgb.r;\n    g = rgb.g;\n    b = rgb.b;\n    if(v_isBtf == 1.0){\n        a = texture2D(CC_Texture0, v_alphaCoord).b;\n    }\n    else{\n        a = rgba.a;\n    }\n    if(v_isMix == 1.0){\n        float mixColor = r * v_multiplier.x + g * v_multiplier.y + b * v_multiplier.z;\n        r = mixColor;\n        g = mixColor;\n        b = mixColor;\n    }\n    else{\n        r = (r * v_multiplier.x) + (v_offsetColor.x / 255.0);\n        g = (g * v_multiplier.y) + (v_offsetColor.y / 255.0);\n        b = (b * v_multiplier.z) + (v_offsetColor.z / 255.0);\n        a = (a * v_multiplier.w) + (v_offsetColor.w / 255.0);\n    }\n    rgba.r = r;\n    rgba.g = g;\n    rgba.b = b;\n    rgba.a = a;\n    vec4 c = v_fragmentColor * rgba;\n    gl_FragColor = c;\n}\n"},{}],89:[function(e,t,i){t.exports="\nattribute vec4 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec4 v_fragmentColor;\nvarying vec2 v_texCoord;\nvarying vec2 v_alphaCoord;\nvarying vec4 v_offsetColor;  \nvarying vec4 v_multiplier;\nvarying float v_gamma;\nvarying float v_isMix;\nvarying float v_isBtf;\n\nuniform vec4 u_offsetColor;  \nuniform vec4 u_multiplier;\nuniform float u_gamma;\nuniform float u_isMix;\nuniform float u_isBtf;\n\nvoid main() \n{\n    gl_Position = CC_PMatrix * a_position;\n    v_fragmentColor = a_color;\n    v_texCoord = a_texCoord * vec2(1.0, 1.0);\n    v_alphaCoord = a_texCoord + vec2(0.0, 0.5);\n    v_offsetColor = u_offsetColor;\n    v_multiplier = u_multiplier;\n    v_gamma = u_gamma;\n    v_isMix = u_isMix;\n    v_isBtf = u_isBtf;\n}\n"},{}],90:[function(e,t,i){var r=b8e.ByteArray=b8e.Object.extends({_isRecycled:!1,_isDisposed:!1,ctor:function(e){this._super(),e instanceof Uint8Array&&(e=e.buffer),this.BUFFER_EXT_SIZE=0,this._setArrayBuffer(e||new ArrayBuffer(this.BUFFER_EXT_SIZE)),this.endian=b8e.Endian.BIG_ENDIAN,this._isRecycled=!1,this._isDisposed=!1},_setArrayBuffer:function(e){this.write_position=e.byteLength,this.data=new DataView(e),this._position=0},setArrayBuffer:function(e){},buffer:{get:function(){return this.data.buffer},set:function(e){this.data=new DataView(e)}},dataView:{get:function(){return this.data},set:function(e){this.data=e,this.write_position=e.byteLength}},byteOffset:{get:function(){return this.data.byteOffset}},position:{get:function(){return this._position},set:function(e){this._position=e,this.write_position=e>this.write_position?e:this.write_position}},length:{get:function(){return this.write_position},set:function(e){this.write_position=e;var t=new Uint8Array(new ArrayBuffer(e)),i=this.data.buffer.byteLength;e<i&&(this._position=e);var n=Math.min(i,e);t.set(new Uint8Array(this.data.buffer,0,n)),this.buffer=t.buffer}},bytesAvailable:{get:function(){return this.data.byteLength-this._position}},clear:function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))},readBoolean:function(){if(!this.validate(r.SIZE_OF_BOOLEAN))return null;var e=this._position,t=0!=this.data.getUint8(e);return this.position=e+1,t},readByte:function(){if(!this.validate(r.SIZE_OF_INT8))return null;var e=this._position,t=this.data.getInt8(e);return this.position=e+1,t},readBytes:function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),0==i)i=this.bytesAvailable;else if(!this.validate(i))return null;e?e.validateBuffer(t+i):e=new r(new ArrayBuffer(t+i));for(var n=this._position,s=0;s<i;s++)e.data.setUint8(s+t,this.data.getUint8(n)),n+=1;this.position=n},readDouble:function(){if(!this.validate(r.SIZE_OF_FLOAT64))return null;var e=this._position,t=this.data.getFloat64(e,this.endian==b8e.Endian.LITTLE_ENDIAN);return this.position=e+r.SIZE_OF_FLOAT6,t},readFloat:function(){if(!this.validate(r.SIZE_OF_FLOAT32))return null;var e=this._position,t=this.data.getFloat32(e,this.endian==b8e.Endian.LITTLE_ENDIAN);return this.position=e+r.SIZE_OF_FLOAT32,t},readInt:function(){if(!this.validate(r.SIZE_OF_INT32))return null;var e=this._position,t=this.data.getInt32(e,this.endian==b8e.Endian.LITTLE_ENDIAN);return this.position=e+r.SIZE_OF_INT32,t},readShort:function(){if(!this.validate(r.SIZE_OF_INT16))return null;var e=this._position,t=this.data.getInt16(e,this.endian==b8e.Endian.LITTLE_ENDIAN);return this.position=e+r.SIZE_OF_INT16,t},readUnsignedByte:function(){if(!this.validate(r.SIZE_OF_UINT8))return null;var e=this._position,t=this.data.getUint8(e);return this.position=e+1,t},readUnsignedInt:function(){if(!this.validate(r.SIZE_OF_UINT32))return null;var e=this._position,t=this.data.getUint32(e,this.endian==b8e.Endian.LITTLE_ENDIAN);return this.position=e+r.SIZE_OF_UINT32,t},readUnsignedShort:function(){if(!this.validate(r.SIZE_OF_UINT16))return null;var e=this._position,t=this.data.getUint16(e,this.endian==b8e.Endian.LITTLE_ENDIAN);return this.position=e+r.SIZE_OF_UINT16,t},readUTF:function(){if(!this.validate(r.SIZE_OF_UINT16))return null;var e=this._position,t=this.data.getUint16(e,this.endian==b8e.Endian.LITTLE_ENDIAN);return this.position=e+r.SIZE_OF_UINT16,0<t?this.readUTFBytes(t):""},readUTFBytes:function(e){if(!this.validate(e))return null;var t=this._position,i=new Uint8Array(this.buffer,this.byteOffset+t,e);return this.position=t+e,b8e.BufferUtil.decodeUTF8(i)},writeBoolean:function(e){this.validateBuffer(r.SIZE_OF_BOOLEAN);var t=this._position;this.data.setUint8(t,e?1:0),this.position=t+1},writeByte:function(e){this.validateBuffer(r.SIZE_OF_INT8);var t=this._position;this.data.setInt8(t,e),this.position=t+1},writeBytes:function(e,t,i){var n;if(void 0===t&&(t=0),void 0===i&&(i=0),!(t<0)&&!(i<0)&&0<(n=0==i?e.length-t:Math.min(e.length-t,i))){this.validateBuffer(n);for(var s=new DataView(e.buffer),r=(i=n,this._position);4<i;i-=4)this.data.setUint32(r,s.getUint32(t)),r+=4,t+=4;for(;0<i;i--)this.data.setUint8(r,s.getUint8(t++)),r+=1;this.position=r}},writeDouble:function(e){this.validateBuffer(r.SIZE_OF_FLOAT64);var t=this._position;this.data.setFloat64(t,e,this.endian==b8e.Endian.LITTLE_ENDIAN),this.position=t+r.SIZE_OF_FLOAT64},writeFloat:function(e){this.validateBuffer(r.SIZE_OF_FLOAT32);var t=this._position;this.data.setFloat32(t,e,this.endian==b8e.Endian.LITTLE_ENDIAN),this.position=t+r.SIZE_OF_FLOAT32},writeInt:function(e){this.validateBuffer(r.SIZE_OF_INT32);var t=this._position;this.data.setInt32(t,e,this.endian==b8e.Endian.LITTLE_ENDIAN),this.position=t+r.SIZE_OF_INT32},writeShort:function(e){this.validateBuffer(r.SIZE_OF_INT16);var t=this._position;this.data.setInt16(t,e,this.endian==b8e.Endian.LITTLE_ENDIAN),this.position=t+r.SIZE_OF_INT16},writeUnsignedInt:function(e){this.validateBuffer(r.SIZE_OF_UINT32);var t=this._position;this.data.setUint32(t,e,this.endian==b8e.Endian.LITTLE_ENDIAN),this.position=t+r.SIZE_OF_UINT32},writeUnsignedShort:function(e){this.validateBuffer(r.SIZE_OF_UINT16);var t=this._position;this.data.setUint16(t,e,this.endian==b8e.Endian.LITTLE_ENDIAN),this.position=t+r.SIZE_OF_UINT16},writeUTF:function(e){var t=b8e.BufferUtil.encodeUTF8(e),i=t.length;this.validateBuffer(r.SIZE_OF_UINT16+i);var n=this._position;this.data.setUint16(n,i,this.endian==b8e.Endian.LITTLE_ENDIAN),this.position=n+r.SIZE_OF_UINT16,this.writeUint8Array(t,0,0,!1)},writeUTFBytes:function(e){this.writeUint8Array(b8e.BufferUtil.encodeUTF8(e))},toString:function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},writeUint8Array:function(e,t,i,n){var s;if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=!0),!(t<0)&&!(i<0)&&0<(s=0==i?e.length-t:Math.min(e.length-t,i))){var r=this._position;n&&this.validateBuffer(r+s);for(var o=s,a=t;a<o;a++)this.data.setUint8(r,e[a]),r+=1;this.position=r}},toUint8Array:function(){return new Uint8Array(this.data.buffer)},validate:function(e){return 0<this.data.byteLength&&this._position+e<=this.data.byteLength},validateBuffer:function(e,t){if(void 0===t&&(t=!1),this.write_position=e>this.write_position?e:this.write_position,e+=this._position,this.data.byteLength<e||t){var i=new Uint8Array(new ArrayBuffer(e+this.BUFFER_EXT_SIZE)),n=Math.min(this.data.buffer.byteLength,e+this.BUFFER_EXT_SIZE);i.set(new Uint8Array(this.data.buffer,0,n)),this.buffer=i.buffer}},restore:function(){this._isRecycled=!1,this.clear()},recycle:function(){this._isRecycled=!0,this.clear()},release:function(){this.constructor===r?r.put(this):this.destroy()},dispose:function(){this._isRecycled=!1,this._isDisposed=!0},destroy:function(){this.recycle(),this.dispose()}});r.SIZE_OF_BOOLEAN=1,r.SIZE_OF_INT8=1,r.SIZE_OF_INT16=2,r.SIZE_OF_INT32=4,r.SIZE_OF_UINT8=1,r.SIZE_OF_UINT16=2,r.SIZE_OF_UINT32=4,r.SIZE_OF_FLOAT32=4,r.SIZE_OF_FLOAT64=8,r.pool=new b8e.Pool(r,1024),r.get=function(){return r.pool.get()},r.put=function(e){return r.pool.put(e)}},{}],91:[function(e,t,i){var n=b8e.ByteBuffer=b8e.ByteArray.extends({ctor:function(e){this._super(e),this.endian=b8e.Endian.BIG_ENDIAN,n.count++},readBytes:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4294967295;0!=i&&(4294967295==i?this._super(e,t,0):this._super(e,t,i))},readLong:function(){var e,t;return"bigEndian"==this.endian?(e=this.readInt(),t=this.readUnsignedInt()):(t=this.readUnsignedInt(),e=this.readInt()),e*n.POW_2_32+t},writeLong:function(e){var t=e/n.POW_2_32>>0,i=e%n.POW_2_32;"bigEndian"==this.endian?(this.writeInt(t),this.writeUnsignedInt(i)):(this.writeUnsignedInt(i),this.writeInt(t))},writeVarint32:function(e){for(;;){if(0==(-128&e))return void this.writeByte(e);this.writeByte(127&e|128),e>>>=7}},readVarint32:function(){return this.readUint32()},writeVarint64:function(e){var t=b8e.Int64.fromNumber(e),i=new b8e.WritingBuffer;i.endian="bigEndian",b8e.WriteUtil.write$TYPE_INT64(i,t),this.writeBytes(i)},readVarint64:function(){return b8e.ReadUtil.read$TYPE_INT64(this).toNumber()},readUint32:function(){var e,t,i;for(e=0;;){if(t=this.readUnsignedByte(),!(e<32)){do{}while(128<=this.readUnsignedByte());break}if(!(128<=t)){i|=t<<e;break}i|=(127&t)<<e,e+=7}return i},writeUint32:function(e){for(;;){if(e<128)return void this.writeByte(e);this.writeByte(127&e|128),e>>>=7}},readString:function(){var e=this.readVarint32();return this.readUTFBytes(e)},writeString:function(e){var t=null;null==e?this.writeInt(0):((t=b8e.ByteArray.get()).writeUTFBytes(e),this.writeVarint32(t.length),this.writeBytes(t),t.release())},writeProtobuf:function(e){if(e){var t=e.encodeAB();this.writeUint8Array(new Uint8Array(t))}},readProtobuf:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4294967295,i=b8e.ByteArray.get();this.readBytes(i,0,t);var n=e.ctor.decode(i.toUint8Array());return i.release(),n},dump:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:16,t=null,i=0,n="",s=b8e.ByteArray.get();if(s.writeBytes(this),s.position=0,10==e)for(;0<s.bytesAvailable;)15<++i?(n+=s.readUnsignedByte().toString()+"\n",i=0):n+=s.readUnsignedByte().toString()+" ";else{if(16!=e)throw new Error("radix 只能为 10 或 16");for(;0<s.bytesAvailable;)1==(t=s.readUnsignedByte().toString(16)).length&&(t="0"+t),15<++i?(n+=t+"\n",i=0):n+=t+" "}return s.release(),n+"\n"},restore:function(){this.clear(),n.count++},recycle:function(){this.clear(),n.count--},release:function(){this.constructor===n?n.put(this):this.destroy()}});n.POW_2_32=Math.pow(2,32),n.count=0,n.pool=new b8e.Pool(n,1024),n.get=function(){return n.pool.get()},n.put=function(e){return n.pool.put(e)}},{}],92:[function(e,t,i){var n=b8e.Endian=function(){};n.LITTLE_ENDIAN="littleEndian",n.BIG_ENDIAN="bigEndian"},{}],93:[function(e,t,i){var n=b8e.Ease=function(){};n.convertEase=function(e){if("function"==typeof e)return e;var t=n[e];return"function"==typeof t?t:null},n.get=function(t){return t<-1&&(t=-1),1<t&&(t=1),function(e){return 0==t?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},n.getPowIn=function(t){return function(e){return Math.pow(e,t)}},n.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},n.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},n.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},n.sineOut=function(e){return Math.sin(e*Math.PI/2)},n.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},n.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},n.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},n.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},n.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},n.circOut=function(e){return Math.sqrt(1- --e*e)},n.circInOut=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},n.bounceIn=function(e){return 1-n.bounceOut(1-e)},n.bounceOut=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},n.bounceInOut=function(e){return e<.5?.5*n.bounceIn(2*e):.5*n.bounceOut(2*e-1)+.5},n.getElasticIn=function(i,n){var s=2*Math.PI;return function(e){if(0==e||1==e)return e;var t=n/s*Math.asin(1/i);return-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*s/n)}},n.getElasticOut=function(i,n){var s=2*Math.PI;return function(e){if(0==e||1==e)return e;var t=n/s*Math.asin(1/i);return i*Math.pow(2,-10*e)*Math.sin((e-t)*s/n)+1}},n.getElasticInOut=function(i,n){var s=2*Math.PI;return function(e){var t=n/s*Math.asin(1/i);return(e*=2)<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*s/n)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*s/n)*.5+1}},n.quadIn=n.getPowIn(2),n.quadOut=n.getPowOut(2),n.quadInOut=n.getPowInOut(2),n.cubicIn=n.getPowIn(3),n.cubicOut=n.getPowOut(3),n.cubicInOut=n.getPowInOut(3),n.quartIn=n.getPowIn(4),n.quartOut=n.getPowOut(4),n.quartInOut=n.getPowInOut(4),n.quintIn=n.getPowIn(5),n.quintOut=n.getPowOut(5),n.quintInOut=n.getPowInOut(5),n.backIn=n.getBackIn(1.7),n.backOut=n.getBackOut(1.7),n.backInOut=n.getBackInOut(1.7),n.elasticIn=n.getElasticIn(1,.3),n.elasticOut=n.getElasticOut(1,.3),n.elasticInOut=n.getElasticInOut(1,.3*1.5)},{}],94:[function(e,t,i){var g=b8e.Tween=b8e.Object.extends({_isRecycled:!1,_isDisposed:!1,ctor:function(e,t,i){this._super(),this._isRecycled=!1,this._isDisposed=!1,this.resetProps(),this.initialize(e,t,i)},resetProps:function(){this._target=null,this._props=null,this._useFrame=!1,this._lastTime=0,this.ignoreGlobalPause=!1,this.loop=!1,this.pluginData=null,this._steps=null,this._actions=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._prevPosition=0,this._stepPosition=0,this.passive=!1,this.canRelease=!1},usable:{get:function(){return!this._isRecycled&&!this._isDisposed}},restore:function(e,t,i){this._isRecycled=!1,this.resetProps(),this.initialize(e,t,i)},recycle:function(){this.resetProps(),this.paused=!0,this._isRecycled=!0},release:function(){this.constructor===g?g.poolPut(this):this.destroy()},dispose:function(){this.paused=!1,this._isRecycled=!1,this._isDisposed=!0},destroy:function(){this.recycle(),this.dispose()},initialize:function(e,t,i){this._lastTime=b8e.timeStamp,this._target=e,(this._props=t)&&(this._useFrame=t.useFrame,this.ignoreGlobalPause=t.ignoreGlobalPause,this.loop=t.loop,t.override&&g.kill(e)),this.pluginData=i||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e instanceof b8e.BaseDisplay?e._tweenActive||(e._tweenActive=function(){return e.usable}):e instanceof cc.Node&&(e._tweenActive||(e._tweenActive=function(){return e.active})),t&&t.paused?this.paused=!0:g._register(this),t&&null!=t.position&&this.setPosition(t.position,g.NONE)},setPosition:function(e,t){void 0===t&&(t=1),e<0&&(e=0);var i=e,n=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,n=!0)),i==this._prevPos)return n;var s=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=e,this._target){if(this._target._tweenActive&&!this._target._tweenActive())return this.release(),!0;if(n)this._updateTargetProps(null,1);else{var r=this._steps,o=r.length;if(0<o){for(var a=0;a<o&&!(r[a].t>i);a++);var l=r[a-1];this._updateTargetProps(l,(this._stepPosition=i-l.t)/l.d)}}}n&&this.setPaused(!0),this.canRelease=!0,0!=t&&0<this._actions.length&&(this._useFrame?this._runActions(i,i):1==t&&i<s?(s!=this.duration&&this._runActions(s,this.duration),this._runActions(0,i,!0)):this._runActions(s,i));var h=this._props;return h&&h.onUpdate&&h.onUpdate.call(h.onUpdateThis),n&&this.canRelease&&this.release(),n},_runActions:function(e,t,i){if(this._actions){void 0===i&&(i=!1);var n=e,s=t,r=-1,o=this._actions.length,a=1;for(t<e&&(n=t,s=e,r=o,o=a=-1);(r+=a)!=o&&this._actions;){var l=this._actions[r],h=l.t;(h==s||n<h&&h<s||i&&h==e)&&l.f.apply(l.o,l.p)}}},_updateTargetProps:function(e,t){var i,n,s,r,o,a;if(e||1!=t){if(this.passive=!!e.v,this.passive)return;e.e&&(t=e.e(t,0,1,1)),i=e.p0,n=e.p1}else this.passive=!1,i=n=this._curQueueProps;var l=g._plugins;for(var h in this._initQueueProps){null==(r=i[h])&&(i[h]=r=this._initQueueProps[h]),null==(o=n[h])&&(n[h]=o=r),s=r==o||0==t||1==t||"number"!=typeof r?1==t?o:r:r+(o-r)*t;var c=!1;if(a=l[h])for(var u=0,d=a.length;u<d;u++){var f=a[u].tween(this,h,s,i,n,t,!!e&&i==n,!e);f==g.IGNORE?c=!0:s=f}c||(this._target[h]=s)}},setPaused:function(e){return(this.paused=e)?g._unregister(this):g._register(this),this},_cloneProps:function(e){var t={};for(var i in e)t[i]=e[i];return t},_addStep:function(e){return 0<e.d&&(this._steps.push(e),e.t=this.duration,this.duration+=e.d),this},_appendQueueProps:function(e){var t,i,n,s,r,o=g._plugins;for(var a in e)if(void 0===this._initQueueProps[a]){if(i=this._target[a],t=o[a])for(n=0,s=t.length;n<s;n++)i=t[n].init(this,a,i);this._initQueueProps[a]=this._curQueueProps[a]=void 0===i?null:i}else i=this._curQueueProps[a];for(var a in e){if(i=this._curQueueProps[a],t=o[a])for(r=r||{},n=0,s=t.length;n<s;n++)t[n].step&&t[n].step(this,a,i,e[a],r);this._curQueueProps[a]=e[a]}return r&&this._appendQueueProps(r),this._curQueueProps},_addAction:function(e){return e.t=this.duration,this._actions.push(e),this},_set:function(e,t){for(var i in e)t[i]=e[i]},wait:function(e,t){if(null==e||e<=0)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:e,p0:i,p1:i,v:t})},to:function(e,t,i){return void 0===i&&(i=void 0),(isNaN(t)||t<0)&&(t=0),this._addStep({d:t||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(e))})},call:function(e,t,i){if(e)return void 0===t&&(t=void 0),void 0===i&&(i=void 0),this._addAction({f:e,p:i||[],o:t||this._target});b8e.error("callback不能为空！")},set:function(e,t){return void 0===t&&(t=null),this._appendQueueProps(e),this._addAction({f:this._set,o:this,p:[e,t||this._target]})},kill:function(){this.usable&&(this.setPaused(!0),this.release())},play:function(){return this.setPaused(!1)},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},tick:function(e){this.paused||this.setPosition(this._prevPosition+e)}});g.pool=new b8e.Pool(g,1024),g.poolGet=function(e,t,i){return g.pool.get(e,t,i)},g.poolPut=function(e){return g.pool.put(e)},g.get=function(e,t,i,n){return void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=!1),n&&g.kill(e),g.poolGet(e,t,i)},g.kill=function(e){if(0<e.tween_count){for(var t,i=g._tweens,n=i.length-1;0<=n;n--)(t=i[n])._target===e&&(t.usable&&(t.paused=!0,t.release()),i.splice(n,1));e.tween_count=0}},g.pause=function(e){if(0<e.tween_count)for(var t,i=g._tweens,n=i.length-1;0<=n;n--)(t=i[n])._target===e&&(t.paused=!0)},g.resume=function(e){if(0<e.tween_count)for(var t,i=g._tweens,n=i.length-1;0<=n;n--)(t=i[n])._target===e&&(t.paused=!1)},g.paused=!1,g.tickPaused=!1,g._nextIndex=0,g.tick=function(e,t,i){if(!g.tickPaused){var n,s=g._tweens;n=s.length-1;for(var r=b8e.timeStamp,o=n;0<=o;o--){var a=s[o];if(a){if(e=r-a._lastTime,a._lastTime=r,g.paused&&!a.ignoreGlobalPause||a.paused)continue;a.tick(a._useFrame?1:e)}}}},g._register=function(e){var t=e._target,i=g._tweens;g._inited||(b8e.ticker.startTick(g.tick,g,0,1),g._nextIndex=-1,g._inited=!0),i.indexOf(e)<0&&(i.unshift(e),t&&(t.tween_count=0<t.tween_count?t.tween_count+1:1),g._nextIndex++)},g._unregister=function(e){for(var t=e._target,i=g._tweens,n=i.length;n--;)if(i[n]==e)return i.splice(n,1),t&&t.tween_count--,void(n<=g._nextIndex&&g._nextIndex--)},g.killAll=function(){for(var e=g._tweens,t=e.length-1;0<=t;t--){var i=e[t];i.usable&&(i.paused=!0,i.release()),i._target.tween_count=0}e.length=0,g._nextIndex=-1},g.getCount=function(){return g._tweens.length},g.NONE=0,g.LOOP=1,g.REVERSE=2,g._tweens=[],g.IGNORE={},g._plugins={},g._inited=!1},{}],95:[function(e,t,i){b8e.TweenBasePath=b8e.Object.extends({name:null,ctor:function(){this._super(),this.name=""}})},{}],96:[function(e,t,i){b8e.TweenGroup=b8e.EventDispatcher.extends({ctor:function(){this._super(),this.completeCount=0},items:{get:function(){return this._items},set:function(e){this.completeCount=0,this.registerEvent(!1),this._items=e,this.registerEvent(!0)}},registerEvent:function(t){var i=this;this._items&&this._items.forEach(function(e){t?e.addEventListener("complete",i.itemComplete,i):e.removeEventListener("complete",i.itemComplete,i)})},play:function(){if(this._items)for(var e=0,t=this._items.length;e<t;e++)this._items[e].play()},pause:function(){if(this._items)for(var e=0,t=this._items.length;e<t;e++)this._items[e].pause()},itemComplete:function(e){var t=e.currentTarget;this.completeCount++,this.dispatchEventWith("itemComplete",t),this.completeCount===this.items.length&&(this.dispatchEventWith("complete"),this.completeCount=0)}})},{}],97:[function(e,t,i){b8e.TweenItem=b8e.Object.extends({ctor:function(){this._super()},props:{get:function(){return this._props},set:function(e){this._props=e}},target:{get:function(){return this._target},set:function(e){this._target=e}},paths:{get:function(){return this._paths},set:function(e){this._paths=e||[]}},play:function(){this.tween?this.tween.setPaused(!1):this.createTween()},pause:function(){this.tween&&this.tween.setPaused(!0)},createTween:function(){this.tween=b8e.Tween.get(this._target,this._props),this._paths&&this.applyPaths()},applyPaths:function(){for(var e=0,t=this._paths.length;e<t;e++){var i=this._paths[e];this.applyPath(i)}},applyPath:function(e){var t=this;e instanceof To?this.tween.to(e.props,e.duration,b8e.Ease.convertEase(e.ease)):e instanceof Wait?this.tween.wait(e.duration,e.passive):e instanceof Set?this.tween.set(e.props):e instanceof Tick&&this.tween.tick(e.delta),this.tween.call(function(){return t.pathComplete(e)})},pathComplete:function(e){e.dispatchEventWith("complete"),this.dispatchEventWith("pathComplete",e);var t=this._paths.indexOf(e);0<=t&&t===this._paths.length-1&&this.dispatchEventWith("complete")}})},{}],98:[function(e,t,i){b8e.TweenSet=b8e.TweenBasePath.extends({ctor:function(){this._super(),this.props=void 0}})},{}],99:[function(e,t,i){b8e.TweenTick=b8e.TweenBasePath.extends({ctor:function(){this._super(),this.delta=0}})},{}],100:[function(e,t,i){b8e.TweenTo=b8e.TweenBasePath.extends({ctor:function(){this._super(),this.props=void 0,this.duration=500,this.ease=void 0}})},{}],101:[function(e,t,i){b8e.TweenWait=b8e.TweenBasePath.extends({ctor:function(){this._super(),this.duration=500,this.passive=void 0}})},{}],102:[function(e,t,i){var u=b8e.BufferUtil=function(){};u.str2Uint8Array=function(e){if(!e)return null;for(var t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=255&e.charCodeAt(i);return t},u.buffer2Uint8Array=function(e){return e?new Uint8Array(e):null},u.EOF_byte=-1,u.EOF_code_point=-1,u.stringToCodePoints=function(e){for(var t=[],i=0,n=e.length;i<e.length;){var s=e.charCodeAt(i);if(u.inRange(s,55296,57343))if(u.inRange(s,56320,57343))t.push(65533);else if(i==n-1)t.push(65533);else{var r=e.charCodeAt(i+1);if(u.inRange(r,56320,57343)){var o=1023&s,a=1023&r;i+=1,t.push(65536+(o<<10)+a)}else t.push(65533)}else t.push(s);i+=1}return t},u.inRange=function(e,t,i){return t<=e&&e<=i},u.div=function(e,t){return e/t>>0},u.encoderError=function(e){},u.decoderError=function(e,t){return t||65533},u.encodeUTF8=function(e){for(var t=0,i=u.stringToCodePoints(e),n=[];i.length>t;){var s=i[t++];if(u.inRange(s,55296,57343))u.encoderError(s);else if(u.inRange(s,0,127))n.push(s);else{var r,o;for(u.inRange(s,128,2047)?(r=1,o=192):u.inRange(s,2048,65535)?(r=2,o=224):u.inRange(s,65536,1114111)&&(r=3,o=240),n.push(u.div(s,Math.pow(64,r))+o);0<r;){var a=u.div(s,Math.pow(64,r-1));n.push(128+a%64),r-=1}}}return new Uint8Array(n)},u.decodeUTF8=function(e){for(var t,i=0,n="",s=0,r=0,o=0,a=0;e.length>i;){var l=e[i++];if(l==u.EOF_byte)t=0!=r?u.decoderError(!1):u.EOF_code_point;else if(0==r)u.inRange(l,0,127)?t=l:(u.inRange(l,194,223)?(r=1,a=128,s=l-192):u.inRange(l,224,239)?(r=2,a=2048,s=l-224):u.inRange(l,240,244)?(r=3,a=65536,s=l-240):u.decoderError(!1),s*=Math.pow(64,r),t=null);else if(u.inRange(l,128,191))if(o+=1,s+=(l-128)*Math.pow(64,r-o),o!==r)t=null;else{var h=s,c=a;a=o=r=s=0,t=u.inRange(h,c,1114111)&&!u.inRange(h,55296,57343)?h:u.decoderError(!1,l)}else a=o=r=s=0,i--,t=u.decoderError(!1,l);null!==t&&t!==u.EOF_code_point&&(t<=65535?0<t&&(n+=String.fromCharCode(t)):(t-=65536,n+=String.fromCharCode(55296+(t>>10&1023)),n+=String.fromCharCode(56320+(1023&t))))}return n}},{}],103:[function(e,t,i){var n=b8e.CallBackUtil=function(){};n.addCallBackData=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;if("function"==typeof t){var s=e.get(t,i);s?s.args=n:((s=b8e.CallBackData.get()).callback=t,s.thisArg=i,s.args=n,e.set(t,s,i))}else b8e.error("回调参数不是一个有效的方法！")},n.exceteCallBackData=function(n,e,s){e.forEach(function(e,t){if(t&&null!=t.callback){var i=[];i=t.args?[n].concat(t.args):[n],i=s?i.concat(s):i,t.callback.apply(t.thisArg,i)}},this,!0)},n.removeCallBackData=function(e,t,i){if("function"==typeof t){var n=e.get(t,i);n&&(b8e.CallBackData.put(n),e.del(t,i))}else b8e.error("回调参数不是一个有效的方法！")},n.removeAllCallBackData=function(e){e.forEach(function(e,t){t&&b8e.CallBackData.put(t)},this,!0),e.clear()}},{}],104:[function(e,t,i){var c=b8e.ColorUtil=function(){};c.RED=16711680,c.GREEN=65280,c.BLUE=255,c.YELLOW=16776960,c.FUCHSIZA=16711935,c.AQUA=65535,c.BLACK=0,c.WHILE=16777215,c.GRAY=8421504,c.ORANGE=16737792,c.getAlpha=function(e){return e>>24&255},c.getRed=function(e){return e>>16&255},c.getGreen=function(e){return e>>8&255},c.getBlue=function(e){return 255&e},c.rgb=function(e,t,i){return e<<16|t<<8|i},c.argb=function(e,t,i,n){return e<<24|t<<16|i<<8|n},c.RYB=function(e,t,i){return 255-i<<16|255-e<<8|255-t},c.getChannel=function(e,t){switch(t){case c.RED:return e>>16&255;case c.GREEN:return e>>8&255;case c.BLUE:return 255&e}return 0},c.getColorTransform=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new ColorTransform((e>>16&255)/255,(e>>8&255)/255,(255&e)/255,t)},c.getColorTransform2=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new ColorTransform(1,1,1,1,e>>16&255*t,e>>8&255*t,e&255*t)},c.adjustColor=function(e,t,i){var n,s,r;return n=(c.RED&e)==e?Math.max(Math.min((t>>16&255)+i,255),0):t>>16&255,s=(c.GREEN&e)==e?Math.max(Math.min((t>>8&255)+i,255),0):t>>8&255,r=(c.BLUE&e)==e?Math.max(Math.min((255&t)+i,255),0):255&t,c.rgb(n,s,r)},c.adjustBrightness=function(e,t){var i=Math.max(Math.min((e>>16&255)+t,255),0),n=Math.max(Math.min((e>>8&255)+t,255),0),s=Math.max(Math.min((255&e)+t,255),0);return c.rgb(i,n,s)},c.adjustBrightness2=function(e,t){var i,n,s;return 0==t?e:(t<0?(i=(e>>16&255)*(t=(100+t)/100),n=(e>>8&255)*t,s=(255&e)*t):(i=e>>16&255,n=e>>8&255,s=255&e,i+=(255-i)*(t/=100),n+=(255-n)*t,s+=(255-s)*t,i=Math.min(i,255),n=Math.min(n,255),s=Math.min(s,255)),c.rgb(i,n,s))},c.rgbMultiply=function(e,t){return(e>>16&255)*(t>>16&255)/255<<16|(e>>8&255)*(t>>8&255)/255<<8|(255&e)*(255&t)/255},c.getPaletteArray=function(e,t,i){var n=new Matrix;n.createGradientBox(256,1);var s=new Shape;s.graphics.beginGradientFill(GradientType.LINEAR,e,t,i,n),s.graphics.drawRect(0,0,256,1),s.graphics.endFill();var r=new BitmapData(256,1);r.draw(s);for(var o=[],a=0;a<256;a++)o.push(r.getPixel(a,0));return r.dispose(),o},c.getColorBetween=function(e,t,i){var n=e>>16&255,s=e>>8&255,r=255&e;return n+((t>>16&255)-n)*i<<16|s+((t>>8&255)-s)*i<<8|r+((255&t)-r)*i},c.getColorAtPoint=function(e,t,i){var n=new BitmapData(1,1),s=new Matrix;return s.translate(-t,-i),n.draw(e,s),n.getPixel(0,0)},c.getColorString=function(e){return"#"+e.toString(16)},c.lightUp=function(e,t){var i=(255&e)+t&16777215,n=(e>>8&255)+t&16777215,s=(e>>16)+t&16777215;return(i=255<i?255:i)<<16|(n=255<n?255:n)<<8|(s=255<s?255:s)},c.fromCYM=function(e){return(e>>24&255)<<24|255-(255&e)<<16|255-(e>>16&255)<<8|255-(e>>8&255)},c.toCYM=function(e){return(e>>24&255)<<24|255-(e>>8&255)<<16|255-(255&e)<<8|255-(e>>16&255)},c.fromHSL=function(e){var t,i,n,s,r,o=(e>>24&255)/255,a=(e>>16&255)/255,l=(e>>8&255)/255,h=(255&e)/255;return 0==l?t=i=n=h:(s=2*h-(r=h<.5?h*(1+l):h+l-l*h),t=c.Hue2RGB(s,r,a+1/3),i=c.Hue2RGB(s,r,a),n=c.Hue2RGB(s,r,a-1/3)),255*o<<24|255*t<<16|255*i<<8|255*n},c.Hue2RGB=function(e,t,i){return i<0&&(i+=1),1<i&&(i-=1),6*i<1?e+6*(t-e)*i:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e},c.toHSL=function(e){var t,i,n=(e>>24&255)/255,s=(e>>16&255)/255,r=(e>>8&255)/255,o=(255&e)/255,a=Math.min(s,Math.min(r,o)),l=Math.max(s,Math.max(r,o)),h=(l+a)/2,c=l-a;if(0==c)t=i=0;else{i=h<.5?c/(l+a):c/(2-l-a);var u=((l-s)/6+c/2)/c,d=((l-r)/6+c/2)/c,f=((l-o)/6+c/2)/c;s==l?t=f-d:r==l?t=1/3+u-f:o==l&&(t=2/3+d-u),t<0&&(t+=1),1<t&&(t-=1)}return 255*n<<24|255*t<<16|255*i<<8|255*h},c.toRGB=function(e){return[e>>16,e>>8&255,255&e]},c.toDec=function(e){return null==e||3!=e.length||e[0]<0||255<e[0]||e[1]<0||255<e[1]||e[2]<0||255<e[2]?16777215:e[0]<<16|e[1]<<8|e[2]},c.ratioColor=function(e,t,i){i<0?i=0:1<i&&(i=1);var n=c.toRGB(e),s=c.toRGB(t),r=n[0]+(s[0]-n[0])*i,o=n[1]+(s[1]-n[1])*i,a=n[2]+(s[2]-n[2])*i;return c.toDec([r,o,a])},c.ratioColorTransform=function(e,t,i){return[Number(e[0])+(Number(t[0])-Number(e[0]))*i,Number(e[1])+(Number(t[1])-Number(e[1]))*i,Number(e[2])+(Number(t[2])-Number(e[2]))*i,Number(e[3])+(Number(t[3])-Number(e[3]))*i]},c.toCCColor=function(e){if(e instanceof cc.Color)return e;var t=e>>24&255,i=e>>16&255,n=e>>8&255,s=255&e;return new cc.Color({r:i,g:n,b:s,a:t})}},{}],105:[function(e,t,i){b8e.CommonUtil=function(){},b8e.CommonUtil.xyToInt=function(e,t){return"number"!=typeof e&&(b8e.error("参数错误：x必须是数字类型！"),e=0),e<0?(b8e.error("参数错误：x不能小于零（介于0和32767之间的16位无符号整数）！"),e=0):32767<e&&(b8e.error("参数错误：x不能大于32767（介于0和32767之间的16位无符号整数）！"),e=32767),"number"!=typeof t&&(b8e.error("参数错误：y必须是数字类型！"),e=0),t<0?(b8e.error("参数错误：y不能小于零（介于0和65535之间的16位无符号整数）！"),t=0):65535<t&&(b8e.error("参数错误：y不能大于65535（介于0和65535之间的16位无符号整数）！"),t=65535),e<<16|t},b8e.CommonUtil.getXFromInt=function(e){return e<0?(b8e.error("参数错误：获取x分量的值不能小于零（介于0和2147418112之间的32位无符号整数）！"),e=0):2147418112<e&&(b8e.error("参数错误：获取x分量的值不能大于2147418112（介于0和2147418112之间的32位无符号整数）！"),e=2147418112),e>>16},b8e.CommonUtil.getYFromInt=function(e){return e<0?(b8e.error("参数错误：获取y分量的值不能小于零（介于0和2147418112之间的32位无符号整数）！"),e=0):2147418112<e&&(b8e.error("参数错误：获取y分量的值不能大于2147418112（介于0和2147418112之间的32位无符号整数）！"),e=2147418112),65535&e},b8e.CommonUtil.xyToNumber=function(e,t){return 4294967296*(e>>>0)+(t>>>0)},b8e.CommonUtil.getXFromNumber=function(e){return e/4294967296|0},b8e.CommonUtil.getYFromNumber=function(e){return e%4294967296|0},b8e.CommonUtil.bytesToString=function(e){return e<1024?e+"b":e<10240?(e/1024).toFixed(2)+"kb":e<102400?(e/1024).toFixed(1)+"kb":e<1048576?(e>>10)+"kb":e<10485760?(e/1048576).toFixed(2)+"mb":e<104857600?(e/1048576).toFixed(1)+"mb":String(e>>20)+"mb"},b8e.CommonUtil._noCacheRex=/\?/,b8e.CommonUtil.urlAppendTimestamp=function(e){return"string"==typeof e&&(b8e.CommonUtil._noCacheRex.test(e)?e+="&_t="+(new Date-0):e+="?_t="+(new Date-0)),e},b8e.CommonUtil.convertToGL=function(e){var t=cc.director.getWinSize();return{x:e.x,y:t.height-e.y}},b8e.CommonUtil.convertToUI=function(e){var t=cc.director.getWinSize();return{x:e.x,y:t.height-e.y}},b8e.CommonUtil.getDirectionByAngle=function(e){return(e=(e+360)%360)<23||338<=e?{x:1,y:0}:23<=e&&e<68?{x:1,y:1}:68<=e&&e<113?{x:0,y:1}:113<=e&&e<158?{x:-1,y:1}:158<=e&&e<203?{x:-1,y:0}:203<=e&&e<248?{x:-1,y:-1}:248<=e&&e<293?{x:0,y:-1}:293<=e&&e<338?{x:1,y:-1}:{x:0,y:0}},b8e.CommonUtil.getDirectionByRadian=function(e){return e<-Math.PI*(7/8)||e>=Math.PI*(7/8)?{x:-1,y:0}:e>=-Math.PI*(7/8)&&e<-Math.PI*(5/8)?{x:-1,y:-1}:e>=-Math.PI*(5/8)&&e<-Math.PI*(3/8)?{x:0,y:-1}:e>=-Math.PI*(3/8)&&e<-Math.PI*(1/8)?{x:1,y:-1}:e>=-Math.PI*(1/8)&&e<Math.PI*(1/8)?{x:1,y:0}:e>=Math.PI*(1/8)&&e<Math.PI*(3/8)?{x:1,y:1}:e>=Math.PI*(3/8)&&e<Math.PI*(5/8)?{x:0,y:1}:e>=Math.PI*(5/8)&&e<Math.PI*(7/8)?{x:-1,y:1}:{x:0,y:0}},b8e.CommonUtil.getRadianByDirection=function(e){if(!e)return 0;var t=e.x,i=e.y;return-1==t&&0==i?-Math.PI:-1==t&&-1==i?.75*-Math.PI:0==t&&-1==i?.5*-Math.PI:1==t&&-1==i?.25*-Math.PI:1==t&&0==i?0:1==t&&1==i?.25*Math.PI:0==t&&1==i?.5*Math.PI:-1==t&&1==i?.75*Math.PI:0},b8e.CommonUtil.getAngleByDirection=function(e){if(!e)return 0;var t=e.x,i=e.y,n=0;return-1==t&&0==i?n=180:-1==t&&-1==i?n=-135:0==t&&-1==i?n=-90:1==t&&-1==i?n=-45:1==t&&0==i?n=0:1==t&&1==i?n=45:0==t&&1==i?n=90:-1==t&&1==i&&(n=135),(n+360)%360},b8e.CommonUtil.convertToStageSpace=function(e,t){e instanceof b8e.BaseDisplay&&(e=e.getNode()),t||(t=e.getAnchorPointInPoints());var i=e.convertToWorldSpace(cc.v2(t.x,t.y));return i.x-=b8e.stage.x,i.y-=b8e.stage.y,i}},{}],106:[function(e,t,i){var _=b8e.evt=b8e.EventUtil=function(){};_.instancesMap=b8e.HashMap.get(),_.instances=[],_.KEY=0,_.DISPATHCH=1,_.EVENT=2,_.FUNCTION=3,_.USECAPTURE=4,_.PRIORITY=5,_.USEWEAKREFERENCE=6,_.addEvent=function(e,t,i,n){var s=4<arguments.length&&void 0!==arguments[4]&&arguments[4],r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=6<arguments.length&&void 0!==arguments[6]&&arguments[6];t&&e&&i&&n||b8e.error("添加事件监听参数缺少:",_.addEvent.arguments),t.addEventListener(i,n,e,s,r,o),_.instances.push([e,t,i,n,s,r,o])},_.addOnceEvent=function(i,n,s,r){var o=4<arguments.length&&void 0!==arguments[4]&&arguments[4],e=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,t=6<arguments.length&&void 0!==arguments[6]&&arguments[6];_.addEvent(i,n,s,r,o,e,t),_.addEvent(i,n,s,function e(t){_.removeEvent(i,n,s,e,o),_.removeEvent(i,n,s,r,o)},o,e,t)},_.removeEvent=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=4<arguments.length&&void 0!==arguments[4]&&arguments[4];if(e){var r,o,a,l,h=_.instancesMap,c=0,u=!0;t&&(c|=4),i&&(c|=2),n&&(c|=1);var d,f,g=function(){switch(u=!0,c){case 0:r[_.DISPATHCH].removeEventListener(r[_.EVENT],r[_.FUNCTION],e,r[_.USECAPTURE]);break;case 1:r[_.FUNCTION]==n?r[_.DISPATHCH].removeEventListener(r[_.EVENT],r[_.FUNCTION],e,r[_.USECAPTURE]):u=!1;break;case 2:r[_.EVENT]==i?r[_.DISPATHCH].removeEventListener(r[_.EVENT],r[_.FUNCTION],e,r[_.USECAPTURE]):u=!1;break;case 3:r[_.EVENT]==i&&r[_.FUNCTION]==n?r[_.DISPATHCH].removeEventListener(r[_.EVENT],r[_.FUNCTION],e,r[_.USECAPTURE]):u=!1;break;case 4:r[_.DISPATHCH]==t?r[_.DISPATHCH].removeEventListener(r[_.EVENT],r[_.FUNCTION],e,r[_.USECAPTURE]):u=!1;break;case 5:r[_.DISPATHCH]==t&&r[_.FUNCTION]==n?r[_.DISPATHCH].removeEventListener(r[_.EVENT],r[_.FUNCTION],e,r[_.USECAPTURE]):u=!1;break;case 6:r[_.DISPATHCH]==t&&r[_.EVENT]==i?r[_.DISPATHCH].removeEventListener(r[_.EVENT],r[_.FUNCTION],e,r[_.USECAPTURE]):u=!1;break;case 7:r[_.DISPATHCH]==t&&r[_.EVENT]==i&&r[_.FUNCTION]==n?r[_.DISPATHCH].removeEventListener(i,n,e,s):u=!1}};if(o=h.get(e,_)){for(f=(d=o.length)-1;0<=f;f--)r=o[f],g(),u&&o.splice(f,1);o.length||h.del(e,_)}for(d=(o=_.instances).length,o=o.reverse(),f=d-1;0<=f;f--)(r=o[f])[_.KEY]==e?g():u=!1,u?o.pop():a==r[_.KEY]?l.push(o.pop()):(a=o[o.length-1][_.KEY],(l=h.get(a,_))?l.push(o.pop()):(l=[o.pop()],h.set(r[_.KEY],l,_)))}else b8e.error("监听者参数不能为空！",_.removeEvent.arguments)},_.globalDispatcher=new b8e.EventDispatcher,_.addG=_.addGlobalEvent=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,r=5<arguments.length&&void 0!==arguments[5]&&arguments[5];_.addEvent(e,_.globalDispatcher,t,i,n,s,r)},_.addGO=_.addGlobalOnceEvent=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,r=5<arguments.length&&void 0!==arguments[5]&&arguments[5];_.addOnceEvent(e,_.globalDispatcher,t,i,n,s,r)},_.rmvG=_.removeGlobalEvent=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];_.removeEvent(e,_.globalDispatcher,t,i,n)},_.dptG=_.dispatchGlobalEvent=function(e,t,i,n){_.globalDispatcher.dispatchEventWith(e,t,i,n)},_.touchEventCallback=null,_.setTouchEventCallback=function(e,t){_.touchEventCallback={callback:e,thisArg:t}},_.ccEvents=b8e.HashMap.get(),_.onCCEvent=function(i,n,e,s){var t=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,r=i instanceof cc.Node?i:i instanceof b8e.BaseDisplay?i.getNode():null;if(r instanceof cc.Node){var o,a=null,l=null,h=null,c=_.ccEvents.get(r,_);if(c||(c=b8e.HashMap.get(),_.ccEvents.set(r,c,_)),a=c.get(n)){if(h=a.callbackMap,o=h.get(e,s))return void b8e.warn("重复注册CC事件处理！",n,e)}else{l=[];var u=function(e){e.target=i,e.stopPropagation();for(var t=l.length-1;0<=t;t--)(o=l[t])&&o.callback?o.callback.call(o.thisArg,e):b8e.error("obj or callback 不存在？");b8e.SoundMgr.AUTOPLAY&&!b8e.SoundMgr._emptyPlayed&&(b8e.sound.playEffectSound(b8e.SoundMgr.EFFECT_SOUND_DIR+"/empty.mp3"),b8e.SoundMgr._emptyPlayed=!0),_.touchEventCallback&&_.touchEventCallback.callback.call(_.touchEventCallback.thisArg,s,i,n)};r.on(n,u,_),a={type:n,handler:u,callbacks:l,callbackMap:b8e.HashMap.get()},c.set(n,a)}l=a.callbacks,h=a.callbackMap;var d=b8e.CallBackData.get();if(d.callback=e,d.thisArg=s,d.data={priority:t},h.set(e,d,s),0==t)l.unshift(d);else{for(var f=l.length,g=0;g<f;g++)if(t<l[g].data.priority)return void l.splice(g,0,d);l.unshift(d)}}else b8e.error("注册事件的节点不是有效的！",i)},_.offCCEvent=function(e,t,i,n){var s=e instanceof cc.Node?e:e instanceof b8e.BaseDisplay?e.getNode():null;if(s instanceof cc.Node){var r=_.ccEvents.get(s,_);if(r){var o=r.get(t);if(o&&o.type===t){var a=o.callbacks,l=o.callbackMap,h=l.get(i,n);if(h){b8e.CallBackData.put(h),l.del(i,n);var c=a.indexOf(h);if(-1<c&&(a.splice(c,1),a.length<1)){l.release();var u=o.handler;r.del(t),s.off(t,u,_),r.count()<1&&(r.release(),_.ccEvents.del(s,_))}}else b8e.warn("注意：试图取消不存在的事件回调！"+t,i)}}else b8e.warn("注意：试图取消不存在的目标事件！"+t,i)}else b8e.error("注册事件的节点不是有效的！",e)},_.offAllEvent=function(e,t){var i=e instanceof cc.Node?e:e instanceof b8e.BaseDisplay?e.getNode():null;if(i instanceof cc.Node){var n=_.ccEvents.get(i,_);if(n){var s=n.get(t);if(s&&s.type===t){var r=s.handler;s.callbacks.length=0;var o=s.callbackMap;o.forEach(function(e,t){b8e.CallBackData.put(t)},this),o.release(),n.del(t),i.off(t,r,_),n.count()<1&&(n.release(),_.ccEvents.del(i,_))}}}else b8e.error("注册事件的节点不是有效的！",e)},_.onC=_.onClickEvent=_.onTouchEnd=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_.onCCEvent(e,cc.Node.EventType.TOUCH_END,t,i,n)},_.offC=_.offClickEvent=_.offTouchEnd=function(e,t,i){_.offCCEvent(e,cc.Node.EventType.TOUCH_END,t,i)},_.offAllClickEvent=_.offAllTouchEnd=function(e){_.offAllEvent(e,cc.Node.EventType.TOUCH_END)},_.onTouchStart=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_.onCCEvent(e,cc.Node.EventType.TOUCH_START,t,i,n)},_.offTouchStart=function(e,t,i){_.offCCEvent(e,cc.Node.EventType.TOUCH_START,t,i)},_.onTouchMove=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_.onCCEvent(e,cc.Node.EventType.TOUCH_MOVE,t,i,n)},_.offTouchMove=function(e,t,i){_.offCCEvent(e,cc.Node.EventType.TOUCH_MOVE,t,i)},_.onTouchCancel=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_.onCCEvent(e,cc.Node.EventType.TOUCH_CANCEL,t,i,n)},_.offTouchCancel=function(e,t,i){_.offCCEvent(e,cc.Node.EventType.TOUCH_CANCEL,t,i)},_.onMouseDown=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_.onCCEvent(e,cc.Node.EventType.MOUSE_DOWN,t,i,n)},_.offMouseDown=function(e,t,i){_.offCCEvent(e,cc.Node.EventType.MOUSE_DOWN,t,i)},_.onMouseMove=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_.onCCEvent(e,cc.Node.EventType.MOUSE_MOVE,t,i,n)},_.offMouseMove=function(e,t,i){_.offCCEvent(e,cc.Node.EventType.MOUSE_MOVE,t,i)},_.onMouseEnter=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_.onCCEvent(e,cc.Node.EventType.MOUSE_ENTER,t,i,n)},_.offMouseEnter=function(e,t,i){_.offCCEvent(e,cc.Node.EventType.MOUSE_ENTER,t,i)},_.onMouseLeave=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_.onCCEvent(e,cc.Node.EventType.MOUSE_LEAVE,t,i,n)},_.offMouseLeave=function(e,t,i){_.offCCEvent(e,cc.Node.EventType.MOUSE_LEAVE,t,i)},_.onMouseUp=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_.onCCEvent(e,cc.Node.EventType.MOUSE_UP,t,i,n)},_.offMouseUp=function(e,t,i){_.offCCEvent(e,cc.Node.EventType.MOUSE_UP,t,i)},_.onMouseWheel=function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;_.onCCEvent(e,cc.Node.EventType.MOUSE_WHEEL,t,i,n)},_.offMouseWheel=function(e,t,i){_.offCCEvent(e,cc.Node.EventType.MOUSE_WHEEL,t,i)}},{}],107:[function(e,t,i){var l="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)},n=b8e.HashMap=b8e.Object.extends({_isRecycled:!1,_isDisposed:!1,ctor:function(){this._super(),this.constructor===n&&(n.poolCall||b8e.warn("强烈建议用engine.HashMap.get代替new操作！")),this._count=0,this._isRecycled=!1,this._isDisposed=!1},set:function(e,t,i){if(null!=e){var n=void 0===e?"undefined":l(e);if("function"==n)if(i){if(this._funcMaps||(this._funcMaps={}),i.__hashCode||(i.__hashCode=b8e.ClassMgr.getInstHash()),e.__funcCode||(e.__funcCode={}),!e.__funcCode[i.__hashCode]){var s=b8e.ClassMgr.getFuncHash(i.__hashCode);e.__funcCode[i.__hashCode]=s}var r=e;e=b8e.CommonUtil.xyToNumber(i.__hashCode,e.__funcCode[i.__hashCode]),this._funcMaps[e]||this._count++,this._funcMaps[e]=[r,t,i]}else null===i?(e.__hashCode||(e.__hashCode=b8e.ClassMgr.getFuncHash()),e.__hashCode&&(this._hashMaps||(this._hashMaps={}),this._hashMaps[e.__hashCode]||this._count++,this._hashMaps[e.__hashCode]=[e,t])):b8e.error("set:key为方法时，thisArg参数非法！");else if("object"==n)if(i){if(i.__hashCode||(i.__hashCode=b8e.ClassMgr.getInstHash()),e.__instCode||(e.__instCode={}),(s=e.__instCode[i.__hashCode])||(s=b8e.ClassMgr.getInstHash(i.__hashCode),e.__instCode[i.__hashCode]=s),s){this._hashMaps||(this._hashMaps={});var o=e;e=b8e.CommonUtil.xyToNumber(i.__hashCode,s),this._hashMaps[e]||this._count++,this._hashMaps[e]=[o,t,i]}}else null===i?(e.__hashCode||(e.__hashCode=b8e.ClassMgr.getInstHash()),e.__hashCode&&(this._hashMaps||(this._hashMaps={}),this._hashMaps[e.__hashCode]||this._count++,this._hashMaps[e.__hashCode]=[e,t])):b8e.error("set:key为对象时，thisArg参数非法！");else this._maps||(this._maps={}),this._maps[e]||this._count++,this._maps[e]=t}else b8e.error("HashMap->set参数key非法！",e)},del:function(e,t){if(null!=e){var i=void 0===e?"undefined":l(e);if("function"==i)if(t){if(t.__hashCode&&e.__funcCode&&e.__funcCode[t.__hashCode]){var n=this._funcMaps;n&&void 0!==n[e=b8e.CommonUtil.xyToNumber(t.__hashCode,e.__funcCode[t.__hashCode])]&&(delete n[e],this._count--)}}else if(null===t){if(e.__hashCode){var s=this._hashMaps;s&&void 0!==s[e.__hashCode]&&(delete s[e.__hashCode],this._count--)}}else b8e.error("del:key为方法时，thisArg参数非法！");else if("object"==i){var r=this._hashMaps;t?t.__hashCode&&e.__instCode&&e.__instCode[t.__hashCode]&&r&&void 0!==r[e=b8e.CommonUtil.xyToNumber(t.__hashCode,e.__instCode[t.__hashCode])]&&(delete r[e],this._count--):null===t?e.__hashCode&&r&&void 0!==r[e.__hashCode]&&(delete r[e.__hashCode],this._count--):b8e.error("del:key为对象时，thisArg参数非法！")}else{var o=this._maps;o&&void 0!==o[e]&&(delete o[e],this._count--)}}else b8e.error("HashMap->del参数key非法！",e)},get:function(e,t){if(null!=e){var i=void 0,n=void 0===e?"undefined":l(e);if("function"==n)if(t){if(t.__hashCode&&e.__funcCode&&e.__funcCode[t.__hashCode]){var s=this._funcMaps;s&&void 0!==(i=s[e=b8e.CommonUtil.xyToNumber(t.__hashCode,e.__funcCode[t.__hashCode])])&&(i=i[1])}}else if(null===t){if(e.__hashCode){var r=this._hashMaps;r&&void 0!==(i=r[e.__hashCode])&&(i=i[1])}}else b8e.error("get:key为方法时，thisArg参数非法！");else if("object"==n){var o=this._hashMaps;t?t.__hashCode&&e.__instCode&&e.__instCode[t.__hashCode]&&o&&void 0!==(i=o[e=b8e.CommonUtil.xyToNumber(t.__hashCode,e.__instCode[t.__hashCode])])&&(i=i[1]):null===t?e.__hashCode&&o&&void 0!==(i=o[e.__hashCode])&&(i=i[1]):b8e.error("get:key为对象时，thisArg参数非法！")}else{var a=this._maps;a&&(i=a[e])}return i}b8e.error("HashMap->get参数key非法！",e)},has:function(e,t){if(null==e)return b8e.error("HashMap->has参数key非法！",e),!1;var i=void 0===e?"undefined":l(e);if("function"==i)if(t){if(t.__hashCode&&e.__funcCode&&e.__funcCode[t.__hashCode]){var n=this._funcMaps;if(n)return void 0!==n[e=b8e.CommonUtil.xyToNumber(t.__hashCode,e.__funcCode[t.__hashCode])]}}else if(null===t){if(e.__hashCode){var s=this._hashMaps;if(s)return void 0!==s[e.__hashCode]}}else b8e.error("has:key为方法时，thisArg参数非法！");else if("object"==i){var r=this._hashMaps;if(t){if(t.__hashCode&&e.__instCode&&e.__instCode[t.__hashCode]&&r)return void 0!==r[e=b8e.CommonUtil.xyToNumber(t.__hashCode,e.__instCode[t.__hashCode])]}else if(null===t){if(e.__hashCode&&r)return void 0!==r[e.__hashCode]}else b8e.error("has:key为对象时，thisArg参数非法！")}else{var o=this._maps;if(o)return void 0!==o[e]}return!1},count:function(){return this._count},forEach:function(e,t){2<arguments.length&&void 0!==arguments[2]&&arguments[2];var i,n,s=this._funcMaps;if(s)for(i in s)n=s[i],e.call(t,n[0],n[1],n[2]);var r=this._maps;if(r)for(i in r)e.call(t,i,r[i]);var o=this._hashMaps;if(o)for(i in o)n=o[i],e.call(t,n[0],n[1],n[2])},every:function(e,t){2<arguments.length&&void 0!==arguments[2]&&arguments[2];var i,n,s=!1;if(!s){var r=this._funcMaps;if(r)for(i in r)if(n=r[i],!e.call(t,n[0],n[1],n[2])){s=!0;break}}if(!s){var o=this._maps;if(o)for(i in o)if(!e.call(t,i,o[i])){s=!0;break}}if(!s){var a=this._hashMaps;if(a)for(i in a)if(n=a[i],!e.call(t,n[0],n[1],n[2])){s=!0;break}}},elements:function(){var e,t,i=[],n=this._funcMaps;if(n)for(e in n)t=n[e],i.push({key:t[0],data:t[1],thisArg:t[2]});var s=this._maps;if(s)for(e in s)i.push({key:e,data:s[e]});var r=this._hashMaps;if(r)for(e in r)t=r[e],i.push({key:t[0],data:t[1],thisArg:t[2]});return i},keys:function(){var e,t,i=[],n=this._funcMaps;if(n)for(e in n)t=n[e],i.push(t[0]);var s=this._maps;if(s)for(e in s)i.push(e);var r=this._hashMaps;if(r)for(e in r)t=r[e],i.push(t[0]);return i},values:function(){var e,t,i=[],n=this._funcMaps;if(n)for(e in n)t=n[e],i.push(t[1]);var s=this._maps;if(s)for(e in s)i.push(s[e]);var r=this._hashMaps;if(r)for(e in r)t=r[e],i.push(t[1]);return i},clear:function(){this._maps&&(this._maps={}),this._hashMaps&&(this._hashMaps={}),this._funcMaps&&(this._funcMaps={}),this._count=0},usable:{get:function(){return!this._isRecycled&&!this._isDisposed}},isRecycled:{get:function(){return this._isRecycled}},isDisposed:{get:function(){return this._isDisposed}},restore:function(){this._isRecycled=!1,this.clear()},recycle:function(){this.clear(),this._isRecycled=!0},release:function(){this.constructor===n?n.put(this):this.destroy()},dispose:function(){this.clear(),this._maps=null,this._hashMaps=null,this._funcMaps=null,this._isRecycled=!1,this._isDisposed=!0},destroy:function(){this.constructor===n&&(n.poolCall||b8e.warn("强烈建议用engine.HashMap.put或release代替destroy操作！")),this.recycle(),this.dispose()},dump:function(){var e,t,i=this._funcMaps;if(i)for(e in i)t=i[e],b8e.log("key:",t[0],"---\x3e data:",t[1]);var n=this._maps;if(n)for(e in n)b8e.log("key:",e,"---\x3e data:",n[e]);var s=this._hashMaps;if(s)for(e in s)t=s[e],b8e.log("key:",t[0],"---\x3e data:",t[1])}});n.pool=new b8e.Pool(n,1024),n.get=function(){return n.pool.get()},n.put=function(e){return n.pool.put(e)}},{}],108:[function(e,t,i){var l="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)},h={desc:{writable:!0,enumerable:!1,configurable:!0},installOb:function(e){var t,i,n,s,r=e.prototype,o=e.__props,a=(o.length,h.desc);for(t in o)(i=o[t])&&"object"===(void 0===i?"undefined":l(i))&&(i.set||i.get)||"function"!=typeof i&&-1==t.indexOf("__")&&(n=function(t,e){return function(e){this.__values__||(this.__values__={}),(void 0===this.__values__[t]?o[t]:this.__values__[t])!=e&&((this.__values__[t]=e)&&e.__installOb__&&(this.__observers__||(this.__observers__=[]),(e.__owner__=this).__observers__.push(e)),this.__owner__&&this.__owner__.dirty(),!this.__selfDirty&&this.__owner__||this.dirty())}}(t),s=function(e){return function(){return this.__values__&&void 0!==this.__values__[e]?this.__values__[e]:o[e]}}(t),b8e.JsUtil.defineGetSetAccessor(r,t,s,n,!0));a.value=!0,Object.defineProperty(r,"__installOb__",a),a.value=!1,Object.defineProperty(r,"__isDirty",a),a.value=null,Object.defineProperty(r,"__owner__",a),a.value=null,Object.defineProperty(r,"__observers__",a),a.value=!1,Object.defineProperty(r,"__selfDirty",a),a.value=function(){this.__isDirty||(this.__isDirty=!0,this.__owner__&&this.__owner__.dirty(),!this.__selfDirty&&this.__owner__||b8e.obMgr.notify(this))},Object.defineProperty(r,"dirty",a),a.value=function(){if(0!=this.__isDirty&&(this.__isDirty=!1,this.__observers__))for(var e=0,t=this.__observers__.length;e<t;e++)this.__observers__[e].notify()},Object.defineProperty(r,"notify",a)}};b8e.InstallUtil=h},{}],109:[function(e,t,i){b8e.JsUtil=function(){},b8e.JsUtil.tmpValueDesc={value:void 0,enumerable:!1,writable:!1,configurable:!0};var r={get:null,set:null,enumerable:!(b8e.JsUtil.defineValue=function(e,t,i,n,s){var r=b8e.JsUtil.tmpValueDesc;r.value=i,r.writable=n,r.enumerable=s,Object.defineProperty(e,t,r),r.value=void 0})},o={get:null,enumerable:!(b8e.JsUtil.defineGetSetAccessor=function(e,t,i,n,s){"function"!=typeof n&&(s=n,n=void 0),r.get=i,r.set=n,r.enumerable=s,Object.defineProperty(e,t,r),r.get=null,r.set=null}),configurable:!1},a={set:null,enumerable:!(b8e.JsUtil.defineGetAccessor=function(e,t,i,n,s){o.get=i,o.enumerable=n,o.configurable=s,Object.defineProperty(e,t,o),o.get=null}),configurable:!1};b8e.JsUtil.defineSetAccessor=function(e,t,i,n,s){a.set=i,a.enumerable=n,a.configurable=s,Object.defineProperty(e,t,a),a.set=null},b8e.JsUtil.jsonParse=function(e){if(!e)return null;if("string"!=typeof e)throw new Error("JSON Loader: Input item doesn't contain string content");return JSON.parse(e)},b8e.JsUtil.getClassName=function(e){if("function"==typeof e){var t=e.prototype;if(t&&t.hasOwnProperty("__classname__")&&t.__classname__)return t.__classname__;var i="";if(e.name&&(i=e.name),e.toString){var n,s=e.toString();(n="["===s.charAt(0)?s.match(/\[\w+\s*(\w+)\]/):s.match(/function\s*(\w+)/))&&2===n.length&&(i=n[1])}return"Object"!==i?i:""}return e&&e.constructor?b8e.JsUtil.getClassName(e.constructor):""}},{}],110:[function(e,t,i){b8e.LayoutUtil={},b8e.LayoutUtil.layout=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;if(e.layout){var i=e.layout;if(e.layout.type!==b8e.LayoutType.None){var n=e.getLayoutContent();if(n&&!(n.length<=0)){e.getAnchor();for(var s,r,o=null,a=0,l=0,h=0,c=0,u=e.getWidth(),d=e.getHeight(),f=0,g=n.length;f<g;f++)if(s=n[f],f<t)r=s;else{switch(i.type){case b8e.LayoutType.Horizontal:a=r?r.x+r.width+i.spacingX:i.paddingLeft,l=i.paddingTop,(!o||o.height<s.height)&&(o=s);break;case b8e.LayoutType.Vertical:l=r?r.y-r.height-i.spacingY:-1*i.paddingTop,a=i.paddingLeft,(!o||o.width<s.width)&&(o=s);break;case b8e.LayoutType.Grid:if(r)if((a=r.x+r.width+i.spacingX)+s.width+i.paddingRight>u){if(a=0+i.paddingLeft,!o)return void b8e.error("container 宽度并不能放下一个 child");l=o.y-o.height-i.spacingY,o=null}else(!o||o.height<s.height)&&(o=s),l=r.y;else a=0+i.paddingLeft,l=-1*i.paddingTop}s.setPosition(a,l),r=s}switch(i.type){case b8e.LayoutType.Horizontal:h=s.x+s.width+i.paddingRight,c=o?o.height:d;break;case b8e.LayoutType.Vertical:h=o?o.width:u,c=-1*(s.y-s.height-i.paddingBottom);break;case b8e.LayoutType.Grid:h=u,o||(o=s),c=-1*(o.y-o.height-i.paddingBottom)}e.setSize(h,c)}}}else b8e.error("content 未实现layout接口")}},{}],111:[function(e,t,i){var n="function"==typeof Symbol&&"symbol"===c(Symbol.iterator)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":c(e)},s=b8e.LocalStorage=function(){};s.setItem=function(e,t){if("string"==typeof e){var i;i="object"===(void 0===t?"undefined":n(t))?JSON.stringify(t):t,cc.sys.localStorage.setItem(e,i)}else b8e.error("The key must be a string")},s.getItem=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e){var i=cc.sys.localStorage.getItem(e);return t?JSON.parse(i):i}b8e.error("The key must be a string")},s.removeItem=function(e){"string"==typeof e?cc.sys.localStorage.removeItem(e):b8e.error("The key must be a string")}},{}],112:[function(e,t,i){var s=b8e.LogReport=function(){};s._reportUrl=null,s._reportDataGetter=null,s._msgs=null,s._net=null,s.init=function(e,t){s._reportUrl=e,s._reportDataGetter=t,s._net=b8e.NetMgr.createMgr("LogReport")},s.send=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(t){var i="";if(0<e.length&&(i=e.join(" ")),i){if(1e3<i.length&&(i=i.substr(0,1e3)+"..."),s._msgs||(s._msgs=[]),-1<s._msgs.indexOf(i))return;s._msgs.push(i)}if(s._reportUrl){var n={};n.logType=t,n.usedMemory="",n.totalMemory="",n.stageWidth=b8e.stageWidth,n.stageHeight=b8e.stageHeight,n.runTime=b8e.TimeUtil.formatTime(b8e.timeStamp),n.fps=b8e.Ticker.getFps(),n.kernelName=navigator.appName,n.kernelVersion=navigator.appVersion,n.kernelPlatform=navigator.platform,n.href=window.location&&window.location.href?window.location.href:"",n.logMsg=i,s._reportDataGetter&&(n=s._reportDataGetter(n)),s._net.requestData(s._reportUrl,n,function(e,t){e?b8e.log("日志上报IO错误："+e):0==t.code?b8e.log("日志上报成功"):b8e.log("日志上报错误："+t.code+":"+t.msg)},this,null,!0,{isJson:!0})}else switch(t){case"WARN":console&&console.warn.call?console.warn.call(console,i):cc.warn.call(cc.warn,i);break;case"ERROR":b8e.macro.IS_DEBUG&&b8e.Toast.launch(s._msgs.join("\n"),4294901760,0),console&&console.error.call?console.error.call(console,i):cc.error.call(cc.error,i);break;default:console&&console.log.call?console.log.call(console,i):cc.log.call(cc.log,i)}}}},{}],113:[function(e,t,i){var r=b8e.LogMode=b8e.Enum({None:0,Debug:1,Warn:2,Error:4,Info:8,All:15}),o=b8e.Logger=function(){};o.currLogMode=r.None,o.log=null,o.warn=null,o.error=null,o.info=null,o.init=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.All,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;o.currLogMode=e,o.log=0!=(e&r.Debug)?t||o.log:function(){},o.warn=0!=(e&r.Warn)?i||o.warn:function(){},o.error=0!=(e&r.Error)?n||o.error:function(){},o.info=0!=(e&r.Info)?s||o.info:function(){},b8e.info=o.info,b8e.log=o.log,b8e.error=o.error,b8e.warn=o.warn,b8e.trace=o.trace},o.trace=function(){var e=Array.prototype.slice.call(arguments);e.unshift("TRACE:"),console&&console.log.apply?console.log.apply(console,e):cc.log.apply(cc.log,e)},o.log=function(){if(b8e.macro.IS_DEBUG){var e=Array.prototype.slice.call(arguments),t=e.concat();t.unshift("LOG:"),console&&console.log.apply?console.log.apply(console,t):cc.log.apply(cc.log,t),b8e.profiler&&b8e.profiler.isShow()&&b8e.profiler.addLog.apply(b8e.profiler,e)}},o.info=function(){if(b8e.macro.IS_DEBUG){var e=Array.prototype.slice.call(arguments),t=e.concat();t.unshift("INFO:"),console&&console.info.apply?console.info.apply(console,t):cc.info.apply(cc.info,t),b8e.profiler&&b8e.profiler.isShow()&&b8e.profiler.addInfo.apply(b8e.profiler,e)}},o.warn=function(){var e=Array.prototype.slice.call(arguments);if(b8e.macro.IS_DEBUG){try{Error.captureStackTrace(this,o.warn)}catch(e){try{throw Error()}catch(e){this.stack=e.stack}}e.push(":"+this.stack);var t=e.concat();t.unshift("WARN:"),console&&console.warn.apply?console.warn.apply(console,t):cc.warn.apply(cc.warn,t),b8e.profiler&&b8e.profiler.isShow()&&b8e.profiler.addWarn.apply(b8e.profiler,e)}else b8e.LogReport.send.apply(b8e.LogReport,["WARN"].concat(e))},o.error=function(){var e=Array.prototype.slice.call(arguments);if(b8e.macro.IS_DEBUG){try{Error.captureStackTrace(this,o.error)}catch(e){try{throw Error()}catch(e){this.stack=e.stack}}e.push(":"+this.stack);var t=e.concat();t.unshift("ERROR:"),console&&console.error.apply?console.error.apply(console,t):cc.error.apply(cc.error,t),b8e.profiler&&b8e.profiler.isShow()&&b8e.profiler.addError.apply(b8e.profiler,e)}else b8e.LogReport.send.apply(b8e.LogReport,["ERROR"].concat(e))},o.res=function(e,t){if(b8e.macro.IS_DEBUG){var i=["url:"+e,"readyState:"+t.readyState,"status:"+t.status];b8e.profiler&&b8e.profiler.isShow()&&b8e.profiler.addRes.apply(b8e.profiler,i)}},o.init()},{}],114:[function(e,t,i){b8e.macro={IS_RELEASE:!1,IS_DEBUG:!1,IS_COCOS_CREATOR:!1,IS_ENGINE_EDITOR:!1,IS_DESKTOP:!1,PROFILER_POSITION:{x:0,y:0},BEFORE_UNLOAD_MSG:"您确定要离开游戏吗？",DIRECTION_COUNT:5,MAX_REQUEST_RELOAD:-1,MAX_RES_RELOAD:-1,SKIN_ROOT_PATH:null,EDTEXT_ALAWYS_ON_TOP:!0}},{}],115:[function(e,t,i){var c=b8e.ProtobufUtil=function(){};b8e.ProtobufUtil.messageByUrl=b8e.HashMap.get(),c.decodeMessage=function(e,t,i){var n=c.messageByUrl.get(e);return n||(n=i.ctor.decode(t),c.messageByUrl.set(e,n)),n},c.encodeMessage=function(e){var t=e.encodeAB();return new Uint8Array(t)},c.createMessage=function(e){return new e.ctor},c.clear=function(){c.messageByUrl.clear()},c.buildMessage=function(e,t){var i=c.getBuilder();return b8e.protobuf.loadJson(t,i,e+".proto").build()},c.instantiateMessage=function(e){var t=new e;for(var i in t.ctor=e){var n=e[i];n instanceof b8e.protobuf.Builder.Enum&&(t[i]=n)}return t},c.getBuilder=function(){var e=b8e.proto.builder;return e||((e=b8e.protobuf.newBuilder()).datas={},b8e.proto.builder=e),e},c.allotProps=function(e){var t,i=c.getBuilder().datas;for(t in e)i[t]=e[t];for(t in e){var n=c.buildMessage(t,e[t]);for(var s in n){var r=n[s],o=game[s]||(game[s]={});for(var a in r){var l,h=r[a];l="function"==typeof h?c.instantiateMessage(h):h,o[a]=l}}}}},{}],116:[function(e,t,i){var _=b8e.SensitiveWords=function(){};_._maxSubStringLen=0,_._states={},_.init=function(e){for(var t=e.split(","),i=t.length,n=0;n<i;n++){var s=t[n];_._maxSubStringLen=Math.max(s.length,_._maxSubStringLen),_.addWord(s)}},_.addWord=function(e){for(var t,i=(e=e.toLowerCase()).length,n=[],s=!0,r=_._states,o="",a=0;a<i;a++)null!=r[t=o+e.charAt(a)]&&s?n=r[t]:(s=!1,r[t]=n),o=t;n[n.length]=e},_.filter=function(e,t){for(var i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n="",s=(e=e.toLowerCase()).length,r=0;r<s;){var o="",a=0,l=0,h=Math.min(s-r,_._maxSubStringLen),c=r,u=r;for(l=0;l<h;l++){var d=e.charAt(c);if(!i||d){var f=o+d,g=_._states[f];if(!g){u==r&&(n+=e.charAt(r++));break}if(-1<g.indexOf(f)){for(;a<=l;a++)n+=t;r=c+1}o=f,c++}else c++}l==h&&(n+=e.charAt(r++))}return n},_.match=function(e){return!((e=_.filter(e,"*",!0)).indexOf("*")<0)}},{}],117:[function(e,t,i){var n=b8e.StringUtil=function(){};n.equalsIgnoreCase=function(e,t){return e.toLowerCase()===t.toLowerCase()},n.equals=function(e,t){return e===t},n.isNumber=function(e){return null!=e&&!isNaN(Number(e))},n.isDouble=function(e){return e=n.trim(e),null!=/^[-\+]?\d+(\.\d+)?$/.exec(e)},n.isInteger=function(e){return null!=e&&(e=n.trim(e),null!=/^[-\+]?\d+$/.exec(e))},n.isEnglish=function(e){return null!=e&&(e=n.trim(e),null!=/^[A-Za-z]+$/.exec(e))},n.isChinese=function(e){return null!=e&&(e=n.trim(e),null!=/^[\u0391-\uFFE5]+$/.exec(e))},n.getStringByteLength=function(e){if(null==e)return 0;for(var t=0,i=e.length,n=0;n<i;n++)t+=128<e.charCodeAt(n)?2:1;return t},n.isDoubleChar=function(e){return null!=e&&(e=n.trim(e),null!=/^[^\x00-\xff]+$/.exec(e))},n.hasChineseChar=function(e){return null!=e&&(e=n.trim(e),null!=/[^\x00-\xff]/.exec(e))},n.isWhitespace=function(e){switch(e){case" ":case"\t":case"\r":case"\n":case"\f":return!0;default:return!1}},n.trim=function(e){return null==e?null:n.rtrim(n.ltrim(e))},n.ltrim=function(e){if(null==e)return null;return e.replace(/^\s*/,"")},n.rtrim=function(e){if(null==e)return null;return e.replace(/\s*$/,"")},n._log1024=Math.log(1024),n._sizes=["Bytes","KB","MB","GB","TB"],n.bytesToSize=function(e){if(!e&&0!==e)return"n/a";var t=Math.log(e)/n._log1024>>0;return Math.round(100*e/Math.pow(1024,t))/100+" "+n._sizes[t]}},{}],118:[function(e,t,i){var r=b8e.TimeUtil=function(){};r.DAY_MICRO_SECONDS=864e5,r.WEEK_MICRO_SECONDS=7*r.DAY_MICRO_SECONDS,r.MONTH_MICRO_SECONDS=31*r.DAY_MICRO_SECONDS,r.HOUR_MICRO_SECONDS=36e5,r.MINUTE_MICRO_SECONDS=6e4,r.SECOND_MICRO_SECONDS=1e3,r.formatNum=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,i=String(~~e);i.length<t;)i="0"+i;return i},r.formatTime=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:":",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3;e<0&&(e=0),e*=.001;var n="",s=0;return s<i&&(s++,n+=r.formatNum(e/3600)),s<i&&(""!=n&&(n+=t),s++,n+=r.formatNum(e%3600/60)),s<i&&(""!=n&&(n+=t),s++,n+=r.formatNum(e%60)),n},r._date=r._date?r._date:new Date,r.formatTimestamp=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Y-M-D h:m:s",i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=r._date;return n.setTime(e),(t=(t=(t=(t=(t=t.replace("Y",n.getFullYear())).replace("M",i?r.formatNum(n.getMonth()+1):n.getMonth()+1)).replace("D",i?r.formatNum(n.getDate()):n.getDate())).replace("h",i?r.formatNum(n.getHours()):n.getHours())).replace("m",r.formatNum(n.getMinutes()))).replace("s",r.formatNum(n.getSeconds()))},r.getLogoutTime=function(e){return e>b8e.TimeUtil.DAY_MICRO_SECONDS?(e/b8e.TimeUtil.DAY_MICRO_SECONDS>>0)+"天前":e>b8e.TimeUtil.HOUR_MICRO_SECONDS?(e/b8e.TimeUtil.HOUR_MICRO_SECONDS>>0)+"小时前":e>b8e.TimeUtil.MINUTE_MICRO_SECONDS?(e/b8e.TimeUtil.MINUTE_MICRO_SECONDS>>0)+"分钟前":(e/b8e.TimeUtil.SECOND_MICRO_SECONDS>>0)+"秒前"},r.getTodayTime=function(e){return r.getNextDateTime(e,0)},r.getNextDateTime=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i=r._date;return i.setTime(e),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.getTime()+t*r.DAY_MICRO_SECONDS},r.getWeek=function(e){var t=r._date;t.setTime(e);var i=t.getDay();return r.getDayString(i)},r.getDay=function(e){var t=r._date;return t.setTime(e),t.getDay()},r.getDayString=function(e){var t="";switch(e){case 0:t="周日";break;case 1:t="周一";break;case 2:t="周二";break;case 3:t="周三";break;case 4:t="周四";break;case 5:t="周五";break;case 6:t="周六"}return t}},{}],119:[function(e,t,i){b8e.Toast=b8e.BaseDisplay.extends({ctor:function(){this._super()},launch:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4294967295,i=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3600,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e){if(this._msg||(this._bg=b8e.Graphics.get(),this.addChild(this._bg),this._tx=b8e.Label.get(),this.addChild(this._tx),b8e.evt.addG(this,b8e.Event.STAGE_RESIZE,this.onResize)),b8e.stage.addChild(this),this._msg=e,this._tx.setFontSize(32),this._tx.setLineHeight(50),this._tx.isMultiline(!0),this._tx.setColor(t),this._tx.setStroke(2,4278190080),this._tx.setFontFamily("Microsoft YaHei"),this._tx.setText(this._msg),b8e.Tween.kill(this),0<n)if(1==s)this.alpha=1,b8e.Tween.get(this,{loop:!0}).to({alpha:0},.5*n).to({alpha:1},.5*n);else{var r=.2*n>>(this.alpha=0),o=.4*n>>0,a=.3*n>>0;b8e.Tween.get(this).to({alpha:1},r,b8e.Ease.quintOut).wait(o).to({alpha:0},a,b8e.Ease.quintIn).call(function(){i.clear()})}this.onResize()}},onResize:function(){var e=b8e.stageWidth-50,t=b8e.stageHeight-100;this._tx.isWordWrap(!1),this._tx.width>e-100&&(this._tx.isWordWrap(!0),this._tx.setSize(e-100,t-20)),this._bg.clear(),this._bg.setSize(e,this._tx.height+20),this._bg.fillColor(3423670545),this._bg.fillRoundRect(0,0,this._bg.width,this._bg.height,10),this._bg.setPosition(0,0),this._tx.setPosition(.5*(this._bg.width-this._tx.width),.5*(this._bg.height-this._tx.height)),this.setPosition(.5*(b8e.stageWidth-this._bg.width),.5*(b8e.stageHeight-this._bg.height))},clear:function(){this._msg&&(this._msg=null,b8e.evt.rmvG(this,b8e.Event.STAGE_RESIZE,this.onResize),b8e.Tween.kill(this),this._bg.release(),this._bg=null,this._tx.release(),this._tx=null,this.removeFromParent())},dispose:function(){this.clear(),this._super()}}),b8e.Toast.inst=null,b8e.Toast.launch=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4294967295,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3600,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;b8e.Toast.inst||(b8e.Toast.inst=new b8e.Toast),b8e.Toast.inst.launch(e,t,i,n)},b8e.Toast.clear=function(){b8e.Toast.inst&&b8e.Toast.inst.clear()}},{}]},{},[1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,83,84,85,82,2,88,89,86,87,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,113,112,114,115,116,117,118,119]),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],bulletinIndex:[function(e,t,i){"use strict";cc._RF.push(t,"69f93i+SjtIfZGDj6ZC7IgK","bulletinIndex"),e("./panel/panelIndex2"),cc._RF.pop()},{"./panel/panelIndex2":"panelIndex2"}],cmdlistenerIndex_4:[function(e,t,i){"use strict";cc._RF.push(t,"ee2d2MIEG5K7ak7PZkMX8EE","cmdlistenerIndex_4"),e("./BaseLoginCmd"),cc._RF.pop()},{"./BaseLoginCmd":"BaseLoginCmd"}],cmdlistenerIndex:[function(e,t,i){"use strict";cc._RF.push(t,"a647aieZZtHXJJh+LugWlAJ","cmdlistenerIndex"),e("./BaseLoginCmd"),cc._RF.pop()},{"./BaseLoginCmd":"BaseLoginCmd"}],configIndex:[function(e,t,i){"use strict";cc._RF.push(t,"b76562ifLJJj45lTioB13t0","configIndex"),e("./LoginConfig"),cc._RF.pop()},{"./LoginConfig":"LoginConfig"}],eventIndex_8:[function(e,t,i){"use strict";cc._RF.push(t,"a7bdbmpNVlORbaPw5JBGCaU","eventIndex_8"),e("./ZoneEvents"),cc._RF.pop()},{"./ZoneEvents":"ZoneEvents"}],gameIndex:[function(e,t,i){"use strict";cc._RF.push(t,"7233badmihMerO7kfthNC6L","gameIndex"),e("./LoadingView"),e("./LoadingPage"),e("./config/configIndex"),e("./sdk/sdkIndex"),e("./process/processIndex"),e("./view/viewIndex"),e("./app/appIndex"),e("./system/systemIndex"),cc._RF.pop()},{"./LoadingPage":"LoadingPage","./LoadingView":"LoadingView","./app/appIndex":"appIndex","./config/configIndex":"configIndex","./process/processIndex":"processIndex","./sdk/sdkIndex":"sdkIndex","./system/systemIndex":"systemIndex","./view/viewIndex":"viewIndex"}],heartBeatIndex:[function(e,t,i){"use strict";cc._RF.push(t,"db965oPTelFhqI2q8N1Q+b2","heartBeatIndex"),e("./HeartSender"),e("./HeartBeatMgr"),cc._RF.pop()},{"./HeartBeatMgr":"HeartBeatMgr","./HeartSender":"HeartSender"}],panelIndex2:[function(e,t,i){"use strict";cc._RF.push(t,"e159fVN2GpDaYZD0GR6PTNm","panelIndex2"),e("./BulletinFontsPanel"),cc._RF.pop()},{"./BulletinFontsPanel":"BulletinFontsPanel"}],panelIndex_24:[function(e,t,i){"use strict";cc._RF.push(t,"1f07cKc4fhEqKFZ7cfHb84w","panelIndex_24"),e("./ZoneListItem"),e("./ZonePanel"),e("./ZoneListBookItem"),cc._RF.pop()},{"./ZoneListBookItem":"ZoneListBookItem","./ZoneListItem":"ZoneListItem","./ZonePanel":"ZonePanel"}],panelIndex:[function(e,t,i){"use strict";cc._RF.push(t,"eddc6GmwiFKWp3Yt7ghppo6","panelIndex"),e("./RegisterView"),e("./ServerListView"),e("./CreateRole"),cc._RF.pop()},{"./CreateRole":"CreateRole","./RegisterView":"RegisterView","./ServerListView":"ServerListView"}],processIndex:[function(e,t,i){"use strict";cc._RF.push(t,"83d45N3UxdON5Ri5YQ6Bu57","processIndex"),e("./BaseProcessTypes"),e("./Register"),e("./LoadBaseConfig"),e("./ServerList"),e("./ServerConnect"),e("./CreateChar"),e("./BaseProcessRun"),e("./ReconnectMgr"),cc._RF.pop()},{"./BaseProcessRun":"BaseProcessRun","./BaseProcessTypes":"BaseProcessTypes","./CreateChar":"CreateChar","./LoadBaseConfig":"LoadBaseConfig","./ReconnectMgr":"ReconnectMgr","./Register":"Register","./ServerConnect":"ServerConnect","./ServerList":"ServerList"}],roleLoginIndex:[function(e,t,i){"use strict";cc._RF.push(t,"75969dc0nlACLstncIPY+4i","roleLoginIndex"),e("./panel/panelIndex"),e("./cmdlistener/cmdlistenerIndex"),e("./sender/senderIndex"),cc._RF.pop()},{"./cmdlistener/cmdlistenerIndex":"cmdlistenerIndex","./panel/panelIndex":"panelIndex","./sender/senderIndex":"senderIndex"}],sdkIndex:[function(e,t,i){"use strict";cc._RF.push(t,"0d2e46FAbdL8p1ZwINa3eJl","sdkIndex"),e("./HuoShuSDK"),e("./IBearGameSDK"),e("./G4399SDK"),e("./QzoneSDK"),e("./SinaSDK"),e("./SDKMgr"),e("./AnalyticsSDK"),cc._RF.pop()},{"./AnalyticsSDK":"AnalyticsSDK","./G4399SDK":"G4399SDK","./HuoShuSDK":"HuoShuSDK","./IBearGameSDK":"IBearGameSDK","./QzoneSDK":"QzoneSDK","./SDKMgr":"SDKMgr","./SinaSDK":"SinaSDK"}],senderIndex_6:[function(e,t,i){"use strict";cc._RF.push(t,"98235+7WSxMG7tK/pBwzOVa","senderIndex_6"),e("./RoleLoginSender"),cc._RF.pop()},{"./RoleLoginSender":"RoleLoginSender"}],senderIndex:[function(e,t,i){"use strict";cc._RF.push(t,"03897dLUUVPkqHXdW/6367l","senderIndex"),e("./RoleLoginSender"),cc._RF.pop()},{"./RoleLoginSender":"RoleLoginSender"}],systemIndex:[function(e,t,i){"use strict";cc._RF.push(t,"89fe5rQzmRGVbpAOeUeMDTx","systemIndex"),e("./SystemTimeMgr"),cc._RF.pop()},{"./SystemTimeMgr":"SystemTimeMgr"}],viewIndex:[function(e,t,i){"use strict";cc._RF.push(t,"11697vmzLpGZr9tWgjniGpL","viewIndex"),e("./AppPosType"),e("./AppTweenType"),e("./AppInfo"),cc._RF.pop()},{"./AppInfo":"AppInfo","./AppPosType":"AppPosType","./AppTweenType":"AppTweenType"}],zoneIndex:[function(e,t,i){"use strict";cc._RF.push(t,"8b936YSnOJH44wISUucB7FY","zoneIndex"),e("./event/eventIndex_8"),e("./panel/panelIndex_24"),e("./manager/zoneMgrIndex"),e("./ZoneStateType"),e("./ServerGroupInfo"),e("./ServerInfo"),cc._RF.pop()},{"./ServerGroupInfo":"ServerGroupInfo","./ServerInfo":"ServerInfo","./ZoneStateType":"ZoneStateType","./event/eventIndex_8":"eventIndex_8","./manager/zoneMgrIndex":"zoneMgrIndex","./panel/panelIndex_24":"panelIndex_24"}],zoneMgrIndex:[function(e,t,i){"use strict";cc._RF.push(t,"e6d0cOxYopKL53zlA6teD21","zoneMgrIndex"),e("./ZoneMgr"),cc._RF.pop()},{"./ZoneMgr":"ZoneMgr"}]},{},["black8_game_engine","GameMain","SXMLHttpRequest","LoadingPage","LoadingView","ViewModuleMgr","appIndex","BaseGameAlertBtnType","BaseGameAlertInfo","BaseGameAlertType","BaseGameAlertMgr","BaseGameAlert","BaseGameAlertGUI","bulletinIndex","BulletinFontsPanel","panelIndex2","HeartBeatMgr","HeartSender","heartBeatIndex","BaseLoginCmd","cmdlistenerIndex","cmdlistenerIndex_4","CreateRole","RegisterView","ServerListView","panelIndex","roleLoginIndex","RoleLoginSender","senderIndex","senderIndex_6","ServerGroupInfo","ServerInfo","ZoneStateType","ZoneEvents","eventIndex_8","ZoneMgr","zoneMgrIndex","ZoneListBookItem","ZoneListItem","ZonePanel","panelIndex_24","zoneIndex","LoginConfig","ClientGlobalCfg","configIndex","gameIndex","BaseProcessRun","BaseProcessTypes","CreateChar","LoadBaseConfig","LoadModule","ReconnectMgr","Register","ServerConnect","ServerList","processIndex","AnalyticsSDK","G4399SDK","HuoShuSDK","IBearGameSDK","QzoneSDK","SDKMgr","SinaSDK","sdkIndex","SystemTimeMgr","systemIndex","AppInfo","AppPosType","AppTweenType","viewIndex"]);